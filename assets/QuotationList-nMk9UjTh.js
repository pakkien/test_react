import{u as F,r as o,g as k,j as e,P as y,S as B,b as _,B as i,d as Q,a as A,A as x,C as E,f as Y,h as R,i as T,k as M,F as V,I as j,l as I,m as H,t as g}from"./index-Cs7JYpRO.js";import{B as z}from"./Badge-wJtjq4BM.js";import{P as U,u as $,d as G,a as O}from"./PaginationButtons-DV0vbQVk.js";import{a as W}from"./axios-CCb-kr4I.js";import"./Select-C4QG0ZLO.js";function J(s){switch(s.toLowerCase()){case"in progress":return"danger";case"closed":return"dark";case"awarded":return"success";default:return"primary"}}const se=()=>{const s=F(),[C,K]=o.useState(!1),[d,m]=o.useState([]),[b,n]=o.useState([]),p=async()=>{W.get("http://127.0.0.1:5000/quotation/all_quotations_table").then(a=>{m(a.data.data),n(a.data.data),console.log(a.data.data)})};o.useEffect(()=>{p()},[]);const[l,S]=o.useState(1),[c,v]=o.useState(U[5]),{items:u,requestSort:f,getClassNamesFor:w}=$(b),h=a=>{const t=a.search.toString().toLowerCase(),D=N(t);a.search?n(D):n(d)},r=k({initialValues:{search:""},onSubmit:h,onReset:()=>n(d)}),N=a=>d.filter(t=>t.prepared_by.toLowerCase().includes(a)||t.client.toLowerCase().includes(a)||g(`${t.quotation_date}`).format("DD-MM-YYYY").includes(a)||t.quotation_no.toLowerCase().includes(a)||t.end_user.toLowerCase().includes(a)||t.revision.toString().toLowerCase().includes(a)||t.quotation_amount.toFixed(2).toString().toLowerCase().includes(a)||t.cost.toFixed(2).toString().toLowerCase().includes(a)||t.margin.toFixed(2).toString().toLowerCase().includes(a)||t.status.toLowerCase().includes(a)||t.site_location.toLowerCase().includes(a)||t.building.toLowerCase().includes(a)),L=(a,t)=>{s("view-quotation",{state:{quotation_id:a,quotation_rev_id:t}})},q=(a,t)=>{s("edit-quotation",{state:{quotation_id:a,quotation_rev_id:t}})},P=()=>{s("create-quotation")};return e.jsxs(y,{title:"Quotation",children:[e.jsx(B,{children:e.jsxs(_,{children:[e.jsx(i,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>s(-1),children:"Back"}),e.jsx(Q,{}),e.jsx("strong",{className:"fs-5",children:"Quotation"})]})}),e.jsxs(A,{container:"fluid",children:[C&&e.jsx(x,{color:"success",isLight:!0,icon:"Create",isDismissible:!0,children:"Create Success"}),e.jsxs(E,{stretch:!0,children:[e.jsx(Y,{className:"table-responsive",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(R,{children:e.jsx(T,{children:e.jsx(M,{tag:"div",className:"h3",children:"Quotation"})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(x,{color:"light",isLight:!0,children:e.jsx("form",{onSubmit:r.handleSubmit,children:e.jsx(V,{children:e.jsxs("div",{className:"d-flex","data-tour":"search",children:[e.jsx("label",{className:"border-0 bg-transparent",children:e.jsx(j,{icon:"Search",size:"2x",color:"primary"})}),e.jsx(I,{id:"search",placeholder:"Search...",className:"border-0 shadow-none bg-transparent",onChange:a=>{r.handleChange(a),a.target.value.length>2&&H(()=>h({...r.values,search:a.target.value}),1e3)(),a.target.value.length===0&&r.resetForm()},value:r.values.search})]})})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(i,{color:"success",className:"float-end",icon:"Create",tag:"a",onClick:()=>P(),children:"Create"})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("table",{className:"table table-modern",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No."}),e.jsx("th",{children:"Prepared By"}),e.jsx("th",{children:"Client"}),e.jsxs("th",{onClick:()=>f("quotation_date"),className:"cursor-pointer text-decoration-underline",children:["Quotation Date",e.jsx(j,{size:"lg",className:w("quotation_date"),icon:"FilterList"})]}),e.jsx("th",{children:"Quotation No."}),e.jsx("th",{children:"End User"}),e.jsx("th",{children:"Revision"}),e.jsx("th",{children:"Quotation Amount"}),e.jsx("th",{children:"Cost"}),e.jsx("th",{children:"Margin"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Site Location"}),e.jsx("th",{children:"Building"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:G(u,l,c).map((a,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:t+1}),e.jsx("td",{children:a.prepared_by}),e.jsx("td",{children:a.client}),e.jsx("td",{children:g(`${a.quotation_date}`).format("DD/MM/YYYY")}),e.jsx("td",{children:a.quotation_no}),e.jsx("td",{children:a.end_user}),e.jsx("td",{children:a.revision}),e.jsx("td",{children:a.quotation_amount.toFixed(2)}),e.jsx("td",{children:a.cost.toFixed(2)}),e.jsx("td",{children:a.margin.toFixed(2)}),e.jsx("td",{children:e.jsx(z,{className:"statusBadge",color:J(a.status),children:e.jsx("h6",{children:a.status})})}),e.jsx("td",{children:a.site_location}),e.jsx("td",{children:a.building}),e.jsx("td",{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-auto",children:e.jsx(i,{color:"primary",icon:"RemoveRedEye",shadow:"none",hoverShadow:"lg",tag:"a",onClick:()=>L(a.quotation_id,a.quotation_rev_id)})}),e.jsx("div",{className:"col-auto",children:e.jsx(i,{color:"primary",icon:"Edit",shadow:"none",hoverShadow:"lg",tag:"a",onClick:()=>q(a.quotation_id,a.quotation_rev_id)})})]})})]},a.id))})]})})]})}),e.jsx(O,{data:u,label:"items",setCurrentPage:S,currentPage:l,perPage:c,setPerPage:v})]})]})]})};export{se as default};
