import{r as a,u as xe,g as se,j as e,A as oe,C as ne,f as ie,h as re,i as le,k as ce,F as k,I as d,l as P,m as de,B as r,n as S,o as we,p as Ae,q as De,s as ke,t as ae,v as he,P as Fe,S as Oe,b as Me,d as pe,w as Le,a as qe}from"./index-Dj4NEu2w.js";import{P as _e,u as je,d as Se,a as ge}from"./useSortableData-DHrQhzA7.js";import{M as fe,a as ve,b as Ce,c as be,d as Ne}from"./Modal-B8vwAxBg.js";import{u as ye,c as Be,t as Te}from"./timezone-CU_0dOLu.js";import{S as ze}from"./Select-BLxPBurD.js";function V(i){return i?e.jsx(d,{icon:"CheckCircleOutline",className:"",color:"success",size:"2x",forceFamily:"material"}):e.jsx(d,{icon:"Cancel",className:"",color:"danger",size:"2x",forceFamily:"material"})}const Ve=()=>{const i=[{user_id:"1",role:"Admin",name:"John Doe",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"2",role:"Admin",name:"John2",email:"user1@gmail.com",view_quotation:!1,create_edit_quotation:!1,view_mccr:!1,create_edit_mccr:!1},{user_id:"3",role:"Admin",name:"John3",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"4",role:"Admin",name:"John4",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"5",role:"Admin",name:"John5",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"6",role:"Admin",name:"John6",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"7",role:"Admin",name:"John7",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"8",role:"Admin",name:"John8",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"9",role:"Admin",name:"John9",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"10",role:"User",name:"John10",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0}],[v,C]=a.useState(i);function u(o){const l=v.filter(t=>t.user_id!==o);C(l)}const b=xe(),F=()=>{b("manage-user")},[N,O]=a.useState({name:"",id:""}),[E,p]=a.useState(!1),[x,_]=a.useState(!1),[w,m]=a.useState(!1),[I,j]=a.useState(!1),[U,Y]=a.useState(null),[g,R]=a.useState(void 0),[H,J]=a.useState(!0),[ue,$]=a.useState(!1),[M,G]=a.useState(!0),Q=()=>{_(!1),m(!1),j(!1),Y(null),R(!1),J(!0),$(!1),G(!0)},[W,L]=a.useState(!1),K=o=>{u(o),L(!0),setTimeout(()=>{L(!1)},3e3)},[X,q]=a.useState(i),[y,Z]=a.useState(1),[B,ee]=a.useState(_e[5]),{items:T,requestSort:A,getClassNamesFor:D}=je(X),z=o=>{const l=o.search.toString().toLowerCase(),t=te(l);o.search?q(t):q(i)},s=se({initialValues:{search:""},onSubmit:z,onReset:()=>q(i)}),te=o=>i.filter(l=>l.name.toLowerCase().includes(o)||l.role.toLowerCase().includes(o)||l.email.toLowerCase().includes(o));return e.jsxs(e.Fragment,{children:[W&&e.jsx(oe,{color:"success",isLight:!0,icon:"VerifiedUser",isDismissible:!0,children:"Delete Success"}),e.jsxs(ne,{stretch:!0,children:[e.jsx(ie,{className:"table-responsive",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(re,{children:e.jsx(le,{children:e.jsx(ce,{tag:"div",className:"h3",children:"User Management"})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(oe,{color:"light",isLight:!0,children:e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsx(k,{children:e.jsxs("div",{className:"d-flex","data-tour":"search",children:[e.jsx("label",{className:"border-0 bg-transparent",children:e.jsx(d,{icon:"Search",size:"2x",color:"primary"})}),e.jsx(P,{id:"search",placeholder:"Search...",className:"border-0 shadow-none bg-transparent",onChange:o=>{s.handleChange(o),o.target.value.length>2&&de(()=>z({...s.values,search:o.target.value}),1e3)(),o.target.value.length===0&&s.resetForm()},value:s.values.search})]})})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(r,{color:"success",className:"float-end",icon:"Create",tag:"a",children:"Create"})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("table",{className:"table table-modern",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"View Quotation"}),e.jsx("th",{children:"Create / Edit Quotation"}),e.jsx("th",{children:"View MCCR"}),e.jsx("th",{children:"Create / Edit MCCR"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:Se(T,y,B).map((o,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsx("td",{children:o.role}),e.jsx("td",{children:o.name}),e.jsx("td",{children:o.email}),e.jsx("td",{children:V(o.view_quotation)}),e.jsx("td",{children:V(o.create_edit_quotation)}),e.jsx("td",{children:V(o.view_mccr)}),e.jsx("td",{children:V(o.create_edit_mccr)}),e.jsx("td",{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-auto",children:e.jsx(r,{color:"primary",icon:"Edit",shadow:"none",hoverShadow:"lg",tag:"a",target:"_blank",onClick:()=>F()})}),e.jsx("div",{className:"col-auto",children:e.jsx(r,{className:"me-4",color:"danger",isLight:!0,icon:"Delete",onClick:()=>{O({name:o.name,id:o.user_id}),Q(),j(!0),p(!0)}})})]})})]},o.user_id))})]})})]})}),e.jsx(ge,{data:T,label:"items",setCurrentPage:Z,currentPage:y,perPage:B,setPerPage:ee})]}),e.jsxs(fe,{isOpen:E,setIsOpen:p,titleId:"exampleModalLabel",isStaticBackdrop:x,isScrollable:w,isCentered:I,size:U,fullScreen:g,isAnimation:H,children:[e.jsx(ve,{setIsOpen:M?p:void 0,children:e.jsxs(Ce,{id:"confirmDeleteUserModal",children:["Confirm Delete User - ",N.name]})}),e.jsxs(be,{children:["Confirm to delete ",N.name]}),e.jsxs(Ne,{children:[e.jsx(r,{color:"danger",icon:"Delete",onClick:()=>{p(!1),K(N.id)},children:"Delete"}),e.jsx(r,{color:"info",isOutline:!0,className:"border-0",onClick:()=>p(!1),children:"Cancel"})]})]})]})};S.extend(ye);S.extend(we);S.extend(Be);S.extend(Te);const Pe=()=>{const[i,v]=a.useState([]),[C,u]=a.useState(i),b=async()=>{const t={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};ae.get("http://127.0.0.1:5000/option/",t).then(n=>{v(n.data.options),u(n.data.options)})};a.useEffect(()=>{b()},[]);const[F,N]=a.useState(1),[O,E]=a.useState(_e[5]),{items:p,requestSort:x,getClassNamesFor:_}=je(C),w=t=>{const n=t.search.toString().toLowerCase(),h=t.option_name.toString().toLowerCase(),c=I(n,h);!t.search&&!t.option_name?u(i):u(c)},m=se({initialValues:{search:"",option_name:""},onSubmit:w,onReset:()=>u(i)}),I=(t,n)=>{let h=i;return n&&(h=i.filter(c=>c.option_name.toLowerCase()===n)),h.filter(c=>c.option_name.toLowerCase().includes(t)||c.option_value.toLowerCase().includes(t)||S(`${c.created_at}`).format("DD-MM-YYYY").includes(t)||c.created_by.toLowerCase().includes(t)||S(`${c.updated_at}`).format("DD-MM-YYYY").includes(t)||c.updated_by.toLowerCase().includes(t))},[j,U]=a.useState({option_id:"",option_name:"",option_value:""}),[Y,g]=a.useState(!1),[R,H]=a.useState(!1),[J,ue]=a.useState(!1),[$,M]=a.useState(!1),[G,Q]=a.useState(null),[W,L]=a.useState(void 0),[K,X]=a.useState(!0),[q,y]=a.useState(!1),[Z,B]=a.useState(!0),ee=()=>{H(!1),ue(!1),M(!1),Q(null),L(!1),X(!0),y(!1),B(!0)},T=t=>{const n={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};ae.delete(`http://127.0.0.1:5000/option/${t}`,n).then(h=>{he(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(d,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Option Deleted"})]}),"Option deleted successfully"),D(!1),b()}).catch(h=>console.log(h))},[A,D]=a.useState(!1),z=async(t,n)=>{const h={headers:{Authorization:`${localStorage.getItem("bts_token")}`}},c={option_name:t,option_value:n};ae.post("http://127.0.0.1:5000/option/",c,h).then(me=>{he(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(d,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Option Added"})]}),"Option added successfully"),D(!1),b(),s.resetForm()}).catch(me=>console.log(me))},s=se({initialValues:{option_name_dropdown:"",option_name:"",option_value:""},validate:t=>{const n={};return!t.option_name&&!t.option_name_dropdown&&(n.option_name="Required"),t.option_value||(n.option_value="Required"),n},onSubmit:async t=>{const n=t.option_name_dropdown?t.option_name_dropdown:t.option_name;await z(n,t.option_value)}}),te=i.map(t=>t.option_name),l=[...new Set(te)].map(t=>({value:t,text:t}));return l.splice(0,0,{value:"",text:"Create New Option"}),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{hidden:!A,tag:"form",children:[e.jsxs(re,{children:[e.jsx(le,{children:e.jsx(ce,{tag:"div",className:"h3",children:"Add Options"})}),e.jsx(Ae,{children:e.jsx(r,{color:"dark",className:"float-end",icon:"Close",tag:"a",isLight:!0,onClick:()=>{s.resetForm(),D(!1),m.resetForm()}})})]}),e.jsx(ie,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:s.values.option_name_dropdown==""?"col-md-2":"col-md-4",children:e.jsx(k,{id:"option_name_dropdown",label:s.values.option_name_dropdown==""?"":"Option Name",isFloating:!0,children:e.jsx(ze,{id:"OptionNameSelect",ariaLabel:"Default select option name",value:s.values.option_name_dropdown,list:l,onBlur:s.handleBlur,isValid:s.isValid,isTouched:s.touched.option_name_dropdown,invalidFeedback:s.errors.option_name_dropdown,onChange:t=>{s.handleChange(t),de(()=>w({...m.values,option_name:t.target.value}),1e3)()}})})}),e.jsx("div",{className:"col-md-4",hidden:s.values.option_name_dropdown!="",children:e.jsx(k,{id:"option_name",label:"Option Name",isFloating:!0,children:e.jsx(P,{placeholder:"Option Name",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.option_name,isValid:s.isValid,isTouched:s.touched.option_name,invalidFeedback:s.errors.option_name,validFeedback:"Valid Option Name"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(k,{id:"option_value",label:"Option Value",isFloating:!0,children:e.jsx(P,{placeholder:"Option Value",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.option_value,isValid:s.isValid,isTouched:s.touched.option_value,invalidFeedback:s.errors.option_value,validFeedback:"Valid Option Value"})})}),e.jsx("div",{className:"col-md-12"})]})}),e.jsx(De,{children:e.jsx(ke,{children:e.jsx(r,{color:"success",className:"float-end",icon:"Add",tag:"a",onClick:s.handleSubmit,children:"Add"})})})]}),e.jsxs(ne,{children:[e.jsx(ie,{children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",hidden:A,children:e.jsx(re,{children:e.jsx(le,{children:e.jsx(ce,{tag:"div",className:"h3",children:"Manage Options"})})})}),e.jsx("div",{className:"col-md-4",hidden:A,children:e.jsx(oe,{color:"light",isLight:!0,children:e.jsx("form",{onSubmit:m.handleSubmit,children:e.jsx(k,{children:e.jsxs("div",{className:"d-flex","data-tour":"search",children:[e.jsx("label",{className:"border-0 bg-transparent",children:e.jsx(d,{icon:"Search",size:"2x",color:"primary"})}),e.jsx(P,{id:"search",placeholder:"Search...",className:"border-0 shadow-none bg-transparent",onChange:t=>{m.handleChange(t),t.target.value.length>2&&de(()=>w({...m.values,search:t.target.value}),1e3)(),t.target.value.length===0&&m.resetForm()},value:m.values.search})]})})})})}),e.jsx("div",{className:"col-md-4",hidden:A,children:e.jsx(r,{color:"primary",className:"float-end",icon:"Add",tag:"a",onClick:()=>{D(!0),m.resetForm()},children:"Add"})}),e.jsx("div",{className:"col-md-12"}),e.jsx("div",{className:"col-md-12",children:e.jsxs("table",{className:"table table-modern",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsxs("th",{onClick:()=>x("option_name"),className:"cursor-pointer text-decoration-underline",children:["Option Name",e.jsx(d,{size:"lg",className:_("option_name"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("option_value"),className:"cursor-pointer text-decoration-underline",children:["Option Value",e.jsx(d,{size:"lg",className:_("option_value"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("created_at"),className:"cursor-pointer text-decoration-underline",children:["Created Datetime",e.jsx(d,{size:"lg",className:_("created_at"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("created_by"),className:"cursor-pointer text-decoration-underline",children:["Created By",e.jsx(d,{size:"lg",className:_("created_by"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("updated_at"),className:"cursor-pointer text-decoration-underline",children:["Updated Datetime",e.jsx(d,{size:"lg",className:_("updated_at"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("updated_by"),className:"cursor-pointer text-decoration-underline",children:["Updated By",e.jsx(d,{size:"lg",className:_("updated_by"),icon:"FilterList"})]}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:Se(p,F,O).map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:n+1}),e.jsx("td",{children:t.option_name}),e.jsx("td",{children:t.option_value}),e.jsx("td",{children:S.utc(`${t.created_at}`).local().format("DD-MM-YYYY HH:mm:ss")}),e.jsx("td",{children:t.created_by}),e.jsx("td",{children:S.utc(`${t.updated_at}`).local().format("DD-MM-YYYY HH:mm:ss")}),e.jsx("td",{children:t.updated_by}),e.jsx("td",{children:e.jsx(r,{className:"me-4",color:"danger",isLight:!0,icon:"Delete",onClick:()=>{U({option_id:t.option_id,option_name:t.option_name,option_value:t.option_value}),ee(),M(!0),g(!0)}})})]},t.option_id))})]})})]})}),e.jsx(ge,{data:p,label:"items",setCurrentPage:N,currentPage:F,perPage:O,setPerPage:E})]}),e.jsxs(fe,{isOpen:Y,setIsOpen:g,titleId:"exampleModalLabel",isStaticBackdrop:R,isScrollable:J,isCentered:$,size:G,fullScreen:W,isAnimation:K,children:[e.jsx(ve,{setIsOpen:Z?g:void 0,children:e.jsxs(Ce,{id:"confirmDeleteUserModal",children:["Confirm Delete Option: - ",j.option_name," -"," ",j.option_value]})}),e.jsxs(be,{children:["Confirm to delete ",j.option_name," - ",j.option_value]}),e.jsxs(Ne,{children:[e.jsx(r,{color:"danger",icon:"Delete",onClick:()=>{g(!1),T(j.option_id)},children:"Delete"}),e.jsx(r,{color:"info",isOutline:!0,className:"border-0",onClick:()=>g(!1),children:"Cancel"})]})]})]})},f={USER_MANAGEMENT:"User Management",MANAGE_OPTIONS:"Manage Options"},He=()=>{const[i,v]=a.useState(f.USER_MANAGEMENT),C=xe();return e.jsxs(Fe,{title:"Admin",children:[e.jsx(Oe,{children:e.jsxs(Me,{children:[e.jsx(r,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>C(-1),children:"Back"}),e.jsx(pe,{}),e.jsx("strong",{className:"fs-5",children:"Admin"}),e.jsx(pe,{}),e.jsx(Le,{children:Object.keys(f).map(u=>e.jsx(r,{color:i===f[u]?"success":"light",onClick:()=>v(f[u]),children:f[u]},u))})]})}),e.jsx(qe,{container:"fluid",children:i==f.USER_MANAGEMENT?e.jsx(Ve,{}):e.jsx(Pe,{})})]})};export{He as default};
