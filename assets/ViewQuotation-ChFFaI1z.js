import{r as p,x as B,j as e,N as W,z as y,D as se,o as ke,C,q,s as O,t as R,f as S,F as l,v as h,I,k as K,B as w,G as Q,E as ae,H as ye,y as Fe,P as Ce,S as Se,b as De,d as ve,e as Ae,a as $e,O as _e,Q as ge,R as Ne,U as X,K as Te}from"./index-BKOgcYa4.js";import{f as ie,A as L,a as U,z as u,F as Pe,u as Me,t as ze,b as qe,p as be,c as Oe,P as Re,d as te,N as Ye,e as G}from"./Progress-Da69srqr.js";import{Q as Z,B as pe}from"./enumQuotationStatus-DcwG4GCw.js";import{u as re,c as ce,t as le}from"./timezone-CfMXBVeW.js";import{C as we}from"./Checks-C6r0ZssC.js";const Be=i=>{const[t,a]=p.useState([]),[b,n]=p.useState([]),o=async(m,v)=>{const c={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${v}`}};B.get(`undefined/quotation/revisions/${m}`,c).then(d=>{a(d.data.data)})};p.useEffect(()=>{o(i.quotation_id,i.variance),t.map(m=>N(m.quotation_revision_id))},[t.length]);const N=async m=>{const v={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.get(`undefined/quotation/${m}/attachments`,v).then(c=>{if(c.data.attachments){const d=Object.assign({data:t.filter(s=>s.quotation_revision_id==m)[0],attachment_list:c.data.attachments});b==null||b.push(d)}})},k=async(m,v)=>{B.get(`undefined/quotation/attachment/${m}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(c=>{ie(c.data,v)})};return e.jsx(e.Fragment,{children:b.map((m,v)=>e.jsxs("div",{children:[e.jsxs("a",{href:"/quotation/view/"+m.data.quotation_revision_id,target:"_blank",children:["Revision ",m.data.revision]}),e.jsx("br",{}),m.attachment_list&&m.attachment_list.map(c=>e.jsxs("li",{children:[e.jsx("span",{onClick:()=>k(c.id,c.filename),children:e.jsx(W,{title:c.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:c.filename})})}),e.jsx("br",{})]},c.id))]},v))})};y.extend(re);y.extend(se);y.extend(ce);y.extend(le);const Qe=i=>{ke();const[t,a]=p.useState([]),b=async(o,N)=>{const k={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${N}`}};B.get(`undefined/quotation/revisions/${o}`,k).then(m=>{a(m.data.data)})};p.useEffect(()=>{b(i.quotation_id,i.variance)},[]);const n=o=>y.utc(o).local().format("YYYY-MMM-DD HH:mm:ss");return e.jsx(e.Fragment,{children:t.map(o=>e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/quotation/view/"+o.quotation_revision_id,target:"_blank",children:["Revision ",o.revision]})," - Created at: ",n(o.created_at),e.jsx("br",{})]}))})},Le=i=>(i.sub_items.sort((t,a)=>t.order<a.order?-1:t.order>a.order?1:0),e.jsx("div",{className:"pb-0",children:e.jsx("div",{className:"col-xl-12",children:i.sub_items.length>0&&e.jsx(L,{id:"SubItemAccordion",color:"dark",activeItemId:"SubItemAccordionItem_"+i.itemIndex,children:e.jsx(U,{id:"SubItemAccordionItem_"+i.itemIndex,title:"Sub Items",children:i.sub_items.map((t,a)=>e.jsx(e.Fragment,{children:e.jsxs(C,{id:"#subItem_card_id#"+a,shadow:"none",borderColor:"light",borderSize:1,children:[e.jsx(q,{children:e.jsx(O,{children:e.jsx(R,{tag:"div",className:"h3",children:i.sectionMode==!0?`${i.sectionIndex+1}.${i.itemIndex+1}.${a+1}  Sub Item ${a+1}`:`${i.itemIndex+1}.${a+1}   Sub Item ${a+1}`})})}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(l,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(h,{value:t.product_description,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(h,{value:t.brand,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"model",label:"Model",isFloating:!0,children:e.jsx(h,{value:t.model,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(h,{value:t.remarks,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsx(l,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(h,{value:t.quantity,disabled:!0})})}),e.jsx("div",{className:"col-3",children:e.jsx(l,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(h,{value:t.unit,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(h,{value:t.unit_cost,disabled:!0})})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsx(l,{id:"estimated_cost",label:"Estimated Cost",children:e.jsx(we,{checked:t.estimated_cost,disabled:!0,type:"checkbox"})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(h,{value:t.total_cost,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(h,{value:t.margin,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:e.jsx(h,{value:t.margin_percentage,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"unit_price",label:"Unit Price",isFloating:!0,children:e.jsx(h,{value:t.unit_price,disabled:!0})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"total_price",label:"Total Price",isFloating:!0,children:e.jsx(h,{value:t.total_price,disabled:!0})})}),e.jsx("div",{className:"col-md-12"})]})})]},a)}))})})},i.itemIndex)})),fe=i=>(i.items.sort((t,a)=>t.order<a.order?-1:t.order>a.order?1:0),e.jsx("div",{className:"pb-0",children:i.items.map((t,a)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"ItemAccordion",color:"dark",activeItemId:"ItemAccordionItem_"+a,children:e.jsx(U,{id:"ItemAccordionItem_"+a,title:i.sectionMode?`${i.sectionIndex+1}.${a+1} Item ${a+1}`:`${a+1}.0 Item ${a+1}`,children:e.jsxs(C,{id:"#item_card_id#"+a,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsx(q,{children:e.jsx(O,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Item ",a+1,"   "]})})}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(l,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(h,{value:t.product_description,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(h,{value:t.brand,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"model",label:"Model",isFloating:!0,children:e.jsx(h,{value:t.model,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(h,{value:t.remarks,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsx(l,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(h,{value:t.quantity,disabled:!0})})}),e.jsx("div",{className:"col-3",children:e.jsx(l,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(h,{value:t.unit,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(h,{value:t.unit_cost,disabled:!0})})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsx(l,{id:"estimated_cost",label:"Estimated Cost",children:e.jsx(we,{checked:t.estimated_cost,disabled:!0,type:"checkbox"})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(h,{value:t.total_cost,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(h,{value:t.margin,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:e.jsx(h,{value:t.margin_percentage,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(l,{id:"unit_price",label:"Unit Price",isFloating:!0,children:e.jsx(h,{value:t.unit_price,disabled:!0})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"total_price",label:"Total Price",isFloating:!0,children:e.jsx(h,{value:t.total_price,disabled:!0})})}),e.jsx("div",{className:"col-md-12"}),e.jsx("div",{className:"col-md-12",children:e.jsx(Le,{itemIndex:a,sub_items:t.sub_items,sectionMode:i.sectionMode,sectionIndex:i.sectionIndex})}),e.jsx("div",{className:"col-md-12"})]})})]},t.item_id)})})}),e.jsx("div",{className:"col-md-12"})]}))})),Ue=i=>(i.sections.sort((t,a)=>t.order<a.order?-1:t.order>a.order?1:0),e.jsx("div",{className:"pb-0",children:i.sections.map((t,a)=>t.is_section_valid?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-md-12",children:e.jsx(L,{id:"SectionAccordion",color:"dark",activeItemId:"SectionAccordionItem_"+a,children:e.jsx(U,{id:"SectionAccordionItem_"+a,title:`${a+1}.0  `+t.name,children:e.jsx(fe,{items:t.items,sectionMode:!0,sectionIndex:a})})})}),e.jsx("div",{className:"col-md-12",children:" "})]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{items:t.items,sectionMode:!1,sectionIndex:a}),e.jsx("div",{className:"col-md-12",children:" "})]}))})),ne=u.object({created_at:u.string(),created_by:u.string(),filename:u.string(),id:u.string(),size:u.number()}),Ee=u.object({po_no:u.string().min(3),po_date:u.string(),po_amount:u.coerce.number(),po_attachments:u.array(ne),temp_attachment_ids:u.array(u.string()),order:u.number()}),Ve=u.object({so_no:u.string(),so_date:u.string(),so_attachments:u.array(ne),temp_attachment_ids:u.array(u.string()),order:u.number()}),He=u.object({invoice_no:u.string(),invoice_date:u.string(),invoice_amount:u.coerce.number(),payment_terms:u.string(),invoice_attachments:u.array(ne),temp_attachment_ids:u.array(u.string()),order:u.number()}),Ge=u.object({remarks:u.string(),purchase_order:u.array(Ee),sale_order:u.array(Ve),invoice:u.array(He)}),We=i=>Me({mode:"onChange",resolver:ze(Ge),defaultValues:{remarks:i.data.remarks,purchase_order:i.data.purchase_order,sale_order:i.data.sale_order,invoice:i.data.invoice}}),Ie=i=>{const t=We(i);return e.jsx(Pe,{...t,children:i.children})},J=()=>qe(),ee=10,de=i=>{const[t,a]=p.useState([]);p.useEffect(()=>{a(i.attachment_list)},[i.attachment_list.length]);const b=async(r,x,_)=>{B.get(`undefined/tracking_list/attachment/${r}/${x}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(g=>{ie(g.data,_)})},n=r=>{let x=t.filter(_=>_.id!=r);a(x)},[o,N]=p.useState([]),[k,m]=p.useState([]),[v,c]=p.useState(!1),d=async r=>{var x=new FormData;x.append("file",r);var _={onUploadProgress:function(g){const A=g.total&&g.loaded?Math.round(g.loaded*100/g.total):0;N(T=>{const M=[...T];return M.map(Y=>Y.name==r.name?Y.upload_percent=A:null),M})},headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.post(`undefined/tracking_list/attachment/${i.attachment_type}`,x,_).then(function(g){const A=g.data.attachment_id;N(T=>{const M=[...T];return M.map(Y=>Y.name==r.name?Y.upload_id=A:null),M})}).catch(function(g){N(A=>{const T=[...A];return T.map(M=>M.name==r.name?M.upload_error="Error":null),T})})},s=p.useCallback((r,x)=>{r!=null&&r.length&&(N(_=>[..._,...r.map(g=>Object.assign(g,{preview:be,upload_percent:0,upload_id:"",upload_error:""}))]),r.map(_=>d(_))),x!=null&&x.length&&m(_=>[..._,...x])},[]),{getRootProps:D,getInputProps:j,isDragActive:$}=Oe({accept:{"application/*":[".pdf"]},maxSize:1024*1500,maxFiles:ee-o.length,disabled:v,onDrop:s});p.useEffect(()=>()=>o.forEach(r=>URL.revokeObjectURL(r.preview)),[o]),p.useEffect(()=>{let x=o.filter(g=>g.upload_percent==100&&g.upload_id&&!g.upload_error).map(g=>g.upload_id),_=t.map(g=>g.id);switch(i.attachment_type){case"purchase_order":{i.updateIdsFunc(i.index,[...x,..._]);break}case"sale_order":{i.updateIdsFunc(i.index,[...x,..._]);break}case"invoice":{i.updateIdsFunc(i.index,[...x,..._]);break}}},[o,t]),p.useEffect(()=>{o.length+t.length>=ee?c(!0):c(!1)},[o.length+t.length]);const f=r=>{N(x=>x.filter(_=>_.name!==r))},F=r=>{m(x=>x.filter(({file:_})=>_.name!==r))},z=()=>{N([]),m([])};function P(r,x=2){if(!+r)return"0 Bytes";const _=1024,g=x<0?0:x,A=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],T=Math.floor(Math.log(r)/Math.log(_));return`${parseFloat((r/Math.pow(_,T)).toFixed(g))} ${A[T]}`}return e.jsxs(C,{shadow:"none",borderSize:0,borderColor:"light",children:[e.jsx(q,{children:e.jsx(O,{children:e.jsxs(R,{tag:"div",className:"h5",children:["Attachments"," ",o!=null&&o.length||t!=null&&t.length?" - "+((o==null?void 0:o.length)+(t==null?void 0:t.length))+"/"+ee:""]})})}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4 ",children:[e.jsxs("div",{hidden:v,...D({className:i.className}),children:[e.jsx("input",{...j()}),e.jsx("div",{className:"border border-2 border-light border d-flex justify-content-center align-items-center",style:{height:150},children:e.jsxs("p",{className:"lead",children:[e.jsx(I,{icon:"Upload",size:"2x"}),$?"Drop the files here ...":"Drag & drop files here, or click to select files"]})})]}),t.map(r=>{var x;return e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(C,{borderColor:"success",className:"shadow-none border border-2 rounded-2",children:e.jsx(S,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:K("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:be,alt:r.filename,width:50})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},onClick:()=>b(i.attachment_type,r.id,r.filename),children:e.jsx(W,{title:r.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:r.filename})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:(x=r.filename.split(".").pop())==null?void 0:x.toUpperCase()})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:P(r.size)})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>n(r.id)})})})})]})})})})},r.id)}),o.map(r=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(C,{borderColor:r.upload_error?"danger":r.upload_percent!=100?"info":"success",className:"shadow-none border border-2 rounded-2",children:e.jsx(S,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:K("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:r.preview,alt:r.name,width:50,onLoad:()=>{URL.revokeObjectURL(r.preview)}})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(W,{title:r.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:r.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:r.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:P(r.size)})}),e.jsx("div",{className:"col-12",children:r.upload_error?e.jsx("div",{className:"text-danger",children:r.upload_error}):r.upload_percent!=100?e.jsx(Re,{isAnimated:!0,value:r.upload_percent,max:100,color:"success",height:"0.5rem"}):e.jsxs("div",{className:"text-success",children:[e.jsx(I,{icon:"Check",size:"lg",color:"success"})," ","Uploaded"]})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>f(r.name)})})})})]})})})})},r.name)),k.map(({file:r,errors:x})=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(C,{borderColor:"danger",className:"shadow-none border border-2 rounded-2",children:e.jsx(S,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:K("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx(I,{icon:"ErrorOutline",size:"4x",color:"danger"})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(W,{title:r.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:r.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:r.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:P(r.size)})}),e.jsx("div",{className:"col-12",children:x.map(_=>e.jsx("div",{className:"text-danger",children:_.message}))})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>F(r.name)})})})})]})})})})})),e.jsx("div",{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",hidden:!(o.length>0||k.length>0),onClick:z,isLight:!0,children:"Remove all files"})})]})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]})},Je=()=>{const{register:i,control:t,formState:{errors:a},watch:b,setValue:n}=J(),o=b(),{append:N,remove:k,fields:m}=te({name:"purchase_order",control:t}),v=()=>{N({po_no:"",po_date:"",po_amount:0,po_attachments:[],temp_attachment_ids:[],order:0})},c=(d,s)=>{n(`purchase_order.${d}.temp_attachment_ids`,s)};return m.sort((d,s)=>d.order<s.order?-1:d.order>s.order?1:0),e.jsxs("div",{className:"pb-0",children:[e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[m.map((d,s)=>{var D,j,$,f,F,z,P,r,x,_,g,A,T,M,Y,E,V,H;return e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"poAccordion",color:"dark",activeItemId:"poAccordionItem_"+s,children:e.jsxs(U,{id:"poAccordionItem_"+s,title:"Purchase Order "+(+s+1),children:[e.jsxs(C,{id:"#po_card_id#"+s,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs(q,{children:[e.jsx(O,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Purchase Order ",s+1,"  "]})}),e.jsx(ae,{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",onClick:()=>{k(s)},children:"Delete Purchase Order"})})]}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"po_no",label:"PO No.",children:[e.jsx("input",{id:"po_no",className:"form-control "+((j=(D=a.purchase_order)==null?void 0:D[s])!=null&&j.po_no?"is-invalid":""),...i(`purchase_order.${s}.po_no`),type:"text",placeholder:"po_no"}),e.jsx(e.Fragment,{children:(f=($=a.purchase_order)==null?void 0:$[s])!=null&&f.po_no?e.jsx("div",{className:"invalid-feedback",children:(z=(F=a.purchase_order)==null?void 0:F[s])==null?void 0:z.po_no.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"po_date",label:"PO Date.",children:[e.jsx("input",{id:"po_date",type:"date",className:"form-control "+((r=(P=a.purchase_order)==null?void 0:P[s])!=null&&r.po_date?"is-invalid":""),...i(`purchase_order.${s}.po_date`),placeholder:"po_date"}),e.jsx(e.Fragment,{children:(_=(x=a.purchase_order)==null?void 0:x[s])!=null&&_.po_date?e.jsx("div",{className:"invalid-feedback",children:(A=(g=a.purchase_order)==null?void 0:g[s])==null?void 0:A.po_date.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"po_amount",label:"PO Amount.",children:[e.jsx("input",{id:"po_amount",className:"form-control "+((M=(T=a.purchase_order)==null?void 0:T[s])!=null&&M.po_amount?"is-invalid":""),...i(`purchase_order.${s}.po_amount`),type:"number",placeholder:"po_amount"}),e.jsx(e.Fragment,{children:(E=(Y=a.purchase_order)==null?void 0:Y[s])!=null&&E.po_amount?e.jsx("div",{className:"invalid-feedback",children:(H=(V=a.purchase_order)==null?void 0:V[s])==null?void 0:H.po_amount.message}):""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsx(de,{attachment_type:"purchase_order",attachment_list:o.purchase_order[s].po_attachments?o.purchase_order[s].po_attachments:[],index:s,updateIdsFunc:c})})]})})]},s),e.jsx("div",{className:"col-md-12"})]})})},s)}),e.jsx("div",{children:e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:()=>{v()},className:"float-end",children:"Add Purchase Order"})})]})})})," "]})},Ke=()=>{const{register:i,control:t,formState:{errors:a},watch:b,setValue:n}=J(),o=b(),{append:N,remove:k,fields:m}=te({name:"sale_order",control:t}),v=()=>{N({so_no:"",so_date:"",so_attachments:[],temp_attachment_ids:[],order:0})},c=(d,s)=>{n(`sale_order.${d}.temp_attachment_ids`,s)};return m.sort((d,s)=>d.order<s.order?-1:d.order>s.order?1:0),e.jsxs("div",{className:"pb-0",children:[e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[m.map((d,s)=>{var D,j,$,f,F,z,P,r,x,_,g,A;return e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"soAccordion",color:"dark",activeItemId:"soAccordionItem_"+s,children:e.jsxs(U,{id:"soAccordionItem_"+s,title:"Sale Order "+(+s+1),children:[e.jsxs(C,{id:"#so_card_id#"+s,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs(q,{children:[e.jsx(O,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Sale Order ",s+1,"  "]})}),e.jsx(ae,{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",onClick:()=>{k(s)},children:"Delete Sale Order"})})]}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"so_no",label:"SO No.",children:[e.jsx("input",{id:"so_no",className:"form-control "+((j=(D=a.sale_order)==null?void 0:D[s])!=null&&j.so_no?"is-invalid":""),...i(`sale_order.${s}.so_no`),type:"text",placeholder:"so_no"}),e.jsx(e.Fragment,{children:(f=($=a.sale_order)==null?void 0:$[s])!=null&&f.so_no?e.jsx("div",{className:"invalid-feedback",children:(z=(F=a.sale_order)==null?void 0:F[s])==null?void 0:z.so_no.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"so_date",label:"SO Date.",children:[e.jsx("input",{id:"so_date",type:"date",className:"form-control "+((r=(P=a.sale_order)==null?void 0:P[s])!=null&&r.so_date?"is-invalid":""),...i(`sale_order.${s}.so_date`),placeholder:"so_date"}),e.jsx(e.Fragment,{children:(_=(x=a.sale_order)==null?void 0:x[s])!=null&&_.so_date?e.jsx("div",{className:"invalid-feedback",children:(A=(g=a.sale_order)==null?void 0:g[s])==null?void 0:A.so_date.message}):""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsx(de,{attachment_type:"sale_order",attachment_list:o.sale_order[s].so_attachments?o.sale_order[s].so_attachments:[],index:s,updateIdsFunc:c})})]})})]},s),e.jsx("div",{className:"col-md-12"})]})})},s)}),e.jsx("div",{children:e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:()=>{v()},className:"float-end",children:"Add Sale Order"})})]})})})," "]})},Xe=()=>{const{register:i,control:t,formState:{errors:a},watch:b,setValue:n}=J(),o=b(),{append:N,remove:k,fields:m}=te({name:"invoice",control:t}),v=()=>{N({invoice_no:"",invoice_date:"",invoice_amount:0,payment_terms:"",invoice_attachments:[],temp_attachment_ids:[],order:0})},c=(d,s)=>{n(`invoice.${d}.temp_attachment_ids`,s)};return m.sort((d,s)=>d.order<s.order?-1:d.order>s.order?1:0),e.jsxs("div",{className:"pb-0",children:[e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[m.map((d,s)=>{var D,j,$,f,F,z,P,r,x,_,g,A,T,M,Y,E,V,H,oe,me,he,je,xe,ue;return e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"invoiceAccordion",color:"dark",activeItemId:"invoiceAccordionItem_"+s,children:e.jsxs(U,{id:"invoiceAccordionItem_"+s,title:"Invoice "+(+s+1),children:[e.jsxs(C,{id:"#invoice_card_id#"+s,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs(q,{children:[e.jsx(O,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Invoice ",s+1,"  "]})}),e.jsx(ae,{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",onClick:()=>{k(s)},children:"Delete Invoice"})})]}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"invoice_no",label:"Invoice No.",children:[e.jsx("input",{id:"invoice_no",className:"form-control "+((j=(D=a.invoice)==null?void 0:D[s])!=null&&j.invoice_no?"is-invalid":""),...i(`invoice.${s}.invoice_no`),type:"text",placeholder:"invoice_no"}),e.jsx(e.Fragment,{children:(f=($=a.invoice)==null?void 0:$[s])!=null&&f.invoice_no?e.jsx("div",{className:"invalid-feedback",children:(z=(F=a.invoice)==null?void 0:F[s])==null?void 0:z.invoice_no.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"invoice_date",label:"Invoice Date.",children:[e.jsx("input",{id:"invoice_date",type:"date",className:"form-control "+((r=(P=a.invoice)==null?void 0:P[s])!=null&&r.invoice_date?"is-invalid":""),...i(`invoice.${s}.invoice_date`),placeholder:"invoice_date"}),e.jsx(e.Fragment,{children:(_=(x=a.invoice)==null?void 0:x[s])!=null&&_.invoice_date?e.jsx("div",{className:"invalid-feedback",children:(A=(g=a.invoice)==null?void 0:g[s])==null?void 0:A.invoice_date.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"invoice_amount",label:"Invoice Amount.",children:[e.jsx("input",{id:"invoice_amount",className:"form-control "+((M=(T=a.invoice)==null?void 0:T[s])!=null&&M.invoice_amount?"is-invalid":""),...i(`invoice.${s}.invoice_amount`),type:"number",placeholder:"invoice_amount"}),e.jsx(e.Fragment,{children:(E=(Y=a.invoice)==null?void 0:Y[s])!=null&&E.invoice_amount?e.jsx("div",{className:"invalid-feedback",children:(H=(V=a.invoice)==null?void 0:V[s])==null?void 0:H.invoice_amount.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"payment_terms",label:"Payment Terms.",children:[e.jsx("input",{id:"payment_terms",className:"form-control "+((me=(oe=a.invoice)==null?void 0:oe[s])!=null&&me.payment_terms?"is-invalid":""),...i(`invoice.${s}.payment_terms`),type:"text",placeholder:""}),e.jsx(e.Fragment,{children:(je=(he=a.invoice)==null?void 0:he[s])!=null&&je.payment_terms?e.jsx("div",{className:"invalid-feedback",children:(ue=(xe=a.invoice)==null?void 0:xe[s])==null?void 0:ue.payment_terms.message}):""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsx(de,{attachment_type:"purchase_order",attachment_list:o.invoice[s].invoice_attachments?o.invoice[s].invoice_attachments:[],index:s,updateIdsFunc:c})})]})})]},s),e.jsx("div",{className:"col-md-12"})]})})},s)}),e.jsx("div",{children:e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:()=>{v()},className:"float-end",children:"Add Invoice"})})]})})})," "]})};y.extend(re);y.extend(se);y.extend(ce);y.extend(le);const Ze=i=>{const{register:t,formState:{errors:a,isSubmitting:b},watch:n,handleSubmit:o,setValue:N,control:k}=J();n();const m=(c,d="YYYY-MM-DD",s=y.tz.guess())=>y.tz(c,d,s).utc().format("YYYY-MM-DDTHH:mm:ss"),v=async c=>{const d={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.post("undefined/tracking_list/",c,d).then(s=>{Fe(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(I,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Tracking Data saved"})]}),"Tracking Data saved successfully"),i.refresh_func()})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",hidden:!i.revision,children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("span",{className:"text-muted",children:["Tracking Revision: ",i.revision]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("span",{className:"text-muted",children:["Last Updated By: ",i.created_by]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("span",{className:"text-muted",children:["Last Updated:"," ",y.utc(`${i.created_at}`).local().format("DD-MM-YYYY HH:mm:ss")]})})]})}),e.jsx("br",{}),e.jsxs("form",{onSubmit:o(async c=>{let d=[],s=[],D=[];for(var j=0;j<c.purchase_order.length;j++){let f=Object.assign({po_no:c.purchase_order[j].po_no,po_date:m(c.purchase_order[j].po_date),po_amount:c.purchase_order[j].po_amount,po_attachments:c.purchase_order[j].temp_attachment_ids,order:j+1});d.push(f)}for(var j=0;j<c.sale_order.length;j++){let F=Object.assign({so_no:c.sale_order[j].so_no,so_date:m(c.sale_order[j].so_date),so_attachments:c.sale_order[j].temp_attachment_ids,order:j+1});s.push(F)}for(var j=0;j<c.invoice.length;j++){let F=Object.assign({invoice_no:c.invoice[j].invoice_no,invoice_date:m(c.invoice[j].invoice_date),invoice_amount:c.invoice[j].invoice_amount,payment_terms:c.invoice[j].payment_terms,po_attachments:c.invoice[j].temp_attachment_ids,order:j+1});D.push(F)}let $={quotation_id:i.quotation_id,remarks:c.remarks,purchase_order:d,sale_order:s,invoice:D};v($)}),children:[e.jsxs(C,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx(q,{children:e.jsx(O,{children:e.jsx(R,{tag:"div",className:"h5",children:"Purchase Order"})})}),e.jsx(S,{className:"pb-0",children:e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Je,{})})})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(C,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx(q,{children:e.jsx(O,{children:e.jsx(R,{tag:"div",className:"h5",children:"Sale Order"})})}),e.jsx(S,{className:"pb-0",children:e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Ke,{})})})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(C,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx(q,{children:e.jsx(O,{children:e.jsx(R,{tag:"div",className:"h5",children:"Invoice"})})}),e.jsx(S,{className:"pb-0",children:e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Xe,{})})})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(C,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(l,{id:"remarks",label:"Remarks",children:[e.jsx("input",{id:"remarks",className:"form-control "+(a.remarks?"is-invalid":""),...t("remarks"),type:"text",placeholder:"remarks"}),e.jsx(e.Fragment,{children:a.remarks?e.jsx("div",{className:"invalid-feedback",children:a.remarks.message}):""})]})}),e.jsx("div",{className:"col-md-12"})]})}),e.jsx(Q,{children:e.jsx(ye,{children:e.jsx(w,{color:"success",type:"submit",children:"Save"})})})]})]})]})};y.extend(re);y.extend(se);y.extend(ce);y.extend(le);const es=i=>{const t={quotation_id:i.quotation_id,remarks:"",purchase_order:[],sale_order:[],invoice:[]},[a,b]=p.useState(),n=async N=>{const k={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.get(`undefined/tracking_list/quotation/${N}`,k).then(m=>{for(var v=m.data,c=0;c<v.purchase_order.length;c++)v.purchase_order[c].po_date=y.utc(`${v.purchase_order[c].po_date}`).local().format("YYYY-MM-DD");for(var c=0;c<v.sale_order.length;c++)v.sale_order[c].so_date=y.utc(`${v.sale_order[c].so_date}`).local().format("YYYY-MM-DD");for(var c=0;c<v.invoice.length;c++)v.invoice[c].invoice_date=y.utc(`${v.invoice[c].invoice_date}`).local().format("YYYY-MM-DD");b(v)}).catch(m=>{console.log(JSON.stringify(m)),m.status==404&&b(t)})};p.useEffect(()=>{i.quotation_id&&n(i.quotation_id)},[]);const o=async()=>{n(i.quotation_id)};return e.jsx(e.Fragment,{children:a?e.jsx(Ie,{data:a,children:e.jsx(Ze,{tracking_list_id:a.tracking_list_id,quotation_id:a.quotation_id,revision:a.revision,created_by:a.created_by,created_at:a.created_at,refresh_func:o})}):e.jsx(e.Fragment,{})})},ss=i=>{var $;const t=ke(),[a,b]=p.useState(Number(i.variance)),[n,o]=p.useState(i.data[0]);p.useEffect(()=>{if(i.data){const f=i.data.filter(F=>F.variance==a)[0];c(Z[f.status.toUpperCase()])}},[a]);const N="Tracking View",k=($=n==null?void 0:n.status)==null?void 0:$.toUpperCase();var m=Z[k];m==null&&(m=Z.NONE);const[v,c]=p.useState(m),[d,s]=p.useState("Quotation"),D=f=>{t(`../quotation/edit/${n.quotation_revision_id}`,{state:{create_new_variance:f}})},j=async(f,F,z,P)=>{B.get(`undefined/quotation/${f}/pdf/${F}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{with_watermark:`${P}`}}).then(r=>{ie(r.data,z+".pdf")})};return e.jsx(e.Fragment,{children:e.jsxs(Ce,{title:N,children:[e.jsxs(Se,{children:[e.jsxs(De,{children:[e.jsx(w,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>t(-1),children:"Back"}),e.jsx(ve,{}),e.jsx("strong",{className:"fs-5",children:N}),e.jsx(ve,{}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Quotation No: ",n.quotation_no,"    ",e.jsx(pe,{className:"statusBadge",color:v.color,children:v.name})]})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Revision: ",n.revision]})})]})]}),e.jsx(Ae,{children:e.jsx(w,{color:"info",onClick:()=>D(!0),children:"Create New Variation"})})]}),e.jsxs($e,{container:"fluid",children:[e.jsxs(C,{children:[e.jsx(q,{children:e.jsx(O,{children:e.jsx(R,{tag:"div",className:"h3",children:N})})}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(l,{id:"QuotationDate",label:"Quotation Date",isFloating:!0,children:e.jsx(h,{value:n.created_at,disabled:!0})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(l,{id:"client_code",label:"Client Code",isFloating:!0,children:e.jsx(h,{value:n.client_code,disabled:!0})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(l,{id:"client",label:"Client",isFloating:!0,children:e.jsx(h,{value:n.client,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"end_user",label:"End User",isFloating:!0,children:e.jsx(h,{value:n.end_user,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"site_location",label:"Site Location",isFloating:!0,children:e.jsx(h,{value:n.site_location,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"building",label:"Building",isFloating:!0,children:e.jsx(h,{value:n.building,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"pic",label:"PIC",isFloating:!0,children:e.jsx(h,{value:n.pic,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(l,{id:"pic_email",label:"PIC Email",isFloating:!0,children:e.jsx(h,{value:n.pic_email,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"pic_contact_number",label:"PIC Contact No.",isFloating:!0,children:e.jsx(h,{value:n.pic_contact_number,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(l,{id:"project_ref",label:"Project Reference",isFloating:!0,children:e.jsx(h,{value:n.project_reference,disabled:!0})})})]})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsx(C,{children:e.jsxs(S,{children:[e.jsxs(Ye,{design:"pills",children:[e.jsx(G,{isActive:d=="Quotation",children:e.jsxs(_e,{isButtonGroup:!0,children:[e.jsx("div",{className:d=="Quotation"?"btn active nav-link":"btn nav-link",onClick:()=>s("Quotation"),children:a==0?"Quotation":"Variation "+a}),e.jsx(ge,{children:e.jsx(w,{className:d=="Quotation"?"btn active nav-link":"btn nav-link"})}),e.jsx(Ne,{children:i.data.map(f=>e.jsx(X,{onClick:()=>{b(f.variance),s("Quotation")},children:f.variance==0?"Quotation":"Variation "+f.variance}))})]})}),e.jsx(G,{onClick:()=>s("Attachments"),isActive:d=="Attachments",children:e.jsx(w,{children:"Attachments"})}),e.jsx(G,{onClick:()=>s("Revisions"),isActive:d=="Revisions",children:e.jsx(w,{children:"Revisions"})}),e.jsx(G,{onClick:()=>s("TrackingDetails"),isActive:d=="TrackingDetails",children:e.jsx(w,{children:"Tracking Details"})})]}),e.jsx("hr",{}),e.jsx("div",{hidden:d!="Attachments",children:e.jsx(Be,{quotation_id:i.quotation_id,variance:a})},"attachmentsTab"+a),e.jsx("div",{hidden:d!="Revisions",children:e.jsx(Qe,{quotation_id:i.quotation_id,variance:a})},"revisionsTab"+a),e.jsx("div",{hidden:d!="TrackingDetails",children:e.jsx(es,{quotation_id:i.quotation_id})},"trackingDetailsTab"),e.jsxs("div",{hidden:d!="Quotation",children:[e.jsxs("div",{className:"row gt-4",children:[e.jsxs("div",{className:"col-md-6 d-flex",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("span",{children:["Quotation No: ",n.quotation_no,"   "]}),e.jsx(pe,{className:"statusBadge",color:v.color,children:v.name}),"   ",e.jsx("br",{}),e.jsxs("span",{children:["Revision: ",n.revision]})]})}),e.jsxs(_e,{children:[e.jsx(ge,{hasIcon:!1,children:e.jsx(w,{color:"info",isLight:!0,icon:"Download",children:"PDF"})}),e.jsxs(Ne,{children:[e.jsx(X,{children:e.jsx("span",{onClick:()=>j(i.quotation_id,n.quotation_revision_id,n.quotation_no,!1),children:"Customer View"})}),e.jsx(X,{onClick:()=>j(i.quotation_id,n.quotation_revision_id,n.quotation_no,!0),children:"Internal View"})]})]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-end",children:e.jsx(w,{color:"info",className:"order-2 float-end",onClick:()=>D(!1),children:"Create Revision"})})]}),e.jsx("br",{}),e.jsx(Ue,{sections:n.sections})]})]})}),e.jsxs(C,{hidden:d!="Quotation",children:[e.jsx(q,{children:e.jsx(O,{children:e.jsx(R,{tag:"div",className:"h3",children:"Options"})})}),e.jsx(S,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"lead_time",label:"Lead Time",children:e.jsx(h,{value:n.lead_time,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"payment_terms",label:"Payment Terms",children:e.jsx(h,{value:n.payment_terms,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"validity",label:"Validity",children:e.jsx(h,{value:n.validity,disabled:!0})})}),e.jsx("div",{})]})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(C,{hidden:d!="Quotation",children:[e.jsx(q,{children:e.jsx(O,{children:e.jsx(R,{tag:"div",className:"h3",children:"Summary"})})}),e.jsxs(S,{className:"pb-0",children:[e.jsx(e.Fragment,{}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-8",children:e.jsx(l,{id:"reference_status",label:"Reference Status",isFloating:!0,children:e.jsx(h,{value:n.reference_status,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"total",label:"Total",isFloating:!0,children:e.jsx(h,{value:n.total_cost,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(l,{id:"note",label:"Note",isFloating:!0,children:e.jsx(h,{value:n.note,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(l,{id:"g_total",label:"G/Total (RM)",isFloating:!0,children:e.jsx(h,{value:n.grand_total,disabled:!0})})})]})]}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]})]})]})})},ls=()=>{const{quotation_id:i,variance:t}=Te(),[a,b]=p.useState(),n=async o=>{const N={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.get(`undefined/quotation/latest_revisions/${o}`,N).then(k=>{b(k.data.data)})};return p.useEffect(()=>{b(null),i&&n(i)},[i]),e.jsx(e.Fragment,{children:a?e.jsx(ss,{data:a,variance:t,quotation_id:i}):e.jsx(e.Fragment,{})})};export{ls as default};
