import{o as l,p as z,u as y,r,g as D,j as e,P as Q,S as B,b as A,B as x,d as T,a as E,A as p,C as Y,f as R,h as I,i as H,k as M,F as U,I as a,l as V,m as $,n as O}from"./index-CPSQkdLJ.js";import{B as G,Q as b}from"./enumQuotationStatus-CicHlPII.js";import{P as W,u as J,d as K,a as X}from"./useSortableData-BBdnxgGM.js";import{u as Z,c as ee,t as se}from"./timezone-C0MXCgqi.js";import"./Select-Dgt6VTOG.js";l.extend(Z);l.extend(z);l.extend(ee);l.extend(se);function te(n){const h=n==null?void 0:n.toUpperCase();var d=b[h];return d==null&&(d=b.NONE),d.color}const le=()=>{const n=y(),[h,d]=r.useState(!1),[j,S]=r.useState([]),[v,u]=r.useState([]),L=async()=>{const s={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};O.get("undefined/quotation/all_quotations_table",s).then(t=>{S(t.data.quotations),u(t.data.quotations)})};r.useEffect(()=>{L()},[]);const[m,f]=r.useState(1),[g,F]=r.useState(W[5]),{items:N,requestSort:o,getClassNamesFor:i}=J(v),C=s=>{const t=s.search.toString().toLowerCase(),P=k(t);s.search?u(P):u(j)},c=D({initialValues:{search:""},onSubmit:C,onReset:()=>u(j)}),k=s=>j.filter(t=>t.prepared_by.toLowerCase().includes(s)||t.client.toLowerCase().includes(s)||l(`${t.quotation_date}`).format("DD-MM-YYYY").includes(s)||t.quotation_no.toLowerCase().includes(s)||t.end_user.toLowerCase().includes(s)||t.revision.toString().toLowerCase().includes(s)||t.quotation_amount.toFixed(2).toString().toLowerCase().includes(s)||t.cost.toFixed(2).toString().toLowerCase().includes(s)||t.margin.toFixed(2).toString().toLowerCase().includes(s)||t.status.toLowerCase().includes(s)||t.site_location.toLowerCase().includes(s)||t.building.toLowerCase().includes(s)),w=s=>{n(`view/${s}`)},_=s=>{n(`edit/${s}`)},q=()=>{n("create")};return e.jsxs(Q,{title:"Quotation",children:[e.jsx(B,{children:e.jsxs(A,{children:[e.jsx(x,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>n(-1),children:"Back"}),e.jsx(T,{}),e.jsx("strong",{className:"fs-5",children:"Quotation"})]})}),e.jsxs(E,{container:"fluid",children:[h&&e.jsx(p,{color:"success",isLight:!0,icon:"Create",isDismissible:!0,children:"Create Success"}),e.jsxs(Y,{stretch:!0,children:[e.jsx(R,{className:"table-responsive",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(I,{children:e.jsx(H,{children:e.jsx(M,{tag:"div",className:"h3",children:"Quotation"})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{color:"light",isLight:!0,children:e.jsx("form",{onSubmit:c.handleSubmit,children:e.jsx(U,{children:e.jsxs("div",{className:"d-flex","data-tour":"search",children:[e.jsx("label",{className:"border-0 bg-transparent",children:e.jsx(a,{icon:"Search",size:"2x",color:"primary"})}),e.jsx(V,{id:"search",placeholder:"Search...",className:"border-0 shadow-none bg-transparent",onChange:s=>{c.handleChange(s),s.target.value.length>2&&$(()=>C({...c.values,search:s.target.value}),1e3)(),s.target.value.length===0&&c.resetForm()},value:c.values.search})]})})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(x,{color:"success",className:"float-end",icon:"Create",tag:"a",onClick:()=>q(),children:"Create"})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("table",{className:"table table-modern",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No."}),e.jsxs("th",{onClick:()=>o("created_by"),className:"cursor-pointer text-decoration-underline",children:["Prepared By",e.jsx(a,{size:"lg",className:i("created_by"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("client"),className:"cursor-pointer text-decoration-underline",children:["Client",e.jsx(a,{size:"lg",className:i("client"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("quotation_date"),className:"cursor-pointer text-decoration-underline",children:["Quotation Date",e.jsx(a,{size:"lg",className:i("quotation_date"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("quotation_no"),className:"cursor-pointer text-decoration-underline",children:["Quotation No.",e.jsx(a,{size:"lg",className:i("quotation_no"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("end_user"),className:"cursor-pointer text-decoration-underline",children:["End User",e.jsx(a,{size:"lg",className:i("end_user"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("revision"),className:"cursor-pointer text-decoration-underline",children:["Revision",e.jsx(a,{size:"lg",className:i("revision"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("quotation_amount"),className:"cursor-pointer text-decoration-underline",children:["Quotation Amount",e.jsx(a,{size:"lg",className:i("quotation_amount"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("cost"),className:"cursor-pointer text-decoration-underline",children:["Cost",e.jsx(a,{size:"lg",className:i("cost"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("margin"),className:"cursor-pointer text-decoration-underline",children:["Margin",e.jsx(a,{size:"lg",className:i("margin"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("status"),className:"cursor-pointer text-decoration-underline",children:["Status",e.jsx(a,{size:"lg",className:i("status"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("site_location"),className:"cursor-pointer text-decoration-underline",children:["Site Location",e.jsx(a,{size:"lg",className:i("site_location"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>o("building"),className:"cursor-pointer text-decoration-underline",children:["Building",e.jsx(a,{size:"lg",className:i("building"),icon:"FilterList"})]}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:K(N,m,g).map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:t+1}),e.jsx("td",{children:s.prepared_by}),e.jsx("td",{children:s.client}),e.jsx("td",{children:l.utc(`${s.quotation_date}`).local().format("DD-MM-YYYY HH:mm:ss")}),e.jsx("td",{children:s.quotation_no}),e.jsx("td",{children:s.end_user}),e.jsx("td",{children:s.revision}),e.jsx("td",{children:s.quotation_amount.toFixed(2)}),e.jsx("td",{children:s.cost.toFixed(2)}),e.jsx("td",{children:s.margin.toFixed(2)}),e.jsx("td",{children:e.jsx(G,{className:"statusBadge",color:te(s.status),children:e.jsx("h6",{children:s.status})})}),e.jsx("td",{children:s.site_location}),e.jsx("td",{children:s.building}),e.jsx("td",{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-auto",children:e.jsx(x,{color:"primary",icon:"RemoveRedEye",shadow:"none",hoverShadow:"lg",tag:"a",onClick:()=>w(s.quotation_rev_id)})}),e.jsx("div",{className:"col-auto",children:e.jsx(x,{color:"primary",icon:"Edit",shadow:"none",hoverShadow:"lg",tag:"a",onClick:()=>_(s.quotation_rev_id)})})]})})]},s.id))})]})})]})}),e.jsx(X,{data:N,label:"items",setCurrentPage:f,currentPage:m,perPage:g,setPerPage:F})]})]})]})};export{le as default};
