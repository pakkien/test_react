import{j as e,r as y,C as W,h as $e,i as ye,k as we,f as Y,I as ii,G as oi,M as ni,B as w,t as ti,n as E,o as ci,p as bt,u as _t,q as xt,F as h,v as vt,N as mi,O as hi,Q as ui,R as ai,P as pt,S as $t,b as yt,d as dt,e as wt,a as kt,X as mt,s as Ft}from"./index-CwoEAzsp.js";import{z as o,F as Ct,u as St,t as Mt,b as qt,p as ht,c as Dt,P as At,f as ji,d as _i,A as xi,a as vi,N as Vt,e as ri}from"./Progress-RHUmiDqV.js";import{Q as Z,B as ut}from"./enumQuotationStatus-Ruw5UFAO.js";import{u as Pt,c as Rt,t as Lt}from"./timezone-Dkq_CJ-J.js";import{b as gt,d as xe,c as ke,a as Fe,e as ft,f as Nt,g as zt}from"./calculations-CG2cx_7e.js";const Tt=o.object({product_description:o.string().min(3),brand:o.string(),model:o.string(),remarks:o.string(),quantity:o.coerce.number().int().min(0),unit:o.string(),unit_cost:o.coerce.number().min(0),total_cost:o.coerce.number().min(0),margin:o.coerce.number(),margin_percentage:o.coerce.number(),estimated_cost:o.boolean(),unit_price:o.coerce.number().min(0),total_price:o.coerce.number().min(0),order:o.number()}),Et=o.object({product_description:o.string().min(3),brand:o.string(),model:o.string(),remarks:o.string(),quantity:o.coerce.number().int().min(0),unit:o.string(),unit_cost:o.coerce.number().min(0),total_cost:o.coerce.number().min(0),margin:o.coerce.number(),margin_percentage:o.coerce.number(),estimated_cost:o.boolean(),unit_price:o.coerce.number().min(0),total_price:o.coerce.number().min(0),order:o.number(),sub_items:o.array(Tt)}),Bt=o.object({name:o.string().min(3),order:o.number(),items:o.array(Et).min(1,{message:"must contain at least one item."}),is_section_valid:o.boolean()}),Qt=o.object({client:o.string().min(3),client_code:o.string().min(3),end_user:o.string().min(3),site_location:o.string().min(3),building:o.string().min(3),pic:o.string().min(3),pic_email:o.string().email(),pic_contact_number:o.string().min(3),project_reference:o.string(),status:o.string().min(3),reference_status:o.string(),note:o.string(),total_cost:o.coerce.number().min(0),grand_total:o.coerce.number().min(0),sst:o.coerce.number().min(0).max(100),discount:o.coerce.number().min(0),sections:o.array(Bt).min(0),lead_time:o.string().min(0),payment_terms:o.string().min(0),validity:o.string().min(0)}),Ut=t=>St({mode:"onChange",resolver:Mt(Qt),defaultValues:{client:t.data.client,client_code:t.data.client_code,end_user:t.data.end_user,site_location:t.data.site_location,building:t.data.building,pic:t.data.pic,pic_email:t.data.pic_email,pic_contact_number:t.data.pic_contact_number,project_reference:t.data.project_reference,status:t.data.status,sections:t.data.sections.sort((s,i)=>s.order<i.order?-1:s.order>i.order?1:0),reference_status:t.data.reference_status,note:t.data.note,total_cost:t.data.total_cost,grand_total:t.data.grand_total,sst:t.data.sst,discount:t.data.discount,lead_time:t.data.lead_time,payment_terms:t.data.payment_terms,validity:t.data.validity}}),ea=t=>{const s=Ut(t);return e.jsx(Ct,{...s,children:t.children})},li=()=>qt(),di=10,Ot=t=>{const[s,i]=y.useState([]),v=async n=>{const j={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};E.get(`undefined/quotation/${n}/attachments`,j).then(x=>{i(x.data.attachments)})};y.useEffect(()=>{t.quotation_rev_id&&v(t.quotation_rev_id)},[]);const _=async(n,j)=>{E.get(`undefined/quotation/attachment/${n}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(x=>{ji(x.data,j)})},d=n=>{let j=s.filter(x=>x.id!=n);i(j)},[r,N]=y.useState([]),[m,g]=y.useState([]),[F,u]=y.useState(!1),p=async n=>{var j=new FormData;j.append("file",n);var x={onUploadProgress:function($){const q=$.total&&$.loaded?Math.round($.loaded*100/$.total):0;N(C=>{const D=[...C];return D.map(L=>L.name==n.name?L.upload_percent=q:null),D})},headers:{Authorization:`${localStorage.getItem("bts_token")}`}};E.post("undefined/quotation/attachment",j,x).then(function($){const q=$.data.attachment_id;N(C=>{const D=[...C];return D.map(L=>L.name==n.name?L.upload_id=q:null),D})}).catch(function($){N(q=>{const C=[...q];return C.map(D=>D.name==n.name?D.upload_error="Error":null),C})})},a=y.useCallback((n,j)=>{n!=null&&n.length&&(N(x=>[...x,...n.map($=>Object.assign($,{preview:ht,upload_percent:0,upload_id:"",upload_error:""}))]),n.map(x=>p(x))),j!=null&&j.length&&g(x=>[...x,...j])},[]),{getRootProps:c,getInputProps:b,isDragActive:M}=Dt({accept:{"application/*":[".pdf"]},maxSize:1024*1500,maxFiles:di-r.length,disabled:F,onDrop:a});y.useEffect(()=>()=>r.forEach(n=>URL.revokeObjectURL(n.preview)),[r]),y.useEffect(()=>{let j=r.filter($=>$.upload_percent==100&&$.upload_id&&!$.upload_error).map($=>$.upload_id),x=s.map($=>$.id);t.setAttachmentIds([...j,...x])},[r,s]),y.useEffect(()=>{r.length+s.length>=di?u(!0):u(!1)},[r.length+s.length]);const k=n=>{N(j=>j.filter(x=>x.name!==n))},z=n=>{g(j=>j.filter(({file:x})=>x.name!==n))},T=()=>{N([]),g([])};function V(n,j=2){if(!+n)return"0 Bytes";const x=1024,$=j<0?0:j,q=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],C=Math.floor(Math.log(n)/Math.log(x));return`${parseFloat((n/Math.pow(x,C)).toFixed($))} ${q[C]}`}return e.jsxs(W,{children:[e.jsx($e,{children:e.jsx(ye,{children:e.jsxs(we,{tag:"div",className:"h3",children:["Upload PDF"," ",r!=null&&r.length||s!=null&&s.length?" - "+((r==null?void 0:r.length)+(s==null?void 0:s.length))+"/"+di:""]})})}),e.jsx(Y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4 ",children:[e.jsxs("div",{hidden:F||t.isViewMode,...c({className:t.className}),children:[e.jsx("input",{...b()}),e.jsx("div",{className:"border border-2 border-light border d-flex justify-content-center align-items-center",style:{height:150},children:e.jsxs("p",{className:"lead",children:[e.jsx(ii,{icon:"Upload",size:"2x"}),M?"Drop the files here ...":"Drag & drop files here, or click to select files"]})})]}),s.map(n=>{var j;return e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(W,{borderColor:"success",className:"shadow-none border border-2 rounded-2",children:e.jsx(Y,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:oi("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:ht,alt:n.filename,width:50})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},onClick:()=>_(n.id,n.filename),children:e.jsx(ni,{title:n.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:n.filename})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:(j=n.filename.split(".").pop())==null?void 0:j.toUpperCase()})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:V(n.size)})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>d(n.id),hidden:t.isViewMode})})})})]})})})})},n.id)}),r.map(n=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(W,{borderColor:n.upload_error?"danger":n.upload_percent!=100?"info":"success",className:"shadow-none border border-2 rounded-2",children:e.jsx(Y,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:oi("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:n.preview,alt:n.name,width:50,onLoad:()=>{URL.revokeObjectURL(n.preview)}})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(ni,{title:n.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:n.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:n.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:V(n.size)})}),e.jsx("div",{className:"col-12",children:n.upload_error?e.jsx("div",{className:"text-danger",children:n.upload_error}):n.upload_percent!=100?e.jsx(At,{isAnimated:!0,value:n.upload_percent,max:100,color:"success",height:"0.5rem"}):e.jsxs("div",{className:"text-success",children:[e.jsx(ii,{icon:"Check",size:"lg",color:"success"})," ","Uploaded"]})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>k(n.name)})})})})]})})})})},n.name)),m.map(({file:n,errors:j})=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(W,{borderColor:"danger",className:"shadow-none border border-2 rounded-2",children:e.jsx(Y,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:oi("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx(ii,{icon:"ErrorOutline",size:"4x",color:"danger"})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(ni,{title:n.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:n.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:n.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:V(n.size)})}),e.jsx("div",{className:"col-12",children:j.map(x=>e.jsx("div",{className:"text-danger",children:x.message}))})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>z(n.name)})})})})]})})})})})),e.jsx("div",{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",hidden:!(r.length>0||m.length>0),onClick:T,isLight:!0,children:"Remove all files"})})]})}),e.jsx(ti,{children:e.jsx(e.Fragment,{})})]})};ci.extend(Pt);ci.extend(bt);ci.extend(Rt);ci.extend(Lt);const Jt=t=>{_t();const[s,i]=y.useState([]),v=async(d,r)=>{const N={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${r}`}};E.get(`undefined/quotation/revisions/${d}`,N).then(m=>{i(m.data.data)})};y.useEffect(()=>{v(t.quotation_id,t.variance)},[]);const _=d=>ci.utc(d).local().format("YYYY-MMM-DD HH:mm:ss");return e.jsx(e.Fragment,{children:s.map(d=>e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/quotation/view/"+d.quotation_revision_id,target:"_blank",children:["Revision ",d.revision]},d.quotation_revision_id)," - Created at: ",_(d.created_at),e.jsx("br",{})]}))})},Ht=t=>{const[s,i]=y.useState([]),[v,_]=y.useState([]),d=async(m,g)=>{const F={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${g}`}};E.get(`undefined/quotation/revisions/${m}`,F).then(u=>{i(u.data.data)})};y.useEffect(()=>{d(t.quotation_id,t.variance),s.map(m=>r(m.quotation_revision_id))},[s.length]);const r=async m=>{const g={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};E.get(`undefined/quotation/${m}/attachments`,g).then(F=>{if(F.data.attachments){const u=Object.assign({data:s.filter(p=>p.quotation_revision_id==m)[0],attachment_list:F.data.attachments});v==null||v.push(u)}})},N=async(m,g)=>{E.get(`undefined/quotation/attachment/${m}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(F=>{ji(F.data,g)})};return e.jsx(e.Fragment,{children:v.map(m=>e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/quotation/view/"+m.data.quotation_revision_id,target:"_blank",children:["Revision ",m.data.revision]}),e.jsx("br",{}),m.attachment_list&&m.attachment_list.map(g=>e.jsxs("li",{children:[e.jsx("span",{onClick:()=>N(g.id,g.filename),children:e.jsx(ni,{title:g.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:g.filename})})}),e.jsx("br",{})]},g.id))]}))})},Gt=t=>{const s=t.itemIndex,i=t.sectionIndex,{register:v,control:_,formState:{errors:d},setValue:r,watch:N}=li(),m=N(),{append:g,remove:F,fields:u}=_i({name:`sections.${i}.items.${s}.sub_items`,control:_}),p=()=>{g({product_description:"",brand:"",model:"",remarks:"",quantity:0,unit:"",unit_cost:0,total_cost:0,margin:0,margin_percentage:0,estimated_cost:!1,unit_price:0,total_price:0,order:0})};return y.useEffect(()=>{m.sections[i].items[s].sub_items.map((a,c)=>{r(`sections.${i}.items.${s}.sub_items.${c}.total_cost`,gt(a.unit_cost,a.quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,xe(a.unit_price,a.quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.margin`,ke(a.unit_cost,a.unit_price)),r(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`,Fe(a.unit_cost,a.unit_price))})},[JSON.stringify(m.sections[i].items[s].sub_items.map(a=>a.quantity+a.unit_cost))]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-md-12",hidden:!!(t.isViewMode||u.length>0),children:[e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:p,className:"float-end",children:"Add Sub Item"}),e.jsx("br",{}),e.jsx("br",{})]}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(xi,{id:"SubItemAccordion",color:"dark",activeItemId:"SubItemAccordionItem_"+s,children:e.jsx(vi,{id:"SubItemAccordionItem_"+s,title:"Sub Items",children:u.map((a,c)=>{var b,M,k,z,T,V,n,j,x,$,q,C,D,L,I,ve,P,X,ee,se,ge,K,fe,Ne,be,ie,te,ae,ce,l,f,S,A,R,Ce,Se,Me,qe,De,Ae,Ve,Pe,Re,Le,ze,Te,Ee,Be,Qe,Ue,Oe,Je,He,Ge,We,Ye,Xe,Ke,Ze,Ie,es,ss,is,ts,as,cs,ns,ls,os,rs,ds,ms,hs,us,js,_s,xs,vs,gs,fs,Ns,bs,ps,$s,ys,ws,ks,Fs,Cs,Ss,Ms,qs,Ds,As,Vs,Ps,Rs,Ls,zs,Ts,Es,Bs,Qs,Us,Os,Js,Hs,Gs,Ws,Ys,Xs,Ks,G,B,Q,U,O,J,H,ne,le,oe,re,gi,fi,Ni,bi,pi,$i,yi,wi,ki,Fi,Ci,Si,Mi,qi,Di,Ai,Vi,Pi,Ri,Li,zi,Ti,Ei,Bi,Qi,Ui,Oi,Ji,Hi,Gi,Wi,Yi,Xi,Ki,Zi,Ii,et,st,it,tt,at,ct,nt,lt,ot,rt;return e.jsxs(W,{shadow:"none",borderColor:"light",borderSize:1,children:[e.jsxs($e,{children:[e.jsx(ye,{children:e.jsxs(we,{tag:"div",className:"h3",children:[t.sectionMode==!0?`${i+1}.${s+1}.${c+1}  Sub Item ${c+1}`:`${i+1}.${c+1}   Sub Item ${c+1}`,"  "]})}),e.jsx(xt,{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",hidden:t.isViewMode,onClick:()=>{F(c)},children:"Delete Sub Item"})})]}),e.jsx(Y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs(h,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:[e.jsx("input",{id:"product_desc",className:"form-control "+((V=(T=(z=(k=(M=(b=d.sections)==null?void 0:b[i])==null?void 0:M.items)==null?void 0:k[s])==null?void 0:z.sub_items)==null?void 0:T[c])!=null&&V.product_description?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.product_description`),type:"text",placeholder:"product_desc",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(D=(C=(q=($=(x=(j=(n=d.sections)==null?void 0:n[i])==null?void 0:j.items)==null?void 0:x[s])==null?void 0:$.sub_items)==null?void 0:q[c])==null?void 0:C.product_description)==null?void 0:D.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"brand",label:"Brand",isFloating:!0,children:[e.jsx("input",{id:"brand",className:"form-control "+((ee=(X=(P=(ve=(I=(L=d.sections)==null?void 0:L[i])==null?void 0:I.items)==null?void 0:ve[s])==null?void 0:P.sub_items)==null?void 0:X[c])!=null&&ee.brand?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.brand`),type:"text",placeholder:"brand",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(ie=(be=(Ne=(fe=(K=(ge=(se=d.sections)==null?void 0:se[i])==null?void 0:ge.items)==null?void 0:K[s])==null?void 0:fe.sub_items)==null?void 0:Ne[c])==null?void 0:be.brand)==null?void 0:ie.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"model",label:"Model",isFloating:!0,children:[e.jsx("input",{id:"model",className:"form-control "+((S=(f=(l=(ce=(ae=(te=d.sections)==null?void 0:te[i])==null?void 0:ae.items)==null?void 0:ce[s])==null?void 0:l.sub_items)==null?void 0:f[c])!=null&&S.model?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.model`),type:"text",placeholder:"model",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(De=(qe=(Me=(Se=(Ce=(R=(A=d.sections)==null?void 0:A[i])==null?void 0:R.items)==null?void 0:Ce[s])==null?void 0:Se.sub_items)==null?void 0:Me[c])==null?void 0:qe.model)==null?void 0:De.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"remarks",label:"Remarks",isFloating:!0,children:[e.jsx("input",{id:"remarks",className:"form-control "+((ze=(Le=(Re=(Pe=(Ve=(Ae=d.sections)==null?void 0:Ae[i])==null?void 0:Ve.items)==null?void 0:Pe[s])==null?void 0:Re.sub_items)==null?void 0:Le[c])!=null&&ze.remarks?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.remarks`),type:"text",placeholder:"remarks",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Je=(Oe=(Ue=(Qe=(Be=(Ee=(Te=d.sections)==null?void 0:Te[i])==null?void 0:Ee.items)==null?void 0:Be[s])==null?void 0:Qe.sub_items)==null?void 0:Ue[c])==null?void 0:Oe.remarks)==null?void 0:Je.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"quantity",label:"Quantity",isFloating:!0,children:[e.jsx("input",{id:"quantity",className:"form-control "+((Ke=(Xe=(Ye=(We=(Ge=(He=d.sections)==null?void 0:He[i])==null?void 0:Ge.items)==null?void 0:We[s])==null?void 0:Ye.sub_items)==null?void 0:Xe[c])!=null&&Ke.quantity?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.quantity`),type:"text",placeholder:"quantity",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(as=(ts=(is=(ss=(es=(Ie=(Ze=d.sections)==null?void 0:Ze[i])==null?void 0:Ie.items)==null?void 0:es[s])==null?void 0:ss.sub_items)==null?void 0:is[c])==null?void 0:ts.quantity)==null?void 0:as.message})]})}),e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"unit",label:"Unit",isFloating:!0,children:[e.jsx("input",{id:"unit",className:"form-control "+((ds=(rs=(os=(ls=(ns=(cs=d.sections)==null?void 0:cs[i])==null?void 0:ns.items)==null?void 0:ls[s])==null?void 0:os.sub_items)==null?void 0:rs[c])!=null&&ds.unit?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.unit`),type:"text",placeholder:"unit",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(vs=(xs=(_s=(js=(us=(hs=(ms=d.sections)==null?void 0:ms[i])==null?void 0:hs.items)==null?void 0:us[s])==null?void 0:js.sub_items)==null?void 0:_s[c])==null?void 0:xs.unit)==null?void 0:vs.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:[e.jsx("input",{id:"unit_cost",className:"form-control "+(($s=(ps=(bs=(Ns=(fs=(gs=d.sections)==null?void 0:gs[i])==null?void 0:fs.items)==null?void 0:Ns[s])==null?void 0:bs.sub_items)==null?void 0:ps[c])!=null&&$s.unit_cost?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.unit_cost`),type:"text",placeholder:"unit_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Ms=(Ss=(Cs=(Fs=(ks=(ws=(ys=d.sections)==null?void 0:ys[i])==null?void 0:ws.items)==null?void 0:ks[s])==null?void 0:Fs.sub_items)==null?void 0:Cs[c])==null?void 0:Ss.unit_cost)==null?void 0:Ms.message})]})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsxs(h,{id:"estimated_cost",label:"Estimated Cost",className:"form-check form-check-inline",children:[e.jsx("input",{id:"estimated_cost",className:"form-check-input "+((Rs=(Ps=(Vs=(As=(Ds=(qs=d.sections)==null?void 0:qs[i])==null?void 0:Ds.items)==null?void 0:As[s])==null?void 0:Vs.sub_items)==null?void 0:Ps[c])!=null&&Rs.estimated_cost?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.estimated_cost`),type:"checkbox",placeholder:"estimated_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Us=(Qs=(Bs=(Es=(Ts=(zs=(Ls=d.sections)==null?void 0:Ls[i])==null?void 0:zs.items)==null?void 0:Ts[s])==null?void 0:Es.sub_items)==null?void 0:Bs[c])==null?void 0:Qs.estimated_cost)==null?void 0:Us.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_cost",label:"Total Cost",isFloating:!0,children:[e.jsx("input",{id:"total_cost",className:"form-control "+((Ys=(Ws=(Gs=(Hs=(Js=(Os=d.sections)==null?void 0:Os[i])==null?void 0:Js.items)==null?void 0:Hs[s])==null?void 0:Gs.sub_items)==null?void 0:Ws[c])!=null&&Ys.total_cost?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.total_cost`),type:"text",placeholder:"total_cost",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(O=(U=(Q=(B=(G=(Ks=(Xs=d.sections)==null?void 0:Xs[i])==null?void 0:Ks.items)==null?void 0:G[s])==null?void 0:B.sub_items)==null?void 0:Q[c])==null?void 0:U.total_cost)==null?void 0:O.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"margin",label:"Margin",isFloating:!0,children:[e.jsx("input",{id:"margin",className:"form-control "+((re=(oe=(le=(ne=(H=(J=d.sections)==null?void 0:J[i])==null?void 0:H.items)==null?void 0:ne[s])==null?void 0:le.sub_items)==null?void 0:oe[c])!=null&&re.margin?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.margin`),type:"text",placeholder:"margin",disabled:t.isViewMode,onChange:pe=>{var de,me,he,ue,je,_e,Zs,Is,ei,si;r(`sections.${i}.items.${s}.sub_items.${c}.unit_price`,ft((me=(de=m.sections)==null?void 0:de[i])==null?void 0:me.items[s].sub_items[c].unit_cost,parseFloat(pe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,xe((ue=(he=m.sections)==null?void 0:he[i])==null?void 0:ue.items[s].sub_items[c].unit_price,(_e=(je=m.sections)==null?void 0:je[i])==null?void 0:_e.items[s].sub_items[c].quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`,Fe((Is=(Zs=m.sections)==null?void 0:Zs[i])==null?void 0:Is.items[s].sub_items[c].unit_cost,(si=(ei=m.sections)==null?void 0:ei[i])==null?void 0:si.items[s].sub_items[c].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(yi=($i=(pi=(bi=(Ni=(fi=(gi=d.sections)==null?void 0:gi[i])==null?void 0:fi.items)==null?void 0:Ni[s])==null?void 0:bi.sub_items)==null?void 0:pi[c])==null?void 0:$i.margin)==null?void 0:yi.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:[e.jsx("input",{id:"margin_percentage",className:"form-control "+((Mi=(Si=(Ci=(Fi=(ki=(wi=d.sections)==null?void 0:wi[i])==null?void 0:ki.items)==null?void 0:Fi[s])==null?void 0:Ci.sub_items)==null?void 0:Si[c])!=null&&Mi.margin_percentage?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`),type:"text",placeholder:"margin_percentage",disabled:t.isViewMode,onChange:pe=>{var de,me,he,ue,je,_e,Zs,Is,ei,si;r(`sections.${i}.items.${s}.sub_items.${c}.unit_price`,Nt((me=(de=m.sections)==null?void 0:de[i])==null?void 0:me.items[s].sub_items[c].unit_cost,parseFloat(pe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,xe((ue=(he=m.sections)==null?void 0:he[i])==null?void 0:ue.items[s].sub_items[c].unit_price,(_e=(je=m.sections)==null?void 0:je[i])==null?void 0:_e.items[s].sub_items[c].quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.margin`,ke((Is=(Zs=m.sections)==null?void 0:Zs[i])==null?void 0:Is.items[s].sub_items[c].unit_cost,(si=(ei=m.sections)==null?void 0:ei[i])==null?void 0:si.items[s].sub_items[c].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(Li=(Ri=(Pi=(Vi=(Ai=(Di=(qi=d.sections)==null?void 0:qi[i])==null?void 0:Di.items)==null?void 0:Ai[s])==null?void 0:Vi.sub_items)==null?void 0:Pi[c])==null?void 0:Ri.margin_percentage)==null?void 0:Li.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"unit_price",className:"form-control "+((Ui=(Qi=(Bi=(Ei=(Ti=(zi=d.sections)==null?void 0:zi[i])==null?void 0:Ti.items)==null?void 0:Ei[s])==null?void 0:Bi.sub_items)==null?void 0:Qi[c])!=null&&Ui.unit_price?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.unit_price`),type:"text",placeholder:"unit_price",disabled:t.isViewMode,onChange:pe=>{var de,me,he,ue,je,_e;r(`sections.${i}.items.${s}.sub_items.${c}.margin`,ke((me=(de=m.sections)==null?void 0:de[i])==null?void 0:me.items[s].sub_items[c].unit_cost,parseFloat(pe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`,Fe((ue=(he=m.sections)==null?void 0:he[i])==null?void 0:ue.items[s].sub_items[c].unit_cost,parseFloat(pe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,xe(parseFloat(pe.target.value),(_e=(je=m.sections)==null?void 0:je[i])==null?void 0:_e.items[s].sub_items[c].quantity))}}),e.jsx("div",{className:"invalid-feedback",children:(Xi=(Yi=(Wi=(Gi=(Hi=(Ji=(Oi=d.sections)==null?void 0:Oi[i])==null?void 0:Ji.items)==null?void 0:Hi[s])==null?void 0:Gi.sub_items)==null?void 0:Wi[c])==null?void 0:Yi.unit_price)==null?void 0:Xi.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"total_price",className:"form-control "+((it=(st=(et=(Ii=(Zi=(Ki=d.sections)==null?void 0:Ki[i])==null?void 0:Zi.items)==null?void 0:Ii[s])==null?void 0:et.sub_items)==null?void 0:st[c])!=null&&it.total_price?"is-invalid":""),...v(`sections.${i}.items.${s}.sub_items.${c}.total_price`),type:"text",placeholder:"total_price",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(rt=(ot=(lt=(nt=(ct=(at=(tt=d.sections)==null?void 0:tt[i])==null?void 0:at.items)==null?void 0:ct[s])==null?void 0:nt.sub_items)==null?void 0:lt[c])==null?void 0:ot.total_price)==null?void 0:rt.message})]})}),e.jsx("div",{className:"col-md-12"})]})}),e.jsx(ti,{children:e.jsx(vt,{children:e.jsx(w,{color:"info",icon:"Add",tag:"a",hidden:t.isViewMode,onClick:p,children:"Add Sub-Item"})})})]},a.id)})})}),e.jsx("br",{})]})]})},jt=t=>{const s=t.sectionIndex,{register:i,control:v,formState:{errors:_},watch:d,setValue:r}=li(),N=d(),{append:m,remove:g,fields:F}=_i({name:`sections.${s}.items`,control:v}),u=()=>{m({product_description:"",brand:"",model:"",remarks:"",quantity:0,unit:"",unit_cost:0,total_cost:0,margin:0,margin_percentage:0,estimated_cost:!1,unit_price:0,total_price:0,order:0,sub_items:[]})};return y.useEffect(()=>{N.sections[s].items.map((p,a)=>{r(`sections.${s}.items.${a}.total_cost`,gt(p.unit_cost,p.quantity)),r(`sections.${s}.items.${a}.total_price`,xe(p.unit_price,p.quantity)),r(`sections.${s}.items.${a}.margin`,ke(p.unit_cost,p.unit_price)),r(`sections.${s}.items.${a}.margin_percentage`,Fe(p.unit_cost,p.unit_price))})},[JSON.stringify(N.sections[s].items.map(p=>p.quantity+p.unit_cost))]),F.sort((p,a)=>p.order<a.order?-1:p.order>a.order?1:0),e.jsx("div",{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"row g-4",children:F.map((p,a)=>{var c,b,M,k,z,T,V,n,j,x,$,q,C,D,L,I,ve,P,X,ee,se,ge,K,fe,Ne,be,ie,te,ae,ce,l,f,S,A,R,Ce,Se,Me,qe,De,Ae,Ve,Pe,Re,Le,ze,Te,Ee,Be,Qe,Ue,Oe,Je,He,Ge,We,Ye,Xe,Ke,Ze,Ie,es,ss,is,ts,as,cs,ns,ls,os,rs,ds,ms,hs,us,js,_s,xs,vs,gs,fs,Ns,bs,ps,$s,ys,ws,ks,Fs,Cs,Ss,Ms,qs,Ds,As,Vs,Ps,Rs,Ls,zs,Ts,Es,Bs,Qs,Us,Os,Js,Hs,Gs,Ws,Ys,Xs,Ks;return e.jsx("div",{className:"col-xl-12",children:e.jsx(xi,{id:"ItemAccordion",color:"dark",activeItemId:"ItemAccordionItem_"+a,children:e.jsxs(vi,{id:"ItemAccordionItem_"+a,title:t.sectionMode?`${s+1}.${a+1} Item ${a+1}`:`${s+1}.0 Item ${a+1}`,children:[e.jsxs(W,{id:"#item_card_id#"+a,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs($e,{children:[e.jsx(ye,{children:e.jsxs(we,{tag:"div",className:"h3",children:["Item ",a+1,"  "]})}),e.jsx(xt,{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",hidden:t.isViewMode,onClick:()=>{g(a)},children:"Delete Item"})})]}),e.jsx(Y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs(h,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:[e.jsx("input",{id:"product_desc",className:"form-control "+((k=(M=(b=(c=_.sections)==null?void 0:c[s])==null?void 0:b.items)==null?void 0:M[a])!=null&&k.product_description?"is-invalid":""),...i(`sections.${s}.items.${a}.product_description`),type:"text",placeholder:"product_desc",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(j=(n=(V=(T=(z=_.sections)==null?void 0:z[s])==null?void 0:T.items)==null?void 0:V[a])==null?void 0:n.product_description)==null?void 0:j.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"brand",label:"Brand",isFloating:!0,children:[e.jsx("input",{id:"brand",className:"form-control "+((C=(q=($=(x=_.sections)==null?void 0:x[s])==null?void 0:$.items)==null?void 0:q[a])!=null&&C.brand?"is-invalid":""),...i(`sections.${s}.items.${a}.brand`),type:"text",placeholder:"brand",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(P=(ve=(I=(L=(D=_.sections)==null?void 0:D[s])==null?void 0:L.items)==null?void 0:I[a])==null?void 0:ve.brand)==null?void 0:P.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"model",label:"Model",isFloating:!0,children:[e.jsx("input",{id:"model",className:"form-control "+((ge=(se=(ee=(X=_.sections)==null?void 0:X[s])==null?void 0:ee.items)==null?void 0:se[a])!=null&&ge.model?"is-invalid":""),...i(`sections.${s}.items.${a}.model`),type:"text",placeholder:"model",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(ie=(be=(Ne=(fe=(K=_.sections)==null?void 0:K[s])==null?void 0:fe.items)==null?void 0:Ne[a])==null?void 0:be.model)==null?void 0:ie.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"remarks",label:"Remarks",isFloating:!0,children:[e.jsx("input",{id:"remarks",className:"form-control "+((l=(ce=(ae=(te=_.sections)==null?void 0:te[s])==null?void 0:ae.items)==null?void 0:ce[a])!=null&&l.remarks?"is-invalid":""),...i(`sections.${s}.items.${a}.remarks`),type:"text",placeholder:"remarks",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Ce=(R=(A=(S=(f=_.sections)==null?void 0:f[s])==null?void 0:S.items)==null?void 0:A[a])==null?void 0:R.remarks)==null?void 0:Ce.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"quantity",label:"Quantity",isFloating:!0,children:[e.jsx("input",{id:"quantity",className:"form-control "+((De=(qe=(Me=(Se=_.sections)==null?void 0:Se[s])==null?void 0:Me.items)==null?void 0:qe[a])!=null&&De.quantity?"is-invalid":""),...i(`sections.${s}.items.${a}.quantity`),type:"text",placeholder:"quantity",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Le=(Re=(Pe=(Ve=(Ae=_.sections)==null?void 0:Ae[s])==null?void 0:Ve.items)==null?void 0:Pe[a])==null?void 0:Re.quantity)==null?void 0:Le.message})]})}),e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"unit",label:"Unit",isFloating:!0,children:[e.jsx("input",{id:"unit",className:"form-control "+((Be=(Ee=(Te=(ze=_.sections)==null?void 0:ze[s])==null?void 0:Te.items)==null?void 0:Ee[a])!=null&&Be.unit?"is-invalid":""),...i(`sections.${s}.items.${a}.unit`),type:"text",placeholder:"unit",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(He=(Je=(Oe=(Ue=(Qe=_.sections)==null?void 0:Qe[s])==null?void 0:Ue.items)==null?void 0:Oe[a])==null?void 0:Je.unit)==null?void 0:He.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:[e.jsx("input",{id:"unit_cost",className:"form-control "+((Xe=(Ye=(We=(Ge=_.sections)==null?void 0:Ge[s])==null?void 0:We.items)==null?void 0:Ye[a])!=null&&Xe.unit_cost?"is-invalid":""),...i(`sections.${s}.items.${a}.unit_cost`),type:"text",placeholder:"unit_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(ss=(es=(Ie=(Ze=(Ke=_.sections)==null?void 0:Ke[s])==null?void 0:Ze.items)==null?void 0:Ie[a])==null?void 0:es.unit_cost)==null?void 0:ss.message})]})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsxs(h,{id:"estimated_cost",label:"Estimated Cost",className:"form-check form-check-inline",children:[e.jsx("input",{id:"estimated_cost",className:"form-check-input",...i(`sections.${s}.items.${a}.estimated_cost`),type:"checkbox",placeholder:"estimated_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(ns=(cs=(as=(ts=(is=_.sections)==null?void 0:is[s])==null?void 0:ts.items)==null?void 0:as[a])==null?void 0:cs.estimated_cost)==null?void 0:ns.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_cost",label:"Total Cost",isFloating:!0,children:[e.jsx("input",{id:"total_cost",className:"form-control "+((ds=(rs=(os=(ls=_.sections)==null?void 0:ls[s])==null?void 0:os.items)==null?void 0:rs[a])!=null&&ds.total_cost?"is-invalid":""),...i(`sections.${s}.items.${a}.total_cost`),type:"text",placeholder:"total_cost",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(_s=(js=(us=(hs=(ms=_.sections)==null?void 0:ms[s])==null?void 0:hs.items)==null?void 0:us[a])==null?void 0:js.total_cost)==null?void 0:_s.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"margin",label:"Margin",isFloating:!0,children:[e.jsx("input",{id:"margin",className:"form-control "+((fs=(gs=(vs=(xs=_.sections)==null?void 0:xs[s])==null?void 0:vs.items)==null?void 0:gs[a])!=null&&fs.margin?"is-invalid":""),...i(`sections.${s}.items.${a}.margin`),type:"text",placeholder:"margin",disabled:t.isViewMode,onChange:G=>{var B,Q,U,O,J,H,ne,le,oe,re;r(`sections.${s}.items.${a}.unit_price`,ft((Q=(B=N.sections)==null?void 0:B[s])==null?void 0:Q.items[a].unit_cost,parseFloat(G.target.value))),r(`sections.${s}.items.${a}.total_price`,xe((O=(U=N.sections)==null?void 0:U[s])==null?void 0:O.items[a].unit_price,(H=(J=N.sections)==null?void 0:J[s])==null?void 0:H.items[a].quantity)),r(`sections.${s}.items.${a}.margin_percentage`,Fe((le=(ne=N.sections)==null?void 0:ne[s])==null?void 0:le.items[a].unit_cost,(re=(oe=N.sections)==null?void 0:oe[s])==null?void 0:re.items[a].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(ys=($s=(ps=(bs=(Ns=_.sections)==null?void 0:Ns[s])==null?void 0:bs.items)==null?void 0:ps[a])==null?void 0:$s.margin)==null?void 0:ys.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:[e.jsx("input",{id:"margin_percentage",className:"form-control "+((Cs=(Fs=(ks=(ws=_.sections)==null?void 0:ws[s])==null?void 0:ks.items)==null?void 0:Fs[a])!=null&&Cs.margin_percentage?"is-invalid":""),...i(`sections.${s}.items.${a}.margin_percentage`),type:"text",placeholder:"margin_percentage",disabled:t.isViewMode,onChange:G=>{var B,Q,U,O,J,H,ne,le,oe,re;r(`sections.${s}.items.${a}.unit_price`,Nt((Q=(B=N.sections)==null?void 0:B[s])==null?void 0:Q.items[a].unit_cost,parseFloat(G.target.value))),r(`sections.${s}.items.${a}.total_price`,xe((O=(U=N.sections)==null?void 0:U[s])==null?void 0:O.items[a].unit_price,(H=(J=N.sections)==null?void 0:J[s])==null?void 0:H.items[a].quantity)),r(`sections.${s}.items.${a}.margin`,ke((le=(ne=N.sections)==null?void 0:ne[s])==null?void 0:le.items[a].unit_cost,(re=(oe=N.sections)==null?void 0:oe[s])==null?void 0:re.items[a].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(As=(Ds=(qs=(Ms=(Ss=_.sections)==null?void 0:Ss[s])==null?void 0:Ms.items)==null?void 0:qs[a])==null?void 0:Ds.margin_percentage)==null?void 0:As.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"unit_price",className:"form-control "+((Ls=(Rs=(Ps=(Vs=_.sections)==null?void 0:Vs[s])==null?void 0:Ps.items)==null?void 0:Rs[a])!=null&&Ls.unit_price?"is-invalid":""),...i(`sections.${s}.items.${a}.unit_price`),type:"text",placeholder:"unit_price",disabled:t.isViewMode,onChange:G=>{var B,Q,U,O,J,H;r(`sections.${s}.items.${a}.margin`,ke((Q=(B=N.sections)==null?void 0:B[s])==null?void 0:Q.items[a].unit_cost,parseFloat(G.target.value))),r(`sections.${s}.items.${a}.margin_percentage`,Fe((O=(U=N.sections)==null?void 0:U[s])==null?void 0:O.items[a].unit_cost,parseFloat(G.target.value))),r(`sections.${s}.items.${a}.total_price`,xe(parseFloat(G.target.value),(H=(J=N.sections)==null?void 0:J[s])==null?void 0:H.items[a].quantity))}}),e.jsx("div",{className:"invalid-feedback",children:(Qs=(Bs=(Es=(Ts=(zs=_.sections)==null?void 0:zs[s])==null?void 0:Ts.items)==null?void 0:Es[a])==null?void 0:Bs.unit_price)==null?void 0:Qs.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"total_price",className:"form-control "+((Hs=(Js=(Os=(Us=_.sections)==null?void 0:Us[s])==null?void 0:Os.items)==null?void 0:Js[a])!=null&&Hs.total_price?"is-invalid":""),...i(`sections.${s}.items.${a}.total_price`),type:"text",placeholder:"total_price",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(Ks=(Xs=(Ys=(Ws=(Gs=_.sections)==null?void 0:Gs[s])==null?void 0:Ws.items)==null?void 0:Ys[a])==null?void 0:Xs.total_price)==null?void 0:Ks.message})]})}),e.jsx("div",{className:"col-md-12"})]})})]},p.id),e.jsx("div",{className:"col-md-12",children:e.jsx(Gt,{itemIndex:a,sectionIndex:s,isViewMode:t.isViewMode,sectionMode:t.sectionMode})})]})})})})})}),e.jsx("div",{className:"col-md-12",hidden:t.isViewMode||!t.sectionMode,children:e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:u,className:"float-end",children:"Add Item"})})]})})},Wt=t=>{const{register:s,control:i,formState:{errors:v},watch:_,setValue:d}=li(),r=_(),{append:N,remove:m,fields:g}=_i({name:"sections",control:i}),F=c=>{let b={product_description:"",brand:"",model:"",remarks:"",quantity:0,unit:"",unit_cost:0,total_cost:0,margin:0,margin_percentage:0,estimated_cost:!1,unit_price:0,total_price:0,order:0,sub_items:[]};N({name:"New Section "+(g.length+1),order:0,items:c?[]:[b],is_section_valid:c}),u.push(!0)},[u,p]=y.useState([]),a=(c,b)=>{const M=u;M[c]=b,p(k=>[...M])};return g.sort((c,b)=>c.order<b.order?-1:c.order>b.order?1:0),e.jsx("div",{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"row g-4",children:g.map((c,b)=>{var M,k,z,T,V,n,j,x;return c.is_section_valid?e.jsx("div",{className:"col-xl-12",children:e.jsx(xi,{id:"SectionAccordion",color:"dark",activeItemId:"SectionAccordionItem_"+b,children:e.jsx(vi,{id:"SectionAccordionItem_"+b,title:`${b+1}.0  `+r.sections[b].name,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12",hidden:!!t.isViewMode,children:e.jsxs(mi,{children:[e.jsx(hi,{hasIcon:!1,children:e.jsx(w,{color:"light",isLight:!0,icon:"MoreVert",className:"float-end"})}),e.jsxs(ui,{children:[e.jsx(ai,{children:e.jsx("span",{onClick:()=>a(b,!0),children:"Rename Section"})}),e.jsx(ai,{onClick:()=>{m(b)},children:"Delete Section"})]})]})}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"row",hidden:!u[b],children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(h,{id:"name",label:"Section Name",isFloating:!0,children:[e.jsx("input",{id:"name",className:"form-control "+((k=(M=v.sections)==null?void 0:M[b])!=null&&k.name?"is-invalid":""),...s(`sections.${b}.name`),type:"text",placeholder:"name",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(V=(T=(z=v.sections)==null?void 0:z[b])==null?void 0:T.name)==null?void 0:V.message})]})}),e.jsx("div",{className:"col-md-1 d-flex align-items-center",children:e.jsx(w,{color:"success",icon:"check",rounded:1,isDisable:((x=(j=(n=v.sections)==null?void 0:n[b])==null?void 0:j.name)==null?void 0:x.message)!=null,onClick:()=>a(b,!1)})})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"col-md-12",children:e.jsx(jt,{sectionIndex:b,isViewMode:t.isViewMode,sectionMode:!0})})]})})})}):e.jsx(jt,{sectionIndex:b,isViewMode:t.isViewMode,sectionMode:!1})})})}),e.jsxs("div",{className:"col-md-12",hidden:!!t.isViewMode,children:[e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:()=>{F(!0)},hidden:t.isViewMode,className:"float-end order-2",children:"Add Section"}),e.jsx("div",{className:"order-1 float-end",children:"  "}),e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:()=>{F(!1)},className:"float-end order-0",hidden:t.isViewMode,children:"Add Item"})]}),e.jsx("div",{className:"col-md-12",hidden:!!t.isViewMode,children:e.jsx(w,{color:"danger",tag:"a",onClick:()=>{d("sections",[])},hidden:t.isViewMode,isLight:!0,children:"Reset"})})]})})},sa=t=>{var ie,te,ae,ce;const{register:s,formState:{errors:i,isSubmitting:v},watch:_,handleSubmit:d,setValue:r,control:N}=li(),m=_(),[g,F]=y.useState(t.create_new_variance?t.create_new_variance:!1),u=t.mode.toLowerCase()=="view",p=t.mode.charAt(0).toUpperCase()+t.mode.slice(1).toLowerCase()+" Quotation ",[a,c]=y.useState(!(((ie=t.status)==null?void 0:ie.toLowerCase())==Z.AWARDED.name.toLowerCase()||((te=t.status)==null?void 0:te.toLowerCase())==Z.COMPLETED.name.toLowerCase()||((ae=t.status)==null?void 0:ae.toLowerCase())==Z.REJECTED.name.toLowerCase()));y.useEffect(()=>{g&&c(!0)},[g]);const b=(ce=t.status)==null?void 0:ce.toUpperCase();var M=Z[b];M==null&&(M=Z.NONE);const[k,z]=y.useState(M);y.useEffect(()=>{t.mode=="create"?(r("status","Submitted"),c(!1)):r("status",k.name)},[k]);const[T,V]=y.useState(),n=l=>{V(l)},j=_t(),x=()=>{Ft(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(ii,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Quotation saved"})]}),"Quotation saved successfully")},$=()=>{j("../quotation")},q=l=>{j(`../quotation/edit/${t.quotation_rev_id}`,{state:{create_new_variance:l}})},C={headers:{Authorization:`${localStorage.getItem("bts_token")}`}},D=async l=>{E.post("undefined/quotation/",l,C).then(f=>{x(),$()})},L=async(l,f)=>{E.put(`undefined/quotation/${l}/${g}`,f,C).then(S=>{x(),$()})},I=["","30 Days upon Invoice Date","60 Days upon Invoice Date","Cash on delivery"],ve=["","30 Days from the date of this quotation","60 Days from the date of this quotation","90 Days from the date of this quotation"],[P,X]=y.useState("Quotation");y.useEffect(()=>{var l=0,f=0;for(const S of m.sections)for(const A of S.items){l+=A.total_cost,f+=A.total_price;for(const R of A.sub_items)l+=R.total_cost,f+=R.total_price}r("total_cost",l),f=zt(f,m.discount,m.sst),r("grand_total",f)},[JSON.stringify(m.sections),m.discount,m.sst]);const ee=async(l,f,S,A)=>{E.get(`undefined/quotation/${l}/pdf/${f}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{with_watermark:`${A}`}}).then(R=>{ji(R.data,S+".pdf")})},[se,ge]=y.useState([]),[K,fe]=y.useState([]),Ne=async()=>{const l={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};E.get("undefined/quotation/clients",l).then(f=>{ge(f.data.clients)})},be=async()=>{const l={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};E.get("undefined/quotation/pic",l).then(f=>{fe(f.data.pics)})};return y.useEffect(()=>{Ne(),be()},[]),e.jsxs(pt,{title:p,children:[e.jsxs($t,{children:[e.jsxs(yt,{children:[e.jsx(w,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>j(-1),children:"Back"}),e.jsx(dt,{}),e.jsx("strong",{className:"fs-5",children:p}),(t.mode=="view"||t.mode=="edit")&&e.jsxs(e.Fragment,{children:[e.jsx(dt,{}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Quotation No: ",t.quotation_no,"    ",e.jsx(ut,{className:"statusBadge",color:k.color,children:k.name})]})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Revision: ",t.revision]})})]})]})]}),e.jsxs(wt,{children:[t.mode=="edit"&&e.jsx("div",{children:g?e.jsx(e.Fragment,{}):e.jsx(w,{color:"info",onClick:()=>{F(!g)},isLight:!!g,children:"Create New Variation"})}),t.mode=="view"&&e.jsx("div",{children:e.jsx(w,{color:"info",onClick:()=>q(!0),children:"Create New Variation"})})]})]}),e.jsx(kt,{container:"fluid",children:e.jsxs("form",{onSubmit:d(async l=>{for(var f=0;f<l.sections.length;f++){l.sections[f].order=f+1;for(var S=0;S<l.sections[f].items.length;S++){l.sections[f].is_section_valid?l.sections[f].items[S].order=S+1:l.sections[f].items[S].order=f+1;for(var A=0;A<l.sections[f].items[S].sub_items.length;A++)l.sections[f].items[S].sub_items[A].order=A+1}}const R=Object.assign({attachment_list:T,variance:t.variance},l);t.quotation_id?L(t.quotation_id,R):D(R),console.log("Form submitted (attachment): ",JSON.stringify(R))}),children:[e.jsxs(W,{children:[e.jsx($e,{children:e.jsx(ye,{children:e.jsx(we,{tag:"div",className:"h3",children:p})})}),e.jsx(Y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(h,{id:"client_code",label:"Client Code",isFloating:!0,children:[e.jsx("input",{id:"client_code",className:"form-control "+(i.client_code?"is-invalid":""),...s("client_code"),type:"text",placeholder:"client_code",disabled:u,list:"client_code_list"}),e.jsx("datalist",{id:"client_code_list",children:se.map(l=>e.jsx("option",{value:l.client_code}))}),e.jsx(e.Fragment,{children:i.client_code?e.jsx("div",{className:"invalid-feedback",children:i.client_code.message}):""})]})}),e.jsx("div",{className:"col-md-9",children:e.jsxs(h,{id:"client",label:"Client",isFloating:!0,children:[e.jsx("input",{id:"client",className:"form-control "+(i.client?"is-invalid":""),...s("client"),type:"text",placeholder:"client",disabled:u,list:"client_list"}),e.jsx("datalist",{id:"client_list",children:se.map(l=>e.jsx("option",{value:l.client}))}),e.jsx(e.Fragment,{children:i.client?e.jsx("div",{className:"invalid-feedback",children:i.client.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"end_user",label:"End User",isFloating:!0,children:[e.jsx("input",{id:"end_user",className:"form-control "+(i.end_user?"is-invalid":""),...s("end_user"),type:"text",placeholder:"end_user",disabled:u}),e.jsx(e.Fragment,{children:i.end_user?e.jsx("div",{className:"invalid-feedback",children:i.end_user.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"site_location",label:"Site Location",isFloating:!0,children:[e.jsx("input",{id:"site_location",className:"form-control "+(i.site_location?"is-invalid":""),...s("site_location"),type:"text",placeholder:"site_location",disabled:u}),e.jsx(e.Fragment,{children:i.site_location?e.jsx("div",{className:"invalid-feedback",children:i.site_location.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"building",label:"Building",isFloating:!0,children:[e.jsx("input",{id:"building",className:"form-control "+(i.building?"is-invalid":""),...s("building"),type:"text",placeholder:"building",disabled:u}),e.jsx(e.Fragment,{children:i.building?e.jsx("div",{className:"invalid-feedback",children:i.building.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"pic",label:"PIC",isFloating:!0,children:[e.jsx("input",{id:"pic",className:"form-control "+(i.pic?"is-invalid":""),...s("pic"),type:"text",placeholder:"pic",disabled:u,list:"pic_list"}),e.jsx("datalist",{id:"pic_list",children:K.map(l=>e.jsx("option",{value:l.pic}))}),e.jsx(e.Fragment,{children:i.pic?e.jsx("div",{className:"invalid-feedback",children:i.pic.message}):""})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"pic_email",label:"PIC Email",isFloating:!0,children:[e.jsx("input",{id:"pic_email",className:"form-control "+(i.pic_email?"is-invalid":""),...s("pic_email"),type:"text",placeholder:"pic_email",disabled:u,list:"pic_email_list"}),e.jsx("datalist",{id:"pic_email_list",children:K.map(l=>e.jsx("option",{value:l.email}))}),e.jsx(e.Fragment,{children:i.pic_email?e.jsx("div",{className:"invalid-feedback",children:i.pic_email.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"pic_contact_number",label:"PIC Contact No.",isFloating:!0,children:[e.jsx("input",{id:"pic_contact_number",className:"form-control "+(i.pic_contact_number?"is-invalid":""),...s("pic_contact_number"),type:"text",placeholder:"pic_contact_number",disabled:u,list:"pic_contact_number_list"}),e.jsx("datalist",{id:"pic_contact_number_list",children:K.map(l=>e.jsx("option",{value:l.pic_contact_number}))}),e.jsx(e.Fragment,{children:i.pic_contact_number?e.jsx("div",{className:"invalid-feedback",children:i.pic_contact_number.message}):""})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"project_ref",label:"Project Reference",isFloating:!0,children:[e.jsx("input",{id:"project_ref",className:"form-control "+(i.project_reference?"is-invalid":""),...s("project_reference"),type:"text",placeholder:"project_ref",disabled:u}),e.jsx(e.Fragment,{children:i.project_reference?e.jsx("div",{className:"invalid-feedback",children:i.project_reference.message}):""})]})})]})}),e.jsx(ti,{children:e.jsx(e.Fragment,{})})]}),e.jsx(W,{children:e.jsxs(Y,{children:[e.jsxs(Vt,{children:[e.jsx(ri,{onClick:()=>X("Quotation"),isActive:P=="Quotation",children:e.jsx(w,{children:"Quotation"})}),e.jsx(ri,{onClick:()=>X("Attachments"),isActive:P=="Attachments",children:e.jsx(w,{children:"Attachments"})}),e.jsx(ri,{onClick:()=>X("Revisions"),isActive:P=="Revisions",hidden:t.mode=="create",children:e.jsx(w,{children:"Revisions"})})]}),e.jsx("hr",{}),e.jsxs("div",{hidden:P!="Quotation",children:[e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row gt-4",children:[e.jsxs("div",{className:"col-md-6 d-flex",children:[e.jsx("div",{className:"row",hidden:t.mode=="create",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("span",{children:["Quotation No: ",t.quotation_no," ","  "]}),e.jsx(ut,{className:"statusBadge",color:k.color,children:k.name}),"   ",e.jsx("br",{}),e.jsxs("span",{children:["Revision: ",t.revision]})]})}),e.jsxs(mi,{children:[e.jsx(hi,{hasIcon:!1,children:e.jsx(w,{color:"info",isLight:!0,icon:"Download",hidden:!u,children:"PDF"})}),e.jsxs(ui,{children:[e.jsx(ai,{children:e.jsx("span",{onClick:()=>ee(t.quotation_id,t.quotation_rev_id,t.quotation_no,!1),children:"Customer View"})}),e.jsx(ai,{onClick:()=>ee(t.quotation_id,t.quotation_rev_id,t.quotation_no,!0),children:"Internal View"})]})]})]}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-end",children:[e.jsxs(mi,{children:[e.jsx(hi,{hasIcon:!1,children:e.jsx(w,{isLink:!0,color:k.color,icon:"Circle",className:"text-nowrap order-0 float-end",isDisable:u,hidden:!a,children:k.name})}),e.jsx(ui,{children:Object.keys(Z).map(l=>e.jsx(ai,{onClick:()=>z(Z[l]),children:e.jsxs("div",{children:[e.jsx(ii,{icon:"Circle",color:Z[l].color}),Z[l].name]})},l))})]}),e.jsx("div",{className:"order-2 float-end",children:" "}),e.jsx(w,{color:"info",hidden:!u,className:"order-2 float-end",onClick:()=>q(!1),children:"Create Revision"})]})]})}),e.jsx("br",{}),e.jsx(Wt,{isViewMode:u}),e.jsx("br",{})]}),e.jsx("div",{hidden:P!="Attachments",children:u?e.jsx(Ht,{quotation_id:t.quotation_id,variance:t.variance}):e.jsx(Ot,{setAttachmentIds:n,className:"",quotation_rev_id:t.quotation_rev_id,isViewMode:u})}),e.jsx("div",{hidden:P!="Revisions",children:t.mode!="create"&&e.jsx(Jt,{quotation_id:t.quotation_id,variance:t.variance})})]})}),e.jsxs(W,{hidden:P!="Quotation",children:[e.jsx($e,{children:e.jsx(ye,{children:e.jsx(we,{tag:"div",className:"h3",children:"Options"})})}),e.jsx(Y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"lead_time",label:"Lead Time",children:[e.jsx("select",{id:"lead_time",className:"form-control "+(i.lead_time?"is-invalid":""),...s("lead_time"),disabled:u,children:I.map(l=>e.jsx("option",{value:l,children:l}))}),e.jsx(e.Fragment,{children:i.lead_time?e.jsx("div",{className:"invalid-feedback",children:i.lead_time.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"payment_terms",label:"Payment Terms",children:[e.jsx("select",{id:"payment_terms",className:"form-control "+(i.lead_time?"is-invalid":""),...s("payment_terms"),disabled:u,children:I.map(l=>e.jsx("option",{value:l,children:l}))}),e.jsx(e.Fragment,{children:i.payment_terms?e.jsx("div",{className:"invalid-feedback",children:i.payment_terms.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"validity",label:"Validity",children:[e.jsx("select",{id:"validity",className:"form-control "+(i.validity?"is-invalid":""),...s("validity"),disabled:u,children:ve.map(l=>e.jsx("option",{value:l,children:l}))}),e.jsx(e.Fragment,{children:i.validity?e.jsx("div",{className:"invalid-feedback",children:i.validity.message}):""})]})}),e.jsx("div",{})]})}),e.jsx(ti,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(W,{hidden:P!="Quotation",children:[e.jsx($e,{children:e.jsx(ye,{children:e.jsx(we,{tag:"div",className:"h3",children:"Summary"})})}),e.jsxs(Y,{className:"pb-0",children:[e.jsx(e.Fragment,{}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"reference_status",label:"Reference Status",isFloating:!0,children:[e.jsx("input",{id:"reference_status",className:"form-control "+(i.reference_status?"is-invalid":""),...s("reference_status"),type:"text",placeholder:"reference_status",disabled:u}),e.jsx(e.Fragment,{children:i.reference_status?e.jsx("div",{className:"invalid-feedback",children:i.reference_status.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_cost",label:"Total (RM)",isFloating:!0,children:[e.jsx("input",{id:"total_cost",className:"form-control "+(i.total_cost?"is-invalid":""),...s("total_cost"),type:"text",placeholder:"total_cost",disabled:u}),e.jsx(e.Fragment,{children:i.total_cost?e.jsx("div",{className:"invalid-feedback",children:i.total_cost.message}):""})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"note",label:"Note",isFloating:!0,children:[e.jsx("input",{id:"note",className:"form-control "+(i.note?"is-invalid":""),...s("note"),type:"text",placeholder:"note",disabled:u}),e.jsx(e.Fragment,{children:i.note?e.jsx("div",{className:"invalid-feedback",children:i.note.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"discount",label:"Discount",isFloating:!0,children:[e.jsx("input",{id:"discount",className:"form-control "+(i.discount?"is-invalid":""),...s("discount"),type:"text",placeholder:"grand_tdiscountotal",disabled:u}),e.jsx(e.Fragment,{children:i.discount?e.jsx("div",{className:"invalid-feedback",children:i.discount.message}):""})]})}),e.jsx("div",{className:"col-md-8"}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"sst",label:"SST",isFloating:!0,children:[e.jsx("input",{id:"sst",className:"form-control "+(i.sst?"is-invalid":""),...s("sst"),type:"text",placeholder:"sst",disabled:u}),e.jsx(e.Fragment,{children:i.sst?e.jsx("div",{className:"invalid-feedback",children:i.sst.message}):""})]})}),e.jsx("div",{className:"col-md-8"}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"grand_total",label:"G/Total (RM)",isFloating:!0,children:[e.jsx("input",{id:"grand_total",className:"form-control "+(i.grand_total?"is-invalid":""),...s("grand_total"),type:"text",placeholder:"grand_total",disabled:u}),e.jsx(e.Fragment,{children:i.grand_total?e.jsx("div",{className:"invalid-feedback",children:i.grand_total.message}):""})]})})]})]}),e.jsx(ti,{children:e.jsxs(vt,{children:[e.jsx(w,{color:"dark",icon:"Edit",type:"submit",hidden:u||!a,isDisable:v,onClick:()=>{r("status","Draft")},children:v?e.jsx(mt,{isSmall:!0,inButton:"onlyIcon"}):e.jsx("span",{children:"Draft"})}),e.jsx(w,{type:"submit",color:"success",icon:g?"null":"Save",hidden:u,isDisable:v,children:v?e.jsx(mt,{isSmall:!0,inButton:"onlyIcon"}):g?e.jsxs("span",{children:["Save"," ",e.jsx("small",{className:"text-decoration-underline",children:"(as New Variation)"})]}):e.jsx("span",{children:"Save"})})]})})]})]})})]})};export{ea as F,sa as Q};
