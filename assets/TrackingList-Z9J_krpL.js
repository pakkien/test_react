import{j as e,F as o,l as n,u as R,r as s,g as j,P as z,S as H,b as U,B as d,d as $,a as J,C as W,f as K,h as X,i as ee,k as ae,A as te,I as g,m as ie,o as b}from"./index-BXRC_AQp.js";import{B as oe}from"./Badge-D17qtGFt.js";import{P as ne,u as se,d as le,a as re}from"./useSortableData-CuDqLEfn.js";import{M as de,a as ce,b as ue,c as he,d as _e}from"./Modal-By5Mkl3o.js";import"./Select-dZRLqHEp.js";const ve=l=>{const a=l.formik;return e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"po_no",label:"PO No.",isFloating:!0,children:e.jsx(n,{placeholder:"po_no",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.po_no,isValid:a.isValid,isTouched:a.touched.po_no,invalidFeedback:a.errors.po_no,validFeedback:"Valid po_no"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"po_amount",label:"PO Amount",isFloating:!0,children:e.jsx(n,{placeholder:"po_amount",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.po_amount,isValid:a.isValid,isTouched:a.touched.po_amount,invalidFeedback:a.errors.po_amount,validFeedback:"Valid po_amount"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"po_attach_file",label:"po_attach_file",isFloating:!0,children:e.jsx(n,{placeholder:"po_attach_file",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.po_attach_file,isValid:a.isValid,isTouched:a.touched.po_attach_file,invalidFeedback:a.errors.po_attach_file,validFeedback:"Valid po_attach_file"})})}),e.jsx("hr",{}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"so_no",label:"so_no",isFloating:!0,children:e.jsx(n,{placeholder:"so_no",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.so_no,isValid:a.isValid,isTouched:a.touched.so_no,invalidFeedback:a.errors.so_no,validFeedback:"Valid so_no"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"so_attach_file",label:"so_attach_file",isFloating:!0,children:e.jsx(n,{placeholder:"so_attach_file",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.so_attach_file,isValid:a.isValid,isTouched:a.touched.so_attach_file,invalidFeedback:a.errors.so_attach_file,validFeedback:"Valid so_attach_file"})})}),e.jsx("hr",{}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"invoice_no",label:"invoice_no",isFloating:!0,children:e.jsx(n,{placeholder:"invoice_no",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.invoice_no,isValid:a.isValid,isTouched:a.touched.invoice_no,invalidFeedback:a.errors.invoice_no,validFeedback:"Valid invoice_no"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"invoice_date",label:"invoice_date",isFloating:!0,children:e.jsx(n,{placeholder:"invoice_date",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.invoice_date,isValid:a.isValid,isTouched:a.touched.invoice_date,invalidFeedback:a.errors.invoice_date,validFeedback:"Valid invoice_date"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"payment_terms",label:"payment_terms",isFloating:!0,children:e.jsx(n,{placeholder:"payment_terms",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.payment_terms,isValid:a.isValid,isTouched:a.touched.payment_terms,invalidFeedback:a.errors.payment_terms,validFeedback:"Valid payment_terms"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"invoice_amount",label:"invoice_amount",isFloating:!0,children:e.jsx(n,{placeholder:"invoice_amount",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.invoice_amount,isValid:a.isValid,isTouched:a.touched.invoice_amount,invalidFeedback:a.errors.invoice_amount,validFeedback:"Valid invoice_amount"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"invoice_attach_file",label:"invoice_attach_file",isFloating:!0,children:e.jsx(n,{placeholder:"invoice_attach_file",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.invoice_attach_file,isValid:a.isValid,isTouched:a.touched.invoice_attach_file,invalidFeedback:a.errors.invoice_attach_file,validFeedback:"Valid invoice_attach_file"})})}),e.jsx("hr",{}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"remarks",label:"remarks",isFloating:!0,children:e.jsx(n,{placeholder:"remarks",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.remarks,isValid:a.isValid,isTouched:a.touched.remarks,invalidFeedback:a.errors.remarks,validFeedback:"Valid remarks"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(o,{id:"status_overwrite",label:"status_overwrite",isFloating:!0,children:e.jsx(n,{placeholder:"status_overwrite",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.status_overwrite,isValid:a.isValid,isTouched:a.touched.status_overwrite,invalidFeedback:a.errors.status_overwrite,validFeedback:"Valid status_overwrite"})})})]})};function pe(l){switch(l.toLowerCase().trim()){case"inprogress":return"danger";case"closed":return"dark";case"awarded":return"success";default:return"primary"}}const c=[{id:"1",prepared_by:"Gary",client:"Tech Group",quotation_date:"2024-04-04T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27,status:"In Progress",site_location:"Penang",building:"Lab 1"},{id:"2",prepared_by:"Gary",client:"Tech Group",quotation_date:"2024-04-03T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27.96,status:"Closed",site_location:"Penang",building:"Lab 1"},{id:"3",prepared_by:"Gary",client:"Tech Group",quotation_date:"2024-04-02T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6000.1,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"},{id:"4",prepared_by:"Gary",client:"Tech Group",quotation_date:"2024-04-01T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6000.03,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"},{id:"5",prepared_by:"Gary",client:"Tech Group",quotation_date:"2023-04-04T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"},{id:"6",prepared_by:"Gary",client:"Tech Group",quotation_date:"2025-04-04T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"},{id:"7",prepared_by:"Gary",client:"Tech Group",quotation_date:"2022-04-04T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"},{id:"8",prepared_by:"Gary",client:"Tech Group",quotation_date:"2024-04-04T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"},{id:"9",prepared_by:"Gary",client:"Tech Group",quotation_date:"2024-04-04T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"},{id:"10",prepared_by:"Gary",client:"Tech Group",quotation_date:"2024-04-04T16:00:00.000Z",quotation_no:"Q-012345",end_user:"Tech Group",revision:0,quotation_amount:9800,cost:6e3,margin:3500,percent:27.96,status:"Awarded",site_location:"Penang",building:"Lab 1"}],Ce=()=>{const l=R(),[a,u]=s.useState(!1),[S,C]=s.useState(!1),[f,k]=s.useState(!1),[F,T]=s.useState(!0),[w,y]=s.useState(null),[q,V]=s.useState(void 0),[B,N]=s.useState(!0),[xe,L]=s.useState(!1),[G,P]=s.useState(!0),A=()=>{C(!1),k(!1),T(!0),y("xl"),V(void 0),N(!0),L(!1),P(!0)},_=j({initialValues:{po_no:"",po_date:"",po_amount:"",po_attach_file:"",so_no:"",so_attach_file:"",invoice_no:"",invoice_date:"",payment_terms:"",invoice_amount:"",invoice_attach_file:"",remarks:"",status_overwrite:""},onSubmit:t=>{console.log(JSON.stringify(t))}}),[Q,h]=s.useState(c),[v,M]=s.useState(1),[p,D]=s.useState(ne[5]),{items:x,requestSort:I,getClassNamesFor:Z}=se(Q),m=t=>{const i=t.search.toString().toLowerCase(),O=Y(i);t.search?h(O):h(c)},r=j({initialValues:{search:""},onSubmit:m,onReset:()=>h(c)}),Y=t=>c.filter(i=>i.prepared_by.toLowerCase().includes(t)||i.client.toLowerCase().includes(t)||b(`${i.quotation_date}`).format("DD/MM/YYYY").includes(t)||i.quotation_no.toLowerCase().includes(t)||i.end_user.toLowerCase().includes(t)||i.revision.toString().toLowerCase().includes(t)||i.quotation_amount.toFixed(2).toString().toLowerCase().includes(t)||i.cost.toFixed(2).toString().toLowerCase().includes(t)||i.margin.toFixed(2).toString().toLowerCase().includes(t)||i.percent.toFixed(2).toString().toLowerCase().includes(t)||i.status.toLowerCase().includes(t)||i.site_location.toLowerCase().includes(t)||i.building.toLowerCase().includes(t)),E=()=>{l("view-quotation")};return e.jsxs(z,{title:"Tracking List",children:[e.jsx(H,{children:e.jsxs(U,{children:[e.jsx(d,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>l(-1),children:"Back"}),e.jsx($,{}),e.jsx("strong",{className:"fs-5",children:"Tracking List"})]})}),e.jsx(J,{container:"fluid",children:e.jsxs(W,{stretch:!0,children:[e.jsx(K,{className:"table-responsive",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(X,{children:e.jsx(ee,{children:e.jsx(ae,{tag:"div",className:"h3",children:"Tracking List"})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(te,{color:"light",isLight:!0,children:e.jsx("form",{onSubmit:r.handleSubmit,children:e.jsx(o,{children:e.jsxs("div",{className:"d-flex","data-tour":"search",children:[e.jsx("label",{className:"border-0 bg-transparent",children:e.jsx(g,{icon:"Search",size:"2x",color:"primary"})}),e.jsx(n,{id:"search",placeholder:"Search...",className:"border-0 shadow-none bg-transparent",onChange:t=>{r.handleChange(t),t.target.value.length>2&&ie(()=>m({...r.values,search:t.target.value}),1e3)(),t.target.value.length===0&&r.resetForm()},value:r.values.search})]})})})})}),e.jsx("div",{className:"col-md-4"}),e.jsx("div",{className:"col-md-12",children:e.jsxs("table",{className:"table table-modern",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No."}),e.jsx("th",{children:"Prepared By"}),e.jsx("th",{children:"Client"}),e.jsxs("th",{onClick:()=>I("quotation_date"),className:"cursor-pointer text-decoration-underline",children:["Quotation Date",e.jsx(g,{size:"lg",className:Z("quotation_date"),icon:"FilterList"})]}),e.jsx("th",{children:"Quotation No."}),e.jsx("th",{children:"End User"}),e.jsx("th",{children:"Revision"}),e.jsx("th",{children:"Quotation Amount"}),e.jsx("th",{children:"Cost"}),e.jsx("th",{children:"Margin"}),e.jsx("th",{children:"%"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Site Location"}),e.jsx("th",{children:"Building"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:le(x,v,p).map((t,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:i+1}),e.jsx("td",{children:t.prepared_by}),e.jsx("td",{children:t.client}),e.jsx("td",{children:b(`${t.quotation_date}`).format("DD/MM/YYYY")}),e.jsx("td",{children:t.quotation_no}),e.jsx("td",{children:t.end_user}),e.jsx("td",{children:t.revision}),e.jsx("td",{children:t.quotation_amount.toFixed(2)}),e.jsx("td",{children:t.cost.toFixed(2)}),e.jsx("td",{children:t.margin.toFixed(2)}),e.jsxs("td",{children:[t.percent.toFixed(2),"%"]}),e.jsx("td",{children:e.jsx(oe,{className:"statusBadge",color:pe(t.status),children:e.jsx("h6",{children:t.status})})}),e.jsx("td",{children:t.site_location}),e.jsx("td",{children:t.building}),e.jsx("td",{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-auto",children:e.jsx(d,{color:"primary",icon:"RemoveRedEye",shadow:"none",hoverShadow:"lg",tag:"a",onClick:()=>E()})}),e.jsx("div",{className:"col-auto",children:e.jsx(d,{color:"primary",icon:"Add",shadow:"none",hoverShadow:"lg",tag:"a",onClick:()=>{u(!0),A()}})})]})})]},t.id))})]})})]})}),e.jsx(re,{data:x,label:"items",setCurrentPage:M,currentPage:v,perPage:p,setPerPage:D})]})}),e.jsxs(de,{isOpen:a,setIsOpen:u,titleId:"subItemEditModal",isStaticBackdrop:S,isScrollable:f,isCentered:F,size:w,fullScreen:q,isAnimation:B,children:[e.jsx(ce,{setIsOpen:G?u:void 0,children:e.jsx(ue,{id:"editAdditionalInfoModal",children:"Edit Additional Info"})}),e.jsx(he,{children:e.jsx(ve,{state:a,id:"1",formik:_})}),e.jsx(_e,{children:e.jsx(d,{color:"info",icon:"Save",onClick:_.handleSubmit,children:"Save"})})]})]})};export{Ce as default};
