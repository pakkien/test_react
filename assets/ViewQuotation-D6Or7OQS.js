import{r as b,x as B,j as e,N as I,z as S,D as se,o as Te,C as A,q as M,s as q,t as R,f as $,F as n,v as j,I as W,k as K,B as F,G as Q,E as ae,H as Oe,y as ze,P as Me,S as qe,b as Re,d as ye,e as Ye,a as Be,O as we,Q as Fe,R as Se,U as X,K as Qe}from"./index-ClVttQaI.js";import{f as ie,A as L,a as U,z as _,F as Le,u as Ue,t as Ee,b as Ve,p as Ce,c as He,P as Ge,d as te,e as De,g as Ie,h as We,N as Je,i as G}from"./getDefaultOptions-BG9vTx75.js";import{Q as Z,B as Ae}from"./enumQuotationStatus-B_a3H9gn.js";import{u as re,c as ce,t as ne}from"./timezone-B9lglhid.js";import{C as Pe}from"./Checks-f8TYTkTi.js";const Ke=a=>{const[i,s]=b.useState([]),[f,d]=b.useState([]),o=async(m,g)=>{const c={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${g}`}};B.get(`undefined/quotation/revisions/${m}`,c).then(x=>{s(x.data.data)})};b.useEffect(()=>{o(a.quotation_id,a.variance),i.map(m=>p(m.quotation_revision_id))},[i.length]);const p=async m=>{const g={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.get(`undefined/quotation/${m}/attachments`,g).then(c=>{if(c.data.attachments){const x=Object.assign({data:i.filter(t=>t.quotation_revision_id==m)[0],attachment_list:c.data.attachments});f==null||f.push(x)}})},y=async(m,g)=>{B.get(`undefined/quotation/attachment/${m}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(c=>{ie(c.data,g)})};return e.jsx(e.Fragment,{children:f.map((m,g)=>e.jsxs("div",{children:[e.jsxs("a",{href:"/quotation/view/"+m.data.quotation_revision_id,target:"_blank",children:["Revision ",m.data.revision]}),e.jsx("br",{}),m.attachment_list&&m.attachment_list.map(c=>e.jsxs("li",{children:[e.jsx("span",{onClick:()=>y(c.id,c.filename),children:e.jsx(I,{title:c.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:c.filename})})}),e.jsx("br",{})]},c.id))]},g))})};S.extend(re);S.extend(se);S.extend(ce);S.extend(ne);const Xe=a=>{Te();const[i,s]=b.useState([]),f=async(o,p)=>{const y={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${p}`}};B.get(`undefined/quotation/revisions/${o}`,y).then(m=>{s(m.data.data)})};b.useEffect(()=>{f(a.quotation_id,a.variance)},[]);const d=o=>S.utc(o).local().format("YYYY-MMM-DD HH:mm:ss");return e.jsx(e.Fragment,{children:i.map(o=>e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/quotation/view/"+o.quotation_revision_id,target:"_blank",children:["Revision ",o.revision]})," - Created at: ",d(o.created_at),e.jsx("br",{})]}))})},Ze=a=>(a.sub_items.sort((i,s)=>i.order<s.order?-1:i.order>s.order?1:0),e.jsx("div",{className:"pb-0",children:e.jsx("div",{className:"col-xl-12",children:a.sub_items.length>0&&e.jsx(L,{id:"SubItemAccordion",color:"dark",activeItemId:"SubItemAccordionItem_"+a.itemIndex,children:e.jsx(U,{id:"SubItemAccordionItem_"+a.itemIndex,title:"Sub Items",children:a.sub_items.map((i,s)=>e.jsx(e.Fragment,{children:e.jsxs(A,{id:"#subItem_card_id#"+s,shadow:"none",borderColor:"light",borderSize:1,children:[e.jsx(M,{children:e.jsx(q,{children:e.jsx(R,{tag:"div",className:"h3",children:a.sectionMode==!0?`${a.sectionIndex+1}.${a.itemIndex+1}.${s+1}  Sub Item ${s+1}`:`${a.itemIndex+1}.${s+1}   Sub Item ${s+1}`})})}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(j,{value:i.product_description,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(j,{value:i.brand,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"model",label:"Model",isFloating:!0,children:e.jsx(j,{value:i.model,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(j,{value:i.remarks,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsx(n,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(j,{value:i.quantity,disabled:!0})})}),e.jsx("div",{className:"col-3",children:e.jsx(n,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(j,{value:i.unit,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(j,{value:i.unit_cost,disabled:!0})})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsx(n,{id:"estimated_cost",label:"Estimated Cost",children:e.jsx(Pe,{checked:i.estimated_cost,disabled:!0,type:"checkbox"})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(j,{value:i.total_cost,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(j,{value:i.margin,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:e.jsx(j,{value:i.margin_percentage,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_price",label:"Unit Price",isFloating:!0,children:e.jsx(j,{value:i.unit_price,disabled:!0})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_price",label:"Total Price",isFloating:!0,children:e.jsx(j,{value:i.total_price,disabled:!0})})}),e.jsx("div",{className:"col-md-12"})]})})]},s)}))})})},a.itemIndex)})),$e=a=>(a.items.sort((i,s)=>i.order<s.order?-1:i.order>s.order?1:0),e.jsx("div",{className:"pb-0",children:a.items.map((i,s)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"ItemAccordion",color:"dark",activeItemId:"ItemAccordionItem_"+s,children:e.jsx(U,{id:"ItemAccordionItem_"+s,title:a.sectionMode?`${a.sectionIndex+1}.${s+1} Item ${s+1}`:`${s+1}.0 Item ${s+1}`,children:e.jsxs(A,{id:"#item_card_id#"+s,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsx(M,{children:e.jsx(q,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Item ",s+1,"   "]})})}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(j,{value:i.product_description,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(j,{value:i.brand,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"model",label:"Model",isFloating:!0,children:e.jsx(j,{value:i.model,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(j,{value:i.remarks,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsx(n,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(j,{value:i.quantity,disabled:!0})})}),e.jsx("div",{className:"col-3",children:e.jsx(n,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(j,{value:i.unit,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(j,{value:i.unit_cost,disabled:!0})})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsx(n,{id:"estimated_cost",label:"Estimated Cost",children:e.jsx(Pe,{checked:i.estimated_cost,disabled:!0,type:"checkbox"})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(j,{value:i.total_cost,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(j,{value:i.margin,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:e.jsx(j,{value:i.margin_percentage,disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_price",label:"Unit Price",isFloating:!0,children:e.jsx(j,{value:i.unit_price,disabled:!0})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_price",label:"Total Price",isFloating:!0,children:e.jsx(j,{value:i.total_price,disabled:!0})})}),e.jsx("div",{className:"col-md-12"}),e.jsx("div",{className:"col-md-12",children:e.jsx(Ze,{itemIndex:s,sub_items:i.sub_items,sectionMode:a.sectionMode,sectionIndex:a.sectionIndex})}),e.jsx("div",{className:"col-md-12"})]})})]},i.item_id)})})}),e.jsx("div",{className:"col-md-12"})]}))})),es=a=>(a.sections.sort((i,s)=>i.order<s.order?-1:i.order>s.order?1:0),e.jsx("div",{className:"pb-0",children:a.sections.map((i,s)=>i.is_section_valid?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-md-12",children:e.jsx(L,{id:"SectionAccordion",color:"dark",activeItemId:"SectionAccordionItem_"+s,children:e.jsx(U,{id:"SectionAccordionItem_"+s,title:`${s+1}.0  `+i.name,children:e.jsx($e,{items:i.items,sectionMode:!0,sectionIndex:s})})})}),e.jsx("div",{className:"col-md-12",children:" "})]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{items:i.items,sectionMode:!1,sectionIndex:s}),e.jsx("div",{className:"col-md-12",children:" "})]}))})),le=_.object({created_at:_.string(),created_by:_.string(),filename:_.string(),id:_.string(),size:_.number()}),ss=_.object({po_no:_.string().min(3),po_date:_.string(),po_amount:_.coerce.number(),po_attachments:_.array(le),temp_attachment_ids:_.array(_.string()),order:_.number()}),as=_.object({so_no:_.string(),so_date:_.string(),so_attachments:_.array(le),temp_attachment_ids:_.array(_.string()),order:_.number()}),is=_.object({invoice_no:_.string(),invoice_date:_.string(),invoice_amount:_.coerce.number(),payment_terms:_.string(),invoice_attachments:_.array(le),temp_attachment_ids:_.array(_.string()),order:_.number()}),ts=_.object({remarks:_.string(),purchase_order:_.array(ss),sale_order:_.array(as),invoice:_.array(is)}),rs=a=>Ue({mode:"onChange",resolver:Ee(ts),defaultValues:{remarks:a.data.remarks,purchase_order:a.data.purchase_order,sale_order:a.data.sale_order,invoice:a.data.invoice}}),cs=a=>{const i=rs(a);return e.jsx(Le,{...i,children:a.children})},J=()=>Ve(),ee=10,de=a=>{const[i,s]=b.useState([]);b.useEffect(()=>{s(a.attachment_list)},[a.attachment_list.length]);const f=async(r,h,u)=>{B.get(`undefined/tracking_list/attachment/${r}/${h}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(N=>{ie(N.data,u)})},d=r=>{let h=i.filter(u=>u.id!=r);s(h)},[o,p]=b.useState([]),[y,m]=b.useState([]),[g,c]=b.useState(!1),x=async r=>{var h=new FormData;h.append("file",r);var u={onUploadProgress:function(N){const T=N.total&&N.loaded?Math.round(N.loaded*100/N.total):0;p(P=>{const O=[...P];return O.map(Y=>Y.name==r.name?Y.upload_percent=T:null),O})},headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.post(`undefined/tracking_list/attachment/${a.attachment_type}`,h,u).then(function(N){const T=N.data.attachment_id;p(P=>{const O=[...P];return O.map(Y=>Y.name==r.name?Y.upload_id=T:null),O})}).catch(function(N){p(T=>{const P=[...T];return P.map(O=>O.name==r.name?O.upload_error="Error":null),P})})},t=b.useCallback((r,h)=>{r!=null&&r.length&&(p(u=>[...u,...r.map(N=>Object.assign(N,{preview:Ce,upload_percent:0,upload_id:"",upload_error:""}))]),r.map(u=>x(u))),h!=null&&h.length&&m(u=>[...u,...h])},[]),{getRootProps:D,getInputProps:v,isDragActive:z}=He({accept:{"application/*":[".pdf"]},maxSize:1024*1500,maxFiles:ee-o.length,disabled:g,onDrop:t});b.useEffect(()=>()=>o.forEach(r=>URL.revokeObjectURL(r.preview)),[o]),b.useEffect(()=>{let h=o.filter(N=>N.upload_percent==100&&N.upload_id&&!N.upload_error).map(N=>N.upload_id),u=i.map(N=>N.id);switch(a.attachment_type){case"purchase_order":{a.updateIdsFunc(a.index,[...h,...u]);break}case"sale_order":{a.updateIdsFunc(a.index,[...h,...u]);break}case"invoice":{a.updateIdsFunc(a.index,[...h,...u]);break}}},[o,i]),b.useEffect(()=>{o.length+i.length>=ee?c(!0):c(!1)},[o.length+i.length]);const k=r=>{p(h=>h.filter(u=>u.name!==r))},C=r=>{m(h=>h.filter(({file:u})=>u.name!==r))},w=()=>{p([]),m([])};function l(r,h=2){if(!+r)return"0 Bytes";const u=1024,N=h<0?0:h,T=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],P=Math.floor(Math.log(r)/Math.log(u));return`${parseFloat((r/Math.pow(u,P)).toFixed(N))} ${T[P]}`}return e.jsxs(A,{shadow:"none",borderSize:0,borderColor:"light",children:[e.jsx(M,{children:e.jsx(q,{children:e.jsxs(R,{tag:"div",className:"h5",children:["Attachments"," ",o!=null&&o.length||i!=null&&i.length?" - "+((o==null?void 0:o.length)+(i==null?void 0:i.length))+"/"+ee:""]})})}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4 ",children:[e.jsxs("div",{hidden:g,...D({className:a.className}),children:[e.jsx("input",{...v()}),e.jsx("div",{className:"border border-2 border-light border d-flex justify-content-center align-items-center",style:{height:150},children:e.jsxs("p",{className:"lead",children:[e.jsx(W,{icon:"Upload",size:"2x"}),z?"Drop the files here ...":"Drag & drop files here, or click to select files"]})})]}),i.map(r=>{var h;return e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(A,{borderColor:"success",className:"shadow-none border border-2 rounded-2",children:e.jsx($,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:K("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:Ce,alt:r.filename,width:50})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},onClick:()=>f(a.attachment_type,r.id,r.filename),children:e.jsx(I,{title:r.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:r.filename})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:(h=r.filename.split(".").pop())==null?void 0:h.toUpperCase()})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:l(r.size)})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(F,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>d(r.id)})})})})]})})})})},r.id)}),o.map(r=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(A,{borderColor:r.upload_error?"danger":r.upload_percent!=100?"info":"success",className:"shadow-none border border-2 rounded-2",children:e.jsx($,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:K("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:r.preview,alt:r.name,width:50,onLoad:()=>{URL.revokeObjectURL(r.preview)}})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(I,{title:r.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:r.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:r.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:l(r.size)})}),e.jsx("div",{className:"col-12",children:r.upload_error?e.jsx("div",{className:"text-danger",children:r.upload_error}):r.upload_percent!=100?e.jsx(Ge,{isAnimated:!0,value:r.upload_percent,max:100,color:"success",height:"0.5rem"}):e.jsxs("div",{className:"text-success",children:[e.jsx(W,{icon:"Check",size:"lg",color:"success"})," ","Uploaded"]})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(F,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>k(r.name)})})})})]})})})})},r.name)),y.map(({file:r,errors:h})=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(A,{borderColor:"danger",className:"shadow-none border border-2 rounded-2",children:e.jsx($,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:K("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx(W,{icon:"ErrorOutline",size:"4x",color:"danger"})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(I,{title:r.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:r.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:r.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:l(r.size)})}),e.jsx("div",{className:"col-12",children:h.map(u=>e.jsx("div",{className:"text-danger",children:u.message}))})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(F,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>C(r.name)})})})})]})})})})})),e.jsx("div",{children:e.jsx(F,{color:"danger",icon:"Delete",tag:"a",hidden:!(o.length>0||y.length>0),onClick:w,isLight:!0,children:"Remove all files"})})]})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]})},ns=()=>{const{register:a,control:i,formState:{errors:s},watch:f,setValue:d}=J(),o=f(),{append:p,remove:y,fields:m}=te({name:"purchase_order",control:i}),g=()=>{p({po_no:"",po_date:"",po_amount:0,po_attachments:[],temp_attachment_ids:[],order:0})},c=(x,t)=>{d(`purchase_order.${x}.temp_attachment_ids`,t)};return m.sort((x,t)=>x.order<t.order?-1:x.order>t.order?1:0),e.jsxs("div",{className:"pb-0",children:[e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[m.map((x,t)=>{var D,v,z,k,C,w,l,r,h,u,N,T,P,O,Y,E,V,H;return e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"poAccordion",color:"dark",activeItemId:"poAccordionItem_"+t,children:e.jsxs(U,{id:"poAccordionItem_"+t,title:"Purchase Order "+(+t+1),children:[e.jsxs(A,{id:"#po_card_id#"+t,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs(M,{children:[e.jsx(q,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Purchase Order ",t+1,"  "]})}),e.jsx(ae,{children:e.jsx(F,{color:"danger",icon:"Delete",tag:"a",onClick:()=>{y(t)},children:"Delete Purchase Order"})})]}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"po_no",label:"PO No.",children:[e.jsx("input",{id:"po_no",className:"form-control "+((v=(D=s.purchase_order)==null?void 0:D[t])!=null&&v.po_no?"is-invalid":""),...a(`purchase_order.${t}.po_no`),type:"text",placeholder:"po_no"}),e.jsx(e.Fragment,{children:(k=(z=s.purchase_order)==null?void 0:z[t])!=null&&k.po_no?e.jsx("div",{className:"invalid-feedback",children:(w=(C=s.purchase_order)==null?void 0:C[t])==null?void 0:w.po_no.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"po_date",label:"PO Date.",children:[e.jsx("input",{id:"po_date",type:"date",className:"form-control "+((r=(l=s.purchase_order)==null?void 0:l[t])!=null&&r.po_date?"is-invalid":""),...a(`purchase_order.${t}.po_date`),placeholder:"po_date"}),e.jsx(e.Fragment,{children:(u=(h=s.purchase_order)==null?void 0:h[t])!=null&&u.po_date?e.jsx("div",{className:"invalid-feedback",children:(T=(N=s.purchase_order)==null?void 0:N[t])==null?void 0:T.po_date.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"po_amount",label:"PO Amount.",children:[e.jsx("input",{id:"po_amount",className:"form-control "+((O=(P=s.purchase_order)==null?void 0:P[t])!=null&&O.po_amount?"is-invalid":""),...a(`purchase_order.${t}.po_amount`),type:"number",placeholder:"po_amount"}),e.jsx(e.Fragment,{children:(E=(Y=s.purchase_order)==null?void 0:Y[t])!=null&&E.po_amount?e.jsx("div",{className:"invalid-feedback",children:(H=(V=s.purchase_order)==null?void 0:V[t])==null?void 0:H.po_amount.message}):""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsx(de,{attachment_type:"purchase_order",attachment_list:o.purchase_order[t].po_attachments?o.purchase_order[t].po_attachments:[],index:t,updateIdsFunc:c})})]})})]},t),e.jsx("div",{className:"col-md-12"})]})})},t)}),e.jsx("div",{children:e.jsx(F,{color:"info",icon:"Add",tag:"a",onClick:()=>{g()},className:"float-end",children:"Add Purchase Order"})})]})})})," "]})},ls=()=>{const{register:a,control:i,formState:{errors:s},watch:f,setValue:d}=J(),o=f(),{append:p,remove:y,fields:m}=te({name:"sale_order",control:i}),g=()=>{p({so_no:"",so_date:"",so_attachments:[],temp_attachment_ids:[],order:0})},c=(x,t)=>{d(`sale_order.${x}.temp_attachment_ids`,t)};return m.sort((x,t)=>x.order<t.order?-1:x.order>t.order?1:0),e.jsxs("div",{className:"pb-0",children:[e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[m.map((x,t)=>{var D,v,z,k,C,w,l,r,h,u,N,T;return e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"soAccordion",color:"dark",activeItemId:"soAccordionItem_"+t,children:e.jsxs(U,{id:"soAccordionItem_"+t,title:"Sale Order "+(+t+1),children:[e.jsxs(A,{id:"#so_card_id#"+t,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs(M,{children:[e.jsx(q,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Sale Order ",t+1,"  "]})}),e.jsx(ae,{children:e.jsx(F,{color:"danger",icon:"Delete",tag:"a",onClick:()=>{y(t)},children:"Delete Sale Order"})})]}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"so_no",label:"SO No.",children:[e.jsx("input",{id:"so_no",className:"form-control "+((v=(D=s.sale_order)==null?void 0:D[t])!=null&&v.so_no?"is-invalid":""),...a(`sale_order.${t}.so_no`),type:"text",placeholder:"so_no"}),e.jsx(e.Fragment,{children:(k=(z=s.sale_order)==null?void 0:z[t])!=null&&k.so_no?e.jsx("div",{className:"invalid-feedback",children:(w=(C=s.sale_order)==null?void 0:C[t])==null?void 0:w.so_no.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"so_date",label:"SO Date.",children:[e.jsx("input",{id:"so_date",type:"date",className:"form-control "+((r=(l=s.sale_order)==null?void 0:l[t])!=null&&r.so_date?"is-invalid":""),...a(`sale_order.${t}.so_date`),placeholder:"so_date"}),e.jsx(e.Fragment,{children:(u=(h=s.sale_order)==null?void 0:h[t])!=null&&u.so_date?e.jsx("div",{className:"invalid-feedback",children:(T=(N=s.sale_order)==null?void 0:N[t])==null?void 0:T.so_date.message}):""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsx(de,{attachment_type:"sale_order",attachment_list:o.sale_order[t].so_attachments?o.sale_order[t].so_attachments:[],index:t,updateIdsFunc:c})})]})})]},t),e.jsx("div",{className:"col-md-12"})]})})},t)}),e.jsx("div",{children:e.jsx(F,{color:"info",icon:"Add",tag:"a",onClick:()=>{g()},className:"float-end",children:"Add Sale Order"})})]})})})," "]})},ds=()=>{const{register:a,control:i,formState:{errors:s},watch:f,setValue:d}=J(),o=f(),{append:p,remove:y,fields:m}=te({name:"invoice",control:i}),g=()=>{p({invoice_no:"",invoice_date:"",invoice_amount:0,payment_terms:"",invoice_attachments:[],temp_attachment_ids:[],order:0})},c=(w,l)=>{d(`invoice.${w}.temp_attachment_ids`,l)},[x,t]=b.useState(),[D,v]=b.useState(),[z,k]=b.useState();b.useEffect(()=>{C("payment_terms"),C("validity"),t(De)},[]);const C=async w=>{let l=[];const r={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.get(`undefined/option/values/${w}`,r).then(h=>{if(h.data.option_values)for(var u=0;u<h.data.option_values.length;u++)l.push(h.data.option_values[u].option_value.toString());switch(w){case"payment_terms":return v([""].concat(l));case"lead_time":return t([""].concat(l));case"validity":return k([""].concat(l))}}).catch(h=>{switch(w){case"payment_terms":return We;case"lead_time":return De;case"validity":return Ie}})};return m.sort((w,l)=>w.order<l.order?-1:w.order>l.order?1:0),e.jsxs("div",{className:"pb-0",children:[e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[m.map((w,l)=>{var r,h,u,N,T,P,O,Y,E,V,H,oe,me,he,je,xe,ue,ve,_e,ge,Ne,be,pe,fe;return e.jsx("div",{className:"col-xl-12",children:e.jsx(L,{id:"invoiceAccordion",color:"dark",activeItemId:"invoiceAccordionItem_"+l,children:e.jsxs(U,{id:"invoiceAccordionItem_"+l,title:"Invoice "+(+l+1),children:[e.jsxs(A,{id:"#invoice_card_id#"+l,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs(M,{children:[e.jsx(q,{children:e.jsxs(R,{tag:"div",className:"h3",children:["Invoice ",l+1,"  "]})}),e.jsx(ae,{children:e.jsx(F,{color:"danger",icon:"Delete",tag:"a",onClick:()=>{y(l)},children:"Delete Invoice"})})]}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"invoice_no",label:"Invoice No.",children:[e.jsx("input",{id:"invoice_no",className:"form-control "+((h=(r=s.invoice)==null?void 0:r[l])!=null&&h.invoice_no?"is-invalid":""),...a(`invoice.${l}.invoice_no`),type:"text",placeholder:"invoice_no"}),e.jsx(e.Fragment,{children:(N=(u=s.invoice)==null?void 0:u[l])!=null&&N.invoice_no?e.jsx("div",{className:"invalid-feedback",children:(P=(T=s.invoice)==null?void 0:T[l])==null?void 0:P.invoice_no.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"invoice_date",label:"Invoice Date.",children:[e.jsx("input",{id:"invoice_date",type:"date",className:"form-control "+((Y=(O=s.invoice)==null?void 0:O[l])!=null&&Y.invoice_date?"is-invalid":""),...a(`invoice.${l}.invoice_date`),placeholder:"invoice_date"}),e.jsx(e.Fragment,{children:(V=(E=s.invoice)==null?void 0:E[l])!=null&&V.invoice_date?e.jsx("div",{className:"invalid-feedback",children:(oe=(H=s.invoice)==null?void 0:H[l])==null?void 0:oe.invoice_date.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"invoice_amount",label:"Invoice Amount.",children:[e.jsx("input",{id:"invoice_amount",className:"form-control "+((he=(me=s.invoice)==null?void 0:me[l])!=null&&he.invoice_amount?"is-invalid":""),...a(`invoice.${l}.invoice_amount`),type:"number",placeholder:"invoice_amount"}),e.jsx(e.Fragment,{children:(xe=(je=s.invoice)==null?void 0:je[l])!=null&&xe.invoice_amount?e.jsx("div",{className:"invalid-feedback",children:(ve=(ue=s.invoice)==null?void 0:ue[l])==null?void 0:ve.invoice_amount.message}):""})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"payment_terms",label:"Payment Terms.",children:[e.jsx("select",{id:"payment_terms",className:"form-control "+((ge=(_e=s.invoice)==null?void 0:_e[l])!=null&&ge.payment_terms?"is-invalid":""),...a(`invoice.${l}.payment_terms`),children:D==null?void 0:D.map(ke=>e.jsx("option",{value:ke,children:ke}))}),e.jsx(e.Fragment,{children:(be=(Ne=s.invoice)==null?void 0:Ne[l])!=null&&be.payment_terms?e.jsx("div",{className:"invalid-feedback",children:(fe=(pe=s.invoice)==null?void 0:pe[l])==null?void 0:fe.payment_terms.message}):""})]})}),e.jsx("div",{className:"col-md-12",children:e.jsx(de,{attachment_type:"purchase_order",attachment_list:o.invoice[l].invoice_attachments?o.invoice[l].invoice_attachments:[],index:l,updateIdsFunc:c})})]})})]},l),e.jsx("div",{className:"col-md-12"})]})})},l)}),e.jsx("div",{children:e.jsx(F,{color:"info",icon:"Add",tag:"a",onClick:()=>{g()},className:"float-end",children:"Add Invoice"})})]})})})," "]})};S.extend(re);S.extend(se);S.extend(ce);S.extend(ne);const os=a=>{const{register:i,formState:{errors:s,isSubmitting:f},watch:d,handleSubmit:o,setValue:p,control:y}=J();d();const m=(c,x="YYYY-MM-DD",t=S.tz.guess())=>S.tz(c,x,t).utc().format("YYYY-MM-DDTHH:mm:ss"),g=async c=>{const x={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.post("undefined/tracking_list/",c,x).then(t=>{ze(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(W,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Tracking Data saved"})]}),"Tracking Data saved successfully"),a.refresh_func()})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",hidden:!a.revision,children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("span",{className:"text-muted",children:["Tracking Revision: ",a.revision]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("span",{className:"text-muted",children:["Last Updated By: ",a.created_by]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("span",{className:"text-muted",children:["Last Updated:"," ",S.utc(`${a.created_at}`).local().format("DD-MM-YYYY HH:mm:ss")]})})]})}),e.jsx("br",{}),e.jsxs("form",{onSubmit:o(async c=>{let x=[],t=[],D=[];for(var v=0;v<c.purchase_order.length;v++){let k=Object.assign({po_no:c.purchase_order[v].po_no,po_date:m(c.purchase_order[v].po_date),po_amount:c.purchase_order[v].po_amount,po_attachments:c.purchase_order[v].temp_attachment_ids,order:v+1});x.push(k)}for(var v=0;v<c.sale_order.length;v++){let C=Object.assign({so_no:c.sale_order[v].so_no,so_date:m(c.sale_order[v].so_date),so_attachments:c.sale_order[v].temp_attachment_ids,order:v+1});t.push(C)}for(var v=0;v<c.invoice.length;v++){let C=Object.assign({invoice_no:c.invoice[v].invoice_no,invoice_date:m(c.invoice[v].invoice_date),invoice_amount:c.invoice[v].invoice_amount,payment_terms:c.invoice[v].payment_terms,po_attachments:c.invoice[v].temp_attachment_ids,order:v+1});D.push(C)}let z={quotation_id:a.quotation_id,remarks:c.remarks,purchase_order:x,sale_order:t,invoice:D};g(z)}),children:[e.jsxs(A,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx(M,{children:e.jsx(q,{children:e.jsx(R,{tag:"div",className:"h5",children:"Purchase Order"})})}),e.jsx($,{className:"pb-0",children:e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx(ns,{})})})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(A,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx(M,{children:e.jsx(q,{children:e.jsx(R,{tag:"div",className:"h5",children:"Sale Order"})})}),e.jsx($,{className:"pb-0",children:e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx(ls,{})})})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(A,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx(M,{children:e.jsx(q,{children:e.jsx(R,{tag:"div",className:"h5",children:"Invoice"})})}),e.jsx($,{className:"pb-0",children:e.jsx("div",{className:"row g-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx(ds,{})})})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(A,{shadow:"none",borderSize:2,borderColor:"light",children:[e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(n,{id:"remarks",label:"Remarks",children:[e.jsx("input",{id:"remarks",className:"form-control "+(s.remarks?"is-invalid":""),...i("remarks"),type:"text",placeholder:"remarks"}),e.jsx(e.Fragment,{children:s.remarks?e.jsx("div",{className:"invalid-feedback",children:s.remarks.message}):""})]})}),e.jsx("div",{className:"col-md-12"})]})}),e.jsx(Q,{children:e.jsx(Oe,{children:e.jsx(F,{color:"success",type:"submit",children:"Save"})})})]})]})]})};S.extend(re);S.extend(se);S.extend(ce);S.extend(ne);const ms=a=>{const i={quotation_id:a.quotation_id,remarks:"",purchase_order:[],sale_order:[],invoice:[]},[s,f]=b.useState(),d=async p=>{const y={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.get(`undefined/tracking_list/quotation/${p}`,y).then(m=>{for(var g=m.data,c=0;c<g.purchase_order.length;c++)g.purchase_order[c].po_date=S.utc(`${g.purchase_order[c].po_date}`).local().format("YYYY-MM-DD");for(var c=0;c<g.sale_order.length;c++)g.sale_order[c].so_date=S.utc(`${g.sale_order[c].so_date}`).local().format("YYYY-MM-DD");for(var c=0;c<g.invoice.length;c++)g.invoice[c].invoice_date=S.utc(`${g.invoice[c].invoice_date}`).local().format("YYYY-MM-DD");f(g)}).catch(m=>{console.log(JSON.stringify(m)),m.status==404&&f(i)})};b.useEffect(()=>{a.quotation_id&&d(a.quotation_id)},[]);const o=async()=>{d(a.quotation_id)};return e.jsx(e.Fragment,{children:s?e.jsx(cs,{data:s,children:e.jsx(os,{tracking_list_id:s.tracking_list_id,quotation_id:s.quotation_id,revision:s.revision,created_by:s.created_by,created_at:s.created_at,refresh_func:o})}):e.jsx(e.Fragment,{})})},hs=a=>{var z;const i=Te(),[s,f]=b.useState(Number(a.variance)),[d,o]=b.useState(a.data[0]);b.useEffect(()=>{if(a.data){const k=a.data.filter(C=>C.variance==s)[0];c(Z[k.status.toUpperCase()])}},[s]);const p="Tracking View",y=(z=d==null?void 0:d.status)==null?void 0:z.toUpperCase();var m=Z[y];m==null&&(m=Z.NONE);const[g,c]=b.useState(m),[x,t]=b.useState("Quotation"),D=k=>{i(`../quotation/edit/${d.quotation_revision_id}`,{state:{create_new_variance:k}})},v=async(k,C,w,l)=>{B.get(`undefined/quotation/${k}/pdf/${C}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{with_watermark:`${l}`}}).then(r=>{ie(r.data,w+".pdf")})};return e.jsx(e.Fragment,{children:e.jsxs(Me,{title:p,children:[e.jsxs(qe,{children:[e.jsxs(Re,{children:[e.jsx(F,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>i(-1),children:"Back"}),e.jsx(ye,{}),e.jsx("strong",{className:"fs-5",children:p}),e.jsx(ye,{}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Quotation No: ",d.quotation_no,"    ",e.jsx(Ae,{className:"statusBadge",color:g.color,children:g.name})]})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Revision: ",d.revision]})})]})]}),e.jsx(Ye,{children:e.jsx(F,{color:"info",onClick:()=>D(!0),children:"Create New Variation"})})]}),e.jsxs(Be,{container:"fluid",children:[e.jsxs(A,{children:[e.jsx(M,{children:e.jsx(q,{children:e.jsx(R,{tag:"div",className:"h3",children:p})})}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(n,{id:"QuotationDate",label:"Quotation Date",isFloating:!0,children:e.jsx(j,{value:d.created_at,disabled:!0})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(n,{id:"client_code",label:"Client Code",isFloating:!0,children:e.jsx(j,{value:d.client_code,disabled:!0})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(n,{id:"client",label:"Client",isFloating:!0,children:e.jsx(j,{value:d.client,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"end_user",label:"End User",isFloating:!0,children:e.jsx(j,{value:d.end_user,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"site_location",label:"Site Location",isFloating:!0,children:e.jsx(j,{value:d.site_location,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"building",label:"Building",isFloating:!0,children:e.jsx(j,{value:d.building,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"pic",label:"PIC",isFloating:!0,children:e.jsx(j,{value:d.pic,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(n,{id:"pic_email",label:"PIC Email",isFloating:!0,children:e.jsx(j,{value:d.pic_email,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"pic_contact_number",label:"PIC Contact No.",isFloating:!0,children:e.jsx(j,{value:d.pic_contact_number,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(n,{id:"project_ref",label:"Project Reference",isFloating:!0,children:e.jsx(j,{value:d.project_reference,disabled:!0})})})]})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsx(A,{children:e.jsxs($,{children:[e.jsxs(Je,{design:"pills",children:[e.jsx(G,{isActive:x=="Quotation",children:e.jsxs(we,{isButtonGroup:!0,children:[e.jsx("div",{className:x=="Quotation"?"btn active nav-link":"btn nav-link",onClick:()=>t("Quotation"),children:s==0?"Quotation":"Variation "+s}),e.jsx(Fe,{children:e.jsx(F,{className:x=="Quotation"?"btn active nav-link":"btn nav-link"})}),e.jsx(Se,{children:a.data.map(k=>e.jsx(X,{onClick:()=>{f(k.variance),t("Quotation")},children:k.variance==0?"Quotation":"Variation "+k.variance}))})]})}),e.jsx(G,{onClick:()=>t("Attachments"),isActive:x=="Attachments",children:e.jsx(F,{children:"Attachments"})}),e.jsx(G,{onClick:()=>t("Revisions"),isActive:x=="Revisions",children:e.jsx(F,{children:"Revisions"})}),e.jsx(G,{onClick:()=>t("TrackingDetails"),isActive:x=="TrackingDetails",children:e.jsx(F,{children:"Tracking Details"})})]}),e.jsx("hr",{}),e.jsx("div",{hidden:x!="Attachments",children:e.jsx(Ke,{quotation_id:a.quotation_id,variance:s})},"attachmentsTab"+s),e.jsx("div",{hidden:x!="Revisions",children:e.jsx(Xe,{quotation_id:a.quotation_id,variance:s})},"revisionsTab"+s),e.jsx("div",{hidden:x!="TrackingDetails",children:e.jsx(ms,{quotation_id:a.quotation_id})},"trackingDetailsTab"),e.jsxs("div",{hidden:x!="Quotation",children:[e.jsxs("div",{className:"row gt-4",children:[e.jsxs("div",{className:"col-md-6 d-flex",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("span",{children:["Quotation No: ",d.quotation_no,"   "]}),e.jsx(Ae,{className:"statusBadge",color:g.color,children:g.name}),"   ",e.jsx("br",{}),e.jsxs("span",{children:["Revision: ",d.revision]})]})}),e.jsxs(we,{children:[e.jsx(Fe,{hasIcon:!1,children:e.jsx(F,{color:"info",isLight:!0,icon:"Download",children:"PDF"})}),e.jsxs(Se,{children:[e.jsx(X,{children:e.jsx("span",{onClick:()=>v(a.quotation_id,d.quotation_revision_id,d.quotation_no,!1),children:"Customer View"})}),e.jsx(X,{onClick:()=>v(a.quotation_id,d.quotation_revision_id,d.quotation_no,!0),children:"Internal View"})]})]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-end",children:e.jsx(F,{color:"info",className:"order-2 float-end",onClick:()=>D(!1),children:"Create Revision"})})]}),e.jsx("br",{}),e.jsx(es,{sections:d.sections})]})]})}),e.jsxs(A,{hidden:x!="Quotation",children:[e.jsx(M,{children:e.jsx(q,{children:e.jsx(R,{tag:"div",className:"h3",children:"Options"})})}),e.jsx($,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"lead_time",label:"Lead Time",children:e.jsx(j,{value:d.lead_time,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"payment_terms",label:"Payment Terms",children:e.jsx(j,{value:d.payment_terms,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"validity",label:"Validity",children:e.jsx(j,{value:d.validity,disabled:!0})})}),e.jsx("div",{})]})}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(A,{hidden:x!="Quotation",children:[e.jsx(M,{children:e.jsx(q,{children:e.jsx(R,{tag:"div",className:"h3",children:"Summary"})})}),e.jsxs($,{className:"pb-0",children:[e.jsx(e.Fragment,{}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-8",children:e.jsx(n,{id:"reference_status",label:"Reference Status",isFloating:!0,children:e.jsx(j,{value:d.reference_status,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total",label:"Total",isFloating:!0,children:e.jsx(j,{value:d.total_cost,disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(n,{id:"note",label:"Note",isFloating:!0,children:e.jsx(j,{value:d.note,disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"g_total",label:"G/Total (RM)",isFloating:!0,children:e.jsx(j,{value:d.grand_total,disabled:!0})})})]})]}),e.jsx(Q,{children:e.jsx(e.Fragment,{})})]})]})]})})},gs=()=>{const{quotation_id:a,variance:i}=Qe(),[s,f]=b.useState(),d=async o=>{const p={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};B.get(`undefined/quotation/latest_revisions/${o}`,p).then(y=>{f(y.data.data)})};return b.useEffect(()=>{f(null),a&&d(a)},[a]),e.jsx(e.Fragment,{children:s?e.jsx(hs,{data:s,variance:i,quotation_id:a}):e.jsx(e.Fragment,{})})};export{gs as default};
