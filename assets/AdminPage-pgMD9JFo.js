import{r as s,u as je,g as ne,j as e,A as ie,C as re,f as le,h as ce,i as de,k as ue,F as N,I as u,l as E,m as I,B as r,n as j,o as De,p as ke,q as Fe,s as Oe,t as oe,v as pe,P as Le,S as Me,b as qe,d as xe,w as ye,a as Te}from"./index-4ESP1Stw.js";import{P as Se,u as ge,d as ve,a as fe}from"./useSortableData-DRr_c_GJ.js";import{M as Ce,a as be,b as Ne,c as we,d as Ae}from"./Modal-BIk_tifv.js";import{u as Be,c as Ve,t as ze}from"./timezone-bAUmmzFt.js";import{S as _e}from"./Select-CU5sG9lJ.js";function P(i){return i?e.jsx(u,{icon:"CheckCircleOutline",className:"",color:"success",size:"2x",forceFamily:"material"}):e.jsx(u,{icon:"Cancel",className:"",color:"danger",size:"2x",forceFamily:"material"})}const Pe=()=>{const i=[{user_id:"1",role:"Admin",name:"John Doe",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"2",role:"Admin",name:"John2",email:"user1@gmail.com",view_quotation:!1,create_edit_quotation:!1,view_mccr:!1,create_edit_mccr:!1},{user_id:"3",role:"Admin",name:"John3",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"4",role:"Admin",name:"John4",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"5",role:"Admin",name:"John5",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"6",role:"Admin",name:"John6",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"7",role:"Admin",name:"John7",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"8",role:"Admin",name:"John8",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"9",role:"Admin",name:"John9",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0},{user_id:"10",role:"User",name:"John10",email:"user1@gmail.com",view_quotation:!0,create_edit_quotation:!0,view_mccr:!0,create_edit_mccr:!0}],[w,A]=s.useState(i);function m(o){const c=w.filter(C=>C.user_id!==o);A(c)}const D=je(),F=()=>{D("manage-user")},[k,O]=s.useState({name:"",id:""}),[U,p]=s.useState(!1),[x,_]=s.useState(!1),[v,l]=s.useState(!1),[Y,S]=s.useState(!1),[R,H]=s.useState(null),[g,J]=s.useState(void 0),[$,G]=s.useState(!0),[me,Q]=s.useState(!1),[L,W]=s.useState(!0),K=()=>{_(!1),l(!1),S(!1),H(null),J(!1),G(!0),Q(!1),W(!0)},[X,M]=s.useState(!1),Z=o=>{m(o),M(!0),setTimeout(()=>{M(!1)},3e3)},[ee,q]=s.useState(i),[y,te]=s.useState(1),[T,ae]=s.useState(Se[5]),{items:B,requestSort:f,getClassNamesFor:V}=ge(ee),z=o=>{const c=o.search.toString().toLowerCase(),C=se(c);o.search?q(C):q(i)},a=ne({initialValues:{search:""},onSubmit:z,onReset:()=>q(i)}),se=o=>i.filter(c=>c.name.toLowerCase().includes(o)||c.role.toLowerCase().includes(o)||c.email.toLowerCase().includes(o));return e.jsxs(e.Fragment,{children:[X&&e.jsx(ie,{color:"success",isLight:!0,icon:"VerifiedUser",isDismissible:!0,children:"Delete Success"}),e.jsxs(re,{stretch:!0,children:[e.jsx(le,{className:"table-responsive",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(ce,{children:e.jsx(de,{children:e.jsx(ue,{tag:"div",className:"h3",children:"User Management"})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(ie,{color:"light",isLight:!0,children:e.jsx("form",{onSubmit:a.handleSubmit,children:e.jsx(N,{children:e.jsxs("div",{className:"d-flex","data-tour":"search",children:[e.jsx("label",{className:"border-0 bg-transparent",children:e.jsx(u,{icon:"Search",size:"2x",color:"primary"})}),e.jsx(E,{id:"search",placeholder:"Search...",className:"border-0 shadow-none bg-transparent",onChange:o=>{a.handleChange(o),o.target.value.length>2&&I(()=>z({...a.values,search:o.target.value}),1e3)(),o.target.value.length===0&&a.resetForm()},value:a.values.search})]})})})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(r,{color:"success",className:"float-end",icon:"Create",tag:"a",children:"Create"})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("table",{className:"table table-modern",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"View Quotation"}),e.jsx("th",{children:"Create / Edit Quotation"}),e.jsx("th",{children:"View MCCR"}),e.jsx("th",{children:"Create / Edit MCCR"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:ve(B,y,T).map((o,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:o.role}),e.jsx("td",{children:o.name}),e.jsx("td",{children:o.email}),e.jsx("td",{children:P(o.view_quotation)}),e.jsx("td",{children:P(o.create_edit_quotation)}),e.jsx("td",{children:P(o.view_mccr)}),e.jsx("td",{children:P(o.create_edit_mccr)}),e.jsx("td",{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-auto",children:e.jsx(r,{color:"primary",icon:"Edit",shadow:"none",hoverShadow:"lg",tag:"a",target:"_blank",onClick:()=>F()})}),e.jsx("div",{className:"col-auto",children:e.jsx(r,{className:"me-4",color:"danger",isLight:!0,icon:"Delete",onClick:()=>{O({name:o.name,id:o.user_id}),K(),S(!0),p(!0)}})})]})})]},o.user_id))})]})})]})}),e.jsx(fe,{data:B,label:"items",setCurrentPage:te,currentPage:y,perPage:T,setPerPage:ae})]}),e.jsxs(Ce,{isOpen:U,setIsOpen:p,titleId:"exampleModalLabel",isStaticBackdrop:x,isScrollable:v,isCentered:Y,size:R,fullScreen:g,isAnimation:$,children:[e.jsx(be,{setIsOpen:L?p:void 0,children:e.jsxs(Ne,{id:"confirmDeleteUserModal",children:["Confirm Delete User - ",k.name]})}),e.jsxs(we,{children:["Confirm to delete ",k.name]}),e.jsxs(Ae,{children:[e.jsx(r,{color:"danger",icon:"Delete",onClick:()=>{p(!1),Z(k.id)},children:"Delete"}),e.jsx(r,{color:"info",isOutline:!0,className:"border-0",onClick:()=>p(!1),children:"Cancel"})]})]})]})};j.extend(Be);j.extend(De);j.extend(Ve);j.extend(ze);const Ee=()=>{const[i,w]=s.useState([]),[A,m]=s.useState(i),D=async()=>{const t={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};oe.get("http://127.0.0.1:5000/option/",t).then(n=>{w(n.data.options),m(n.data.options)})};s.useEffect(()=>{D()},[]);const[F,k]=s.useState(1),[O,U]=s.useState(Se[5]),{items:p,requestSort:x,getClassNamesFor:_}=ge(A),v=t=>{const n=t.search.toString().toLowerCase(),h=t.option_name.toString().toLowerCase(),d=Y(n,h);!t.search&&!t.option_name?m(i):m(d)},l=ne({initialValues:{search:"",option_name:""},onSubmit:v,onReset:()=>m(i)}),Y=(t,n)=>{let h=i;return n&&(h=i.filter(d=>d.option_name.toLowerCase()===n)),h.filter(d=>d.option_name.toLowerCase().includes(t)||d.option_value.toLowerCase().includes(t)||j(`${d.created_at}`).format("DD-MM-YYYY").includes(t)||d.created_by.toLowerCase().includes(t)||j(`${d.updated_at}`).format("DD-MM-YYYY").includes(t)||d.updated_by.toLowerCase().includes(t))},[S,R]=s.useState({option_id:"",option_name:"",option_value:""}),[H,g]=s.useState(!1),[J,$]=s.useState(!1),[G,me]=s.useState(!1),[Q,L]=s.useState(!1),[W,K]=s.useState(null),[X,M]=s.useState(void 0),[Z,ee]=s.useState(!0),[q,y]=s.useState(!1),[te,T]=s.useState(!0),ae=()=>{$(!1),me(!1),L(!1),K(null),M(!1),ee(!0),y(!1),T(!0)},B=t=>{const n={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};oe.delete(`http://127.0.0.1:5000/option/${t}`,n).then(h=>{pe(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(u,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Option Deleted"})]}),"Option deleted successfully"),V(!1),D()}).catch(h=>console.log(h))},[f,V]=s.useState(!1),z=async(t,n)=>{const h={headers:{Authorization:`${localStorage.getItem("bts_token")}`}},d={option_name:t,option_value:n};oe.post("http://127.0.0.1:5000/option/",d,h).then(he=>{pe(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(u,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Option Added"})]}),"Option added successfully"),D(),a.resetForm()}).catch(he=>console.log(he))},a=ne({initialValues:{option_name_dropdown:"",option_name:"",option_value:""},validate:t=>{const n={};return!t.option_name&&!t.option_name_dropdown&&(n.option_name="Required"),t.option_value||(n.option_value="Required"),n},onSubmit:async t=>{const n=t.option_name_dropdown?t.option_name_dropdown:t.option_name;await z(n,t.option_value)}}),se=i.map(t=>t.option_name),o=[...new Set(se)],c=o.map(t=>({value:t,text:t})),C=o.map(t=>({value:t,text:t}));return c.splice(0,0,{value:"",text:"Create New Option"}),C.splice(0,0,{value:"",text:"All Option"}),e.jsxs(e.Fragment,{children:[e.jsxs(re,{hidden:!f,tag:"form",children:[e.jsxs(ce,{children:[e.jsx(de,{children:e.jsx(ue,{tag:"div",className:"h3",children:"Add Options"})}),e.jsx(ke,{children:e.jsx(r,{color:"dark",className:"float-end",icon:"Close",tag:"a",isLight:!0,onClick:()=>{a.resetForm(),V(!1),l.resetForm()}})})]}),e.jsx(le,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:a.values.option_name_dropdown==""?"col-md-2":"col-md-4",children:e.jsx(N,{id:"option_name_dropdown",label:a.values.option_name_dropdown==""?"":"Option Name",isFloating:!0,children:e.jsx(_e,{id:"OptionNameSelect",ariaLabel:"Default select option name",value:a.values.option_name_dropdown,list:c,onBlur:a.handleBlur,isValid:a.isValid,isTouched:a.touched.option_name_dropdown,invalidFeedback:a.errors.option_name_dropdown,onChange:t=>{a.handleChange(t),I(()=>v({...l.values,option_name:t.target.value}),1e3)()}})})}),e.jsx("div",{className:"col-md-4",hidden:a.values.option_name_dropdown!="",children:e.jsx(N,{id:"option_name",label:"Option Name",isFloating:!0,children:e.jsx(E,{placeholder:"Option Name",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.option_name,isValid:a.isValid,isTouched:a.touched.option_name,invalidFeedback:a.errors.option_name,validFeedback:"Valid Option Name"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(N,{id:"option_value",label:"Option Value",isFloating:!0,children:e.jsx(E,{placeholder:"Option Value",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.option_value,isValid:a.isValid,isTouched:a.touched.option_value,invalidFeedback:a.errors.option_value,validFeedback:"Valid Option Value"})})}),e.jsx("div",{className:"col-md-12"})]})}),e.jsx(Fe,{children:e.jsx(Oe,{children:e.jsx(r,{color:"success",className:"float-end",icon:"Add",tag:"a",onClick:a.handleSubmit,children:"Add"})})})]}),e.jsxs(re,{children:[e.jsx(le,{children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",hidden:f,children:e.jsx(ce,{children:e.jsx(de,{children:e.jsx(ue,{tag:"div",className:"h3",children:"Manage Options"})})})}),e.jsx("div",{className:"col-md-2",hidden:f,children:e.jsx(N,{id:"option_name_dropdown",label:a.values.option_name_dropdown==""?"":"Option Name",isFloating:!0,children:e.jsx(_e,{id:"OptionNameSelect",ariaLabel:"Default select option name",value:a.values.option_name_dropdown,list:C,isTouched:a.touched.option_name_dropdown,onChange:t=>{a.handleChange(t),I(()=>v({...l.values,option_name:t.target.value,search:l.values.search}),1e3)()}})})}),e.jsx("div",{className:"col-md-4",hidden:f,children:e.jsx(ie,{color:"light",isLight:!0,children:e.jsx("form",{onSubmit:l.handleSubmit,children:e.jsx(N,{children:e.jsxs("div",{className:"d-flex","data-tour":"search",children:[e.jsx("label",{className:"border-0 bg-transparent",children:e.jsx(u,{icon:"Search",size:"2x",color:"primary"})}),e.jsx(E,{id:"search",placeholder:"Search...",className:"border-0 shadow-none bg-transparent",onChange:t=>{l.handleChange(t),t.target.value.length>2&&I(()=>v({...l.values,search:t.target.value,option_name:a.values.option_name_dropdown}),1e3)(),t.target.value.length===0&&l.resetForm()},value:l.values.search})]})})})})}),e.jsx("div",{className:"col-md-3",hidden:f,children:e.jsx(r,{color:"primary",className:"float-end",icon:"Add",tag:"a",onClick:()=>{V(!0),l.resetForm()},children:"Add"})}),e.jsx("div",{className:"col-md-12"}),e.jsx("div",{className:"col-md-12",children:e.jsxs("table",{className:"table table-modern",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsxs("th",{onClick:()=>x("option_name"),className:"cursor-pointer text-decoration-underline",children:["Option Name",e.jsx(u,{size:"lg",className:_("option_name"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("option_value"),className:"cursor-pointer text-decoration-underline",children:["Option Value",e.jsx(u,{size:"lg",className:_("option_value"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("created_at"),className:"cursor-pointer text-decoration-underline",children:["Created Datetime",e.jsx(u,{size:"lg",className:_("created_at"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("created_by"),className:"cursor-pointer text-decoration-underline",children:["Created By",e.jsx(u,{size:"lg",className:_("created_by"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("updated_at"),className:"cursor-pointer text-decoration-underline",children:["Updated Datetime",e.jsx(u,{size:"lg",className:_("updated_at"),icon:"FilterList"})]}),e.jsxs("th",{onClick:()=>x("updated_by"),className:"cursor-pointer text-decoration-underline",children:["Updated By",e.jsx(u,{size:"lg",className:_("updated_by"),icon:"FilterList"})]}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:ve(p,F,O).map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:n+1}),e.jsx("td",{children:t.option_name}),e.jsx("td",{children:t.option_value}),e.jsx("td",{children:j.utc(`${t.created_at}`).local().format("DD-MM-YYYY HH:mm:ss")}),e.jsx("td",{children:t.created_by}),e.jsx("td",{children:j.utc(`${t.updated_at}`).local().format("DD-MM-YYYY HH:mm:ss")}),e.jsx("td",{children:t.updated_by}),e.jsx("td",{children:e.jsx(r,{className:"me-4",color:"danger",isLight:!0,icon:"Delete",onClick:()=>{R({option_id:t.option_id,option_name:t.option_name,option_value:t.option_value}),ae(),L(!0),g(!0)}})})]},t.option_id))})]})})]})}),e.jsx(fe,{data:p,label:"items",setCurrentPage:k,currentPage:F,perPage:O,setPerPage:U})]}),e.jsxs(Ce,{isOpen:H,setIsOpen:g,titleId:"exampleModalLabel",isStaticBackdrop:J,isScrollable:G,isCentered:Q,size:W,fullScreen:X,isAnimation:Z,children:[e.jsx(be,{setIsOpen:te?g:void 0,children:e.jsxs(Ne,{id:"confirmDeleteUserModal",children:["Confirm Delete:",S.option_value]})}),e.jsx(we,{children:e.jsxs("p",{children:["Option Name: ",S.option_name," ",e.jsx("br",{})," Option Value:"," ",S.option_value]})}),e.jsxs(Ae,{children:[e.jsx(r,{color:"danger",icon:"Delete",onClick:()=>{g(!1),B(S.option_id)},children:"Delete"}),e.jsx(r,{color:"info",isOutline:!0,className:"border-0",onClick:()=>g(!1),children:"Cancel"})]})]})]})},b={USER_MANAGEMENT:"User Management",MANAGE_OPTIONS:"Manage Options"},Je=()=>{const[i,w]=s.useState(b.USER_MANAGEMENT),A=je();return e.jsxs(Le,{title:"Admin",children:[e.jsx(Me,{children:e.jsxs(qe,{children:[e.jsx(r,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>A(-1),children:"Back"}),e.jsx(xe,{}),e.jsx("strong",{className:"fs-5",children:"Admin"}),e.jsx(xe,{}),e.jsx(ye,{children:Object.keys(b).map(m=>e.jsx(r,{color:i===b[m]?"success":"light",onClick:()=>w(b[m]),children:b[m]},m))})]})}),e.jsx(Te,{container:"fluid",children:i==b.USER_MANAGEMENT?e.jsx(Pe,{}):e.jsx(Ee,{})})]})};export{Je as default};
