import{j as e,r as N,C as G,q as Se,s as Ce,t as Me,f as W,I as ii,k as oi,N as ni,B as w,G as ti,x as z,z as ci,D as pt,o as xt,E as vt,F as h,H as gt,O as mi,Q as hi,R as ui,U as ai,P as $t,S as yt,b as wt,d as dt,e as kt,a as Ft,Y as mt,y as St}from"./index-ClVttQaI.js";import{z as o,F as Ct,u as Mt,t as qt,b as At,p as ht,c as Vt,P as Dt,f as ji,d as _i,A as xi,a as vi,e as ut,g as Pt,h as Rt,N as Lt,i as ri}from"./getDefaultOptions-BG9vTx75.js";import{Q as se,B as jt}from"./enumQuotationStatus-B_a3H9gn.js";import{u as zt,c as Et,t as Tt}from"./timezone-B9lglhid.js";import{b as ft,d as Ne,c as qe,a as Ae,e as Nt,f as bt,g as Bt}from"./calculations-CG2cx_7e.js";const Qt=o.object({product_description:o.string().min(3),brand:o.string(),model:o.string(),remarks:o.string(),quantity:o.coerce.number().int().min(0),unit:o.string(),unit_cost:o.coerce.number().min(0),total_cost:o.coerce.number().min(0),margin:o.coerce.number(),margin_percentage:o.coerce.number(),estimated_cost:o.boolean(),unit_price:o.coerce.number().min(0),total_price:o.coerce.number().min(0),order:o.number()}),Ut=o.object({product_description:o.string().min(3),brand:o.string(),model:o.string(),remarks:o.string(),quantity:o.coerce.number().int().min(0),unit:o.string(),unit_cost:o.coerce.number().min(0),total_cost:o.coerce.number().min(0),margin:o.coerce.number(),margin_percentage:o.coerce.number(),estimated_cost:o.boolean(),unit_price:o.coerce.number().min(0),total_price:o.coerce.number().min(0),order:o.number(),sub_items:o.array(Qt)}),Ot=o.object({name:o.string().min(3),order:o.number(),items:o.array(Ut).min(1,{message:"must contain at least one item."}),is_section_valid:o.boolean()}),Ht=o.object({client:o.string().min(3),client_code:o.string().min(3),end_user:o.string().min(3),site_location:o.string().min(3),building:o.string().min(3),pic:o.string().min(3),pic_email:o.string().email(),pic_contact_number:o.string().min(3),project_reference:o.string(),status:o.string().min(3),reference_status:o.string(),note:o.string(),total_cost:o.coerce.number().min(0),grand_total:o.coerce.number().min(0),sst:o.coerce.number().min(0).max(100),discount:o.coerce.number().min(0),sections:o.array(Ot),lead_time:o.string(),payment_terms:o.string(),validity:o.string()}),Jt=t=>Mt({mode:"onChange",resolver:qt(Ht),defaultValues:{client:t.data.client,client_code:t.data.client_code,end_user:t.data.end_user,site_location:t.data.site_location,building:t.data.building,pic:t.data.pic,pic_email:t.data.pic_email,pic_contact_number:t.data.pic_contact_number,project_reference:t.data.project_reference,status:t.data.status,sections:t.data.sections.sort((s,i)=>s.order<i.order?-1:s.order>i.order?1:0),reference_status:t.data.reference_status,note:t.data.note,total_cost:t.data.total_cost,grand_total:t.data.grand_total,sst:t.data.sst,discount:t.data.discount,lead_time:t.data.lead_time,payment_terms:t.data.payment_terms,validity:t.data.validity}}),ta=t=>{const s=Jt(t);return e.jsx(Ct,{...s,children:t.children})},li=()=>At(),di=10,Yt=t=>{const[s,i]=N.useState([]),g=async n=>{const j={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};z.get(`undefined/quotation/${n}/attachments`,j).then(v=>{i(v.data.attachments)})};N.useEffect(()=>{t.quotation_rev_id&&g(t.quotation_rev_id)},[]);const x=async(n,j)=>{z.get(`undefined/quotation/attachment/${n}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(v=>{ji(v.data,j)})},d=n=>{let j=s.filter(v=>v.id!=n);i(j)},[r,b]=N.useState([]),[m,f]=N.useState([]),[C,u]=N.useState(!1),$=async n=>{var j=new FormData;j.append("file",n);var v={onUploadProgress:function(y){const V=y.total&&y.loaded?Math.round(y.loaded*100/y.total):0;b(M=>{const D=[...M];return D.map(L=>L.name==n.name?L.upload_percent=V:null),D})},headers:{Authorization:`${localStorage.getItem("bts_token")}`}};z.post("undefined/quotation/attachment",j,v).then(function(y){const V=y.data.attachment_id;b(M=>{const D=[...M];return D.map(L=>L.name==n.name?L.upload_id=V:null),D})}).catch(function(y){b(V=>{const M=[...V];return M.map(D=>D.name==n.name?D.upload_error="Error":null),M})})},a=N.useCallback((n,j)=>{n!=null&&n.length&&(b(v=>[...v,...n.map(y=>Object.assign(y,{preview:ht,upload_percent:0,upload_id:"",upload_error:""}))]),n.map(v=>$(v))),j!=null&&j.length&&f(v=>[...v,...j])},[]),{getRootProps:c,getInputProps:p,isDragActive:A}=Vt({accept:{"application/*":[".pdf"]},maxSize:1024*1500,maxFiles:di-r.length,disabled:C,onDrop:a});N.useEffect(()=>()=>r.forEach(n=>URL.revokeObjectURL(n.preview)),[r]),N.useEffect(()=>{let j=r.filter(y=>y.upload_percent==100&&y.upload_id&&!y.upload_error).map(y=>y.upload_id),v=s.map(y=>y.id);t.setAttachmentIds([...j,...v])},[r,s]),N.useEffect(()=>{r.length+s.length>=di?u(!0):u(!1)},[r.length+s.length]);const F=n=>{b(j=>j.filter(v=>v.name!==n))},E=n=>{f(j=>j.filter(({file:v})=>v.name!==n))},T=()=>{b([]),f([])};function P(n,j=2){if(!+n)return"0 Bytes";const v=1024,y=j<0?0:j,V=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],M=Math.floor(Math.log(n)/Math.log(v));return`${parseFloat((n/Math.pow(v,M)).toFixed(y))} ${V[M]}`}return e.jsxs(G,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:e.jsxs(Me,{tag:"div",className:"h3",children:["Upload PDF"," ",r!=null&&r.length||s!=null&&s.length?" - "+((r==null?void 0:r.length)+(s==null?void 0:s.length))+"/"+di:""]})})}),e.jsx(W,{className:"pb-0",children:e.jsxs("div",{className:"row g-4 ",children:[e.jsxs("div",{hidden:C||t.isViewMode,...c({className:t.className}),children:[e.jsx("input",{...p()}),e.jsx("div",{className:"border border-2 border-light border d-flex justify-content-center align-items-center",style:{height:150},children:e.jsxs("p",{className:"lead",children:[e.jsx(ii,{icon:"Upload",size:"2x"}),A?"Drop the files here ...":"Drag & drop files here, or click to select files"]})})]}),s.map(n=>{var j;return e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(G,{borderColor:"success",className:"shadow-none border border-2 rounded-2",children:e.jsx(W,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:oi("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:ht,alt:n.filename,width:50})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},onClick:()=>x(n.id,n.filename),children:e.jsx(ni,{title:n.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:n.filename})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:(j=n.filename.split(".").pop())==null?void 0:j.toUpperCase()})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:P(n.size)})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>d(n.id),hidden:t.isViewMode})})})})]})})})})},n.id)}),r.map(n=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(G,{borderColor:n.upload_error?"danger":n.upload_percent!=100?"info":"success",className:"shadow-none border border-2 rounded-2",children:e.jsx(W,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:oi("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx("img",{src:n.preview,alt:n.name,width:50,onLoad:()=>{URL.revokeObjectURL(n.preview)}})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(ni,{title:n.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:n.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:n.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:P(n.size)})}),e.jsx("div",{className:"col-12",children:n.upload_error?e.jsx("div",{className:"text-danger",children:n.upload_error}):n.upload_percent!=100?e.jsx(Dt,{isAnimated:!0,value:n.upload_percent,max:100,color:"success",height:"0.5rem"}):e.jsxs("div",{className:"text-success",children:[e.jsx(ii,{icon:"Check",size:"lg",color:"success"})," ","Uploaded"]})})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>F(n.name)})})})})]})})})})},n.name)),m.map(({file:n,errors:j})=>e.jsx("div",{className:"col-xl-3 col-lg-6 col-md-12",children:e.jsx(G,{borderColor:"danger",className:"shadow-none border border-2 rounded-2",children:e.jsx(W,{children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"ratio ratio-1x1",style:{width:60},children:e.jsx("div",{className:oi("d-flex align-items-center justify-content-center","overflow-hidden"),children:e.jsx(ii,{icon:"ErrorOutline",size:"4x",color:"danger"})})})})}),e.jsx("div",{className:"flex-grow-1 ms-3 d-flex justify-content-between",children:e.jsx("div",{className:"w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"fw-bold text-truncate",style:{maxWidth:"10rem"},children:e.jsx(ni,{title:n.name,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:n.name})})}),e.jsx("div",{})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:n.type})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-muted",children:P(n.size)})}),e.jsx("div",{className:"col-12",children:j.map(v=>e.jsx("div",{className:"text-danger",children:v.message}))})]})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"position-relative",children:e.jsx("div",{className:"float-end",children:e.jsx(w,{color:"dark",isLight:!0,icon:"Close",size:"sm",rounded:1,onClick:()=>E(n.name)})})})})]})})})})})),e.jsx("div",{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",hidden:!(r.length>0||m.length>0),onClick:T,isLight:!0,children:"Remove all files"})})]})}),e.jsx(ti,{children:e.jsx(e.Fragment,{})})]})};ci.extend(zt);ci.extend(pt);ci.extend(Et);ci.extend(Tt);const Gt=t=>{xt();const[s,i]=N.useState([]),g=async(d,r)=>{const b={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${r}`}};z.get(`undefined/quotation/revisions/${d}`,b).then(m=>{i(m.data.data)})};N.useEffect(()=>{g(t.quotation_id,t.variance)},[]);const x=d=>ci.utc(d).local().format("YYYY-MMM-DD HH:mm:ss");return e.jsx(e.Fragment,{children:s.map(d=>e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/quotation/view/"+d.quotation_revision_id,target:"_blank",children:["Revision ",d.revision]},d.quotation_revision_id)," - Created at: ",x(d.created_at),e.jsx("br",{})]}))})},Wt=t=>{const[s,i]=N.useState([]),[g,x]=N.useState([]),d=async(m,f)=>{const C={headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{variance:`${f}`}};z.get(`undefined/quotation/revisions/${m}`,C).then(u=>{i(u.data.data)})};N.useEffect(()=>{d(t.quotation_id,t.variance),s.map(m=>r(m.quotation_revision_id))},[s.length]);const r=async m=>{const f={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};z.get(`undefined/quotation/${m}/attachments`,f).then(C=>{if(C.data.attachments){const u=Object.assign({data:s.filter($=>$.quotation_revision_id==m)[0],attachment_list:C.data.attachments});g==null||g.push(u)}})},b=async(m,f)=>{z.get(`undefined/quotation/attachment/${m}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`}}).then(C=>{ji(C.data,f)})};return e.jsx(e.Fragment,{children:g.map(m=>e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/quotation/view/"+m.data.quotation_revision_id,target:"_blank",children:["Revision ",m.data.revision]}),e.jsx("br",{}),m.attachment_list&&m.attachment_list.map(f=>e.jsxs("li",{children:[e.jsx("span",{onClick:()=>b(f.id,f.filename),children:e.jsx(ni,{title:f.filename,flip:["auto"],children:e.jsx("a",{style:{cursor:"pointer"},children:f.filename})})}),e.jsx("br",{})]},f.id))]}))})},Kt=t=>{const s=t.itemIndex,i=t.sectionIndex,{register:g,control:x,formState:{errors:d},setValue:r,watch:b}=li(),m=b(),{append:f,remove:C,fields:u}=_i({name:`sections.${i}.items.${s}.sub_items`,control:x}),$=()=>{f({product_description:"",brand:"",model:"",remarks:"",quantity:0,unit:"",unit_cost:0,total_cost:0,margin:0,margin_percentage:0,estimated_cost:!1,unit_price:0,total_price:0,order:0})};return N.useEffect(()=>{m.sections[i].items[s].sub_items.map((a,c)=>{r(`sections.${i}.items.${s}.sub_items.${c}.total_cost`,ft(a.unit_cost,a.quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,Ne(a.unit_price,a.quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.margin`,qe(a.unit_cost,a.unit_price)),r(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`,Ae(a.unit_cost,a.unit_price))})},[JSON.stringify(m.sections[i].items[s].sub_items.map(a=>a.quantity+a.unit_cost))]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-md-12",hidden:!!(t.isViewMode||u.length>0),children:[e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:$,className:"float-end",children:"Add Sub Item"}),e.jsx("br",{}),e.jsx("br",{})]}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(xi,{id:"SubItemAccordion",color:"dark",activeItemId:"SubItemAccordionItem_"+s,children:e.jsx(vi,{id:"SubItemAccordionItem_"+s,title:"Sub Items",children:u.map((a,c)=>{var p,A,F,E,T,P,n,j,v,y,V,M,D,L,K,ie,X,be,Z,pe,te,R,I,ae,ce,$e,ee,ye,we,ke,ne,le,oe,re,l,_,S,k,q,Ve,De,Pe,Re,Le,ze,Ee,Te,Be,Qe,Ue,Oe,He,Je,Ye,Ge,We,Ke,Xe,Ze,Ie,es,ss,is,ts,as,cs,ns,ls,os,rs,ds,ms,hs,us,js,_s,xs,vs,gs,fs,Ns,bs,ps,$s,ys,ws,ks,Fs,Ss,Cs,Ms,qs,As,Vs,Ds,Ps,Rs,Ls,zs,Es,Ts,Bs,Qs,Us,Os,Hs,Js,Ys,Gs,Ws,Ks,Xs,Y,B,Q,U,O,H,J,de,me,he,ue,gi,fi,Ni,bi,pi,$i,yi,wi,ki,Fi,Si,Ci,Mi,qi,Ai,Vi,Di,Pi,Ri,Li,zi,Ei,Ti,Bi,Qi,Ui,Oi,Hi,Ji,Yi,Gi,Wi,Ki,Xi,Zi,Ii,et,st,it,tt,at,ct,nt,lt,ot,rt;return e.jsxs(G,{shadow:"none",borderColor:"light",borderSize:1,children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:e.jsxs(Me,{tag:"div",className:"h3",children:[t.sectionMode==!0?`${i+1}.${s+1}.${c+1}  Sub Item ${c+1}`:`${i+1}.${c+1}   Sub Item ${c+1}`,"  "]})}),e.jsx(vt,{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",hidden:t.isViewMode,onClick:()=>{C(c)},children:"Delete Sub Item"})})]}),e.jsx(W,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs(h,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:[e.jsx("input",{id:"product_desc",className:"form-control "+((P=(T=(E=(F=(A=(p=d.sections)==null?void 0:p[i])==null?void 0:A.items)==null?void 0:F[s])==null?void 0:E.sub_items)==null?void 0:T[c])!=null&&P.product_description?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.product_description`),type:"text",placeholder:"product_desc",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(D=(M=(V=(y=(v=(j=(n=d.sections)==null?void 0:n[i])==null?void 0:j.items)==null?void 0:v[s])==null?void 0:y.sub_items)==null?void 0:V[c])==null?void 0:M.product_description)==null?void 0:D.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"brand",label:"Brand",isFloating:!0,children:[e.jsx("input",{id:"brand",className:"form-control "+((Z=(be=(X=(ie=(K=(L=d.sections)==null?void 0:L[i])==null?void 0:K.items)==null?void 0:ie[s])==null?void 0:X.sub_items)==null?void 0:be[c])!=null&&Z.brand?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.brand`),type:"text",placeholder:"brand",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:($e=(ce=(ae=(I=(R=(te=(pe=d.sections)==null?void 0:pe[i])==null?void 0:te.items)==null?void 0:R[s])==null?void 0:I.sub_items)==null?void 0:ae[c])==null?void 0:ce.brand)==null?void 0:$e.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"model",label:"Model",isFloating:!0,children:[e.jsx("input",{id:"model",className:"form-control "+((le=(ne=(ke=(we=(ye=(ee=d.sections)==null?void 0:ee[i])==null?void 0:ye.items)==null?void 0:we[s])==null?void 0:ke.sub_items)==null?void 0:ne[c])!=null&&le.model?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.model`),type:"text",placeholder:"model",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(q=(k=(S=(_=(l=(re=(oe=d.sections)==null?void 0:oe[i])==null?void 0:re.items)==null?void 0:l[s])==null?void 0:_.sub_items)==null?void 0:S[c])==null?void 0:k.model)==null?void 0:q.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"remarks",label:"Remarks",isFloating:!0,children:[e.jsx("input",{id:"remarks",className:"form-control "+((ze=(Le=(Re=(Pe=(De=(Ve=d.sections)==null?void 0:Ve[i])==null?void 0:De.items)==null?void 0:Pe[s])==null?void 0:Re.sub_items)==null?void 0:Le[c])!=null&&ze.remarks?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.remarks`),type:"text",placeholder:"remarks",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(He=(Oe=(Ue=(Qe=(Be=(Te=(Ee=d.sections)==null?void 0:Ee[i])==null?void 0:Te.items)==null?void 0:Be[s])==null?void 0:Qe.sub_items)==null?void 0:Ue[c])==null?void 0:Oe.remarks)==null?void 0:He.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"quantity",label:"Quantity",isFloating:!0,children:[e.jsx("input",{id:"quantity",className:"form-control "+((Xe=(Ke=(We=(Ge=(Ye=(Je=d.sections)==null?void 0:Je[i])==null?void 0:Ye.items)==null?void 0:Ge[s])==null?void 0:We.sub_items)==null?void 0:Ke[c])!=null&&Xe.quantity?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.quantity`),type:"text",placeholder:"quantity",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(as=(ts=(is=(ss=(es=(Ie=(Ze=d.sections)==null?void 0:Ze[i])==null?void 0:Ie.items)==null?void 0:es[s])==null?void 0:ss.sub_items)==null?void 0:is[c])==null?void 0:ts.quantity)==null?void 0:as.message})]})}),e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"unit",label:"Unit",isFloating:!0,children:[e.jsx("input",{id:"unit",className:"form-control "+((ds=(rs=(os=(ls=(ns=(cs=d.sections)==null?void 0:cs[i])==null?void 0:ns.items)==null?void 0:ls[s])==null?void 0:os.sub_items)==null?void 0:rs[c])!=null&&ds.unit?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.unit`),type:"text",placeholder:"unit",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(vs=(xs=(_s=(js=(us=(hs=(ms=d.sections)==null?void 0:ms[i])==null?void 0:hs.items)==null?void 0:us[s])==null?void 0:js.sub_items)==null?void 0:_s[c])==null?void 0:xs.unit)==null?void 0:vs.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:[e.jsx("input",{id:"unit_cost",className:"form-control "+(($s=(ps=(bs=(Ns=(fs=(gs=d.sections)==null?void 0:gs[i])==null?void 0:fs.items)==null?void 0:Ns[s])==null?void 0:bs.sub_items)==null?void 0:ps[c])!=null&&$s.unit_cost?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.unit_cost`),type:"text",placeholder:"unit_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Ms=(Cs=(Ss=(Fs=(ks=(ws=(ys=d.sections)==null?void 0:ys[i])==null?void 0:ws.items)==null?void 0:ks[s])==null?void 0:Fs.sub_items)==null?void 0:Ss[c])==null?void 0:Cs.unit_cost)==null?void 0:Ms.message})]})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsxs(h,{id:"estimated_cost",label:"Estimated Cost",className:"form-check form-check-inline",children:[e.jsx("input",{id:"estimated_cost",className:"form-check-input "+((Rs=(Ps=(Ds=(Vs=(As=(qs=d.sections)==null?void 0:qs[i])==null?void 0:As.items)==null?void 0:Vs[s])==null?void 0:Ds.sub_items)==null?void 0:Ps[c])!=null&&Rs.estimated_cost?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.estimated_cost`),type:"checkbox",placeholder:"estimated_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Us=(Qs=(Bs=(Ts=(Es=(zs=(Ls=d.sections)==null?void 0:Ls[i])==null?void 0:zs.items)==null?void 0:Es[s])==null?void 0:Ts.sub_items)==null?void 0:Bs[c])==null?void 0:Qs.estimated_cost)==null?void 0:Us.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_cost",label:"Total Cost",isFloating:!0,children:[e.jsx("input",{id:"total_cost",className:"form-control "+((Ws=(Gs=(Ys=(Js=(Hs=(Os=d.sections)==null?void 0:Os[i])==null?void 0:Hs.items)==null?void 0:Js[s])==null?void 0:Ys.sub_items)==null?void 0:Gs[c])!=null&&Ws.total_cost?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.total_cost`),type:"text",placeholder:"total_cost",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(O=(U=(Q=(B=(Y=(Xs=(Ks=d.sections)==null?void 0:Ks[i])==null?void 0:Xs.items)==null?void 0:Y[s])==null?void 0:B.sub_items)==null?void 0:Q[c])==null?void 0:U.total_cost)==null?void 0:O.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"margin",label:"Margin",isFloating:!0,children:[e.jsx("input",{id:"margin",className:"form-control "+((ue=(he=(me=(de=(J=(H=d.sections)==null?void 0:H[i])==null?void 0:J.items)==null?void 0:de[s])==null?void 0:me.sub_items)==null?void 0:he[c])!=null&&ue.margin?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.margin`),type:"text",placeholder:"margin",disabled:t.isViewMode,onChange:Fe=>{var je,_e,xe,ve,ge,fe,Zs,Is,ei,si;r(`sections.${i}.items.${s}.sub_items.${c}.unit_price`,Nt((_e=(je=m.sections)==null?void 0:je[i])==null?void 0:_e.items[s].sub_items[c].unit_cost,parseFloat(Fe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,Ne((ve=(xe=m.sections)==null?void 0:xe[i])==null?void 0:ve.items[s].sub_items[c].unit_price,(fe=(ge=m.sections)==null?void 0:ge[i])==null?void 0:fe.items[s].sub_items[c].quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`,Ae((Is=(Zs=m.sections)==null?void 0:Zs[i])==null?void 0:Is.items[s].sub_items[c].unit_cost,(si=(ei=m.sections)==null?void 0:ei[i])==null?void 0:si.items[s].sub_items[c].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(yi=($i=(pi=(bi=(Ni=(fi=(gi=d.sections)==null?void 0:gi[i])==null?void 0:fi.items)==null?void 0:Ni[s])==null?void 0:bi.sub_items)==null?void 0:pi[c])==null?void 0:$i.margin)==null?void 0:yi.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:[e.jsx("input",{id:"margin_percentage",className:"form-control "+((Mi=(Ci=(Si=(Fi=(ki=(wi=d.sections)==null?void 0:wi[i])==null?void 0:ki.items)==null?void 0:Fi[s])==null?void 0:Si.sub_items)==null?void 0:Ci[c])!=null&&Mi.margin_percentage?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`),type:"text",placeholder:"margin_percentage",disabled:t.isViewMode,onChange:Fe=>{var je,_e,xe,ve,ge,fe,Zs,Is,ei,si;r(`sections.${i}.items.${s}.sub_items.${c}.unit_price`,bt((_e=(je=m.sections)==null?void 0:je[i])==null?void 0:_e.items[s].sub_items[c].unit_cost,parseFloat(Fe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,Ne((ve=(xe=m.sections)==null?void 0:xe[i])==null?void 0:ve.items[s].sub_items[c].unit_price,(fe=(ge=m.sections)==null?void 0:ge[i])==null?void 0:fe.items[s].sub_items[c].quantity)),r(`sections.${i}.items.${s}.sub_items.${c}.margin`,qe((Is=(Zs=m.sections)==null?void 0:Zs[i])==null?void 0:Is.items[s].sub_items[c].unit_cost,(si=(ei=m.sections)==null?void 0:ei[i])==null?void 0:si.items[s].sub_items[c].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(Li=(Ri=(Pi=(Di=(Vi=(Ai=(qi=d.sections)==null?void 0:qi[i])==null?void 0:Ai.items)==null?void 0:Vi[s])==null?void 0:Di.sub_items)==null?void 0:Pi[c])==null?void 0:Ri.margin_percentage)==null?void 0:Li.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"unit_price",className:"form-control "+((Ui=(Qi=(Bi=(Ti=(Ei=(zi=d.sections)==null?void 0:zi[i])==null?void 0:Ei.items)==null?void 0:Ti[s])==null?void 0:Bi.sub_items)==null?void 0:Qi[c])!=null&&Ui.unit_price?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.unit_price`),type:"text",placeholder:"unit_price",disabled:t.isViewMode,onChange:Fe=>{var je,_e,xe,ve,ge,fe;r(`sections.${i}.items.${s}.sub_items.${c}.margin`,qe((_e=(je=m.sections)==null?void 0:je[i])==null?void 0:_e.items[s].sub_items[c].unit_cost,parseFloat(Fe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.margin_percentage`,Ae((ve=(xe=m.sections)==null?void 0:xe[i])==null?void 0:ve.items[s].sub_items[c].unit_cost,parseFloat(Fe.target.value))),r(`sections.${i}.items.${s}.sub_items.${c}.total_price`,Ne(parseFloat(Fe.target.value),(fe=(ge=m.sections)==null?void 0:ge[i])==null?void 0:fe.items[s].sub_items[c].quantity))}}),e.jsx("div",{className:"invalid-feedback",children:(Ki=(Wi=(Gi=(Yi=(Ji=(Hi=(Oi=d.sections)==null?void 0:Oi[i])==null?void 0:Hi.items)==null?void 0:Ji[s])==null?void 0:Yi.sub_items)==null?void 0:Gi[c])==null?void 0:Wi.unit_price)==null?void 0:Ki.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"total_price",className:"form-control "+((it=(st=(et=(Ii=(Zi=(Xi=d.sections)==null?void 0:Xi[i])==null?void 0:Zi.items)==null?void 0:Ii[s])==null?void 0:et.sub_items)==null?void 0:st[c])!=null&&it.total_price?"is-invalid":""),...g(`sections.${i}.items.${s}.sub_items.${c}.total_price`),type:"text",placeholder:"total_price",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(rt=(ot=(lt=(nt=(ct=(at=(tt=d.sections)==null?void 0:tt[i])==null?void 0:at.items)==null?void 0:ct[s])==null?void 0:nt.sub_items)==null?void 0:lt[c])==null?void 0:ot.total_price)==null?void 0:rt.message})]})}),e.jsx("div",{className:"col-md-12"})]})}),e.jsx(ti,{children:e.jsx(gt,{children:e.jsx(w,{color:"info",icon:"Add",tag:"a",hidden:t.isViewMode,onClick:$,children:"Add Sub-Item"})})})]},a.id)})})}),e.jsx("br",{})]})]})},_t=t=>{const s=t.sectionIndex,{register:i,control:g,formState:{errors:x},watch:d,setValue:r}=li(),b=d(),{append:m,remove:f,fields:C}=_i({name:`sections.${s}.items`,control:g}),u=()=>{m({product_description:"",brand:"",model:"",remarks:"",quantity:0,unit:"",unit_cost:0,total_cost:0,margin:0,margin_percentage:0,estimated_cost:!1,unit_price:0,total_price:0,order:0,sub_items:[]})};return N.useEffect(()=>{b.sections[s].items.map(($,a)=>{r(`sections.${s}.items.${a}.total_cost`,ft($.unit_cost,$.quantity)),r(`sections.${s}.items.${a}.total_price`,Ne($.unit_price,$.quantity)),r(`sections.${s}.items.${a}.margin`,qe($.unit_cost,$.unit_price)),r(`sections.${s}.items.${a}.margin_percentage`,Ae($.unit_cost,$.unit_price))})},[JSON.stringify(b.sections[s].items.map($=>$.quantity+$.unit_cost))]),C.sort(($,a)=>$.order<a.order?-1:$.order>a.order?1:0),e.jsx("div",{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"row g-4",children:C.map(($,a)=>{var c,p,A,F,E,T,P,n,j,v,y,V,M,D,L,K,ie,X,be,Z,pe,te,R,I,ae,ce,$e,ee,ye,we,ke,ne,le,oe,re,l,_,S,k,q,Ve,De,Pe,Re,Le,ze,Ee,Te,Be,Qe,Ue,Oe,He,Je,Ye,Ge,We,Ke,Xe,Ze,Ie,es,ss,is,ts,as,cs,ns,ls,os,rs,ds,ms,hs,us,js,_s,xs,vs,gs,fs,Ns,bs,ps,$s,ys,ws,ks,Fs,Ss,Cs,Ms,qs,As,Vs,Ds,Ps,Rs,Ls,zs,Es,Ts,Bs,Qs,Us,Os,Hs,Js,Ys,Gs,Ws,Ks,Xs;return e.jsx("div",{className:"col-xl-12",children:e.jsx(xi,{id:"ItemAccordion",color:"dark",activeItemId:"ItemAccordionItem_"+a,children:e.jsxs(vi,{id:"ItemAccordionItem_"+a,title:t.sectionMode?`${s+1}.${a+1} Item ${a+1}`:`${s+1}.0 Item ${a+1}`,children:[e.jsxs(G,{id:"#item_card_id#"+a,shadow:"none",borderSize:1,borderColor:"light",children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:e.jsxs(Me,{tag:"div",className:"h3",children:["Item ",a+1,"  "]})}),e.jsx(vt,{children:e.jsx(w,{color:"danger",icon:"Delete",tag:"a",hidden:t.isViewMode,onClick:()=>{f(a)},children:"Delete Item"})})]}),e.jsx(W,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs(h,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:[e.jsx("input",{id:"product_desc",className:"form-control "+((F=(A=(p=(c=x.sections)==null?void 0:c[s])==null?void 0:p.items)==null?void 0:A[a])!=null&&F.product_description?"is-invalid":""),...i(`sections.${s}.items.${a}.product_description`),type:"text",placeholder:"product_desc",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(j=(n=(P=(T=(E=x.sections)==null?void 0:E[s])==null?void 0:T.items)==null?void 0:P[a])==null?void 0:n.product_description)==null?void 0:j.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"brand",label:"Brand",isFloating:!0,children:[e.jsx("input",{id:"brand",className:"form-control "+((M=(V=(y=(v=x.sections)==null?void 0:v[s])==null?void 0:y.items)==null?void 0:V[a])!=null&&M.brand?"is-invalid":""),...i(`sections.${s}.items.${a}.brand`),type:"text",placeholder:"brand",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(X=(ie=(K=(L=(D=x.sections)==null?void 0:D[s])==null?void 0:L.items)==null?void 0:K[a])==null?void 0:ie.brand)==null?void 0:X.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"model",label:"Model",isFloating:!0,children:[e.jsx("input",{id:"model",className:"form-control "+((te=(pe=(Z=(be=x.sections)==null?void 0:be[s])==null?void 0:Z.items)==null?void 0:pe[a])!=null&&te.model?"is-invalid":""),...i(`sections.${s}.items.${a}.model`),type:"text",placeholder:"model",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:($e=(ce=(ae=(I=(R=x.sections)==null?void 0:R[s])==null?void 0:I.items)==null?void 0:ae[a])==null?void 0:ce.model)==null?void 0:$e.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"remarks",label:"Remarks",isFloating:!0,children:[e.jsx("input",{id:"remarks",className:"form-control "+((ke=(we=(ye=(ee=x.sections)==null?void 0:ee[s])==null?void 0:ye.items)==null?void 0:we[a])!=null&&ke.remarks?"is-invalid":""),...i(`sections.${s}.items.${a}.remarks`),type:"text",placeholder:"remarks",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(l=(re=(oe=(le=(ne=x.sections)==null?void 0:ne[s])==null?void 0:le.items)==null?void 0:oe[a])==null?void 0:re.remarks)==null?void 0:l.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"quantity",label:"Quantity",isFloating:!0,children:[e.jsx("input",{id:"quantity",className:"form-control "+((q=(k=(S=(_=x.sections)==null?void 0:_[s])==null?void 0:S.items)==null?void 0:k[a])!=null&&q.quantity?"is-invalid":""),...i(`sections.${s}.items.${a}.quantity`),type:"text",placeholder:"quantity",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Le=(Re=(Pe=(De=(Ve=x.sections)==null?void 0:Ve[s])==null?void 0:De.items)==null?void 0:Pe[a])==null?void 0:Re.quantity)==null?void 0:Le.message})]})}),e.jsx("div",{className:"col-3",children:e.jsxs(h,{id:"unit",label:"Unit",isFloating:!0,children:[e.jsx("input",{id:"unit",className:"form-control "+((Be=(Te=(Ee=(ze=x.sections)==null?void 0:ze[s])==null?void 0:Ee.items)==null?void 0:Te[a])!=null&&Be.unit?"is-invalid":""),...i(`sections.${s}.items.${a}.unit`),type:"text",placeholder:"unit",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(Je=(He=(Oe=(Ue=(Qe=x.sections)==null?void 0:Qe[s])==null?void 0:Ue.items)==null?void 0:Oe[a])==null?void 0:He.unit)==null?void 0:Je.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:[e.jsx("input",{id:"unit_cost",className:"form-control "+((Ke=(We=(Ge=(Ye=x.sections)==null?void 0:Ye[s])==null?void 0:Ge.items)==null?void 0:We[a])!=null&&Ke.unit_cost?"is-invalid":""),...i(`sections.${s}.items.${a}.unit_cost`),type:"text",placeholder:"unit_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(ss=(es=(Ie=(Ze=(Xe=x.sections)==null?void 0:Xe[s])==null?void 0:Ze.items)==null?void 0:Ie[a])==null?void 0:es.unit_cost)==null?void 0:ss.message})]})}),e.jsx("div",{className:"col-2 d-flex align-items-center",children:e.jsxs(h,{id:"estimated_cost",label:"Estimated Cost",className:"form-check form-check-inline",children:[e.jsx("input",{id:"estimated_cost",className:"form-check-input",...i(`sections.${s}.items.${a}.estimated_cost`),type:"checkbox",placeholder:"estimated_cost",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(ns=(cs=(as=(ts=(is=x.sections)==null?void 0:is[s])==null?void 0:ts.items)==null?void 0:as[a])==null?void 0:cs.estimated_cost)==null?void 0:ns.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_cost",label:"Total Cost",isFloating:!0,children:[e.jsx("input",{id:"total_cost",className:"form-control "+((ds=(rs=(os=(ls=x.sections)==null?void 0:ls[s])==null?void 0:os.items)==null?void 0:rs[a])!=null&&ds.total_cost?"is-invalid":""),...i(`sections.${s}.items.${a}.total_cost`),type:"text",placeholder:"total_cost",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(_s=(js=(us=(hs=(ms=x.sections)==null?void 0:ms[s])==null?void 0:hs.items)==null?void 0:us[a])==null?void 0:js.total_cost)==null?void 0:_s.message})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"margin",label:"Margin",isFloating:!0,children:[e.jsx("input",{id:"margin",className:"form-control "+((fs=(gs=(vs=(xs=x.sections)==null?void 0:xs[s])==null?void 0:vs.items)==null?void 0:gs[a])!=null&&fs.margin?"is-invalid":""),...i(`sections.${s}.items.${a}.margin`),type:"text",placeholder:"margin",disabled:t.isViewMode,onChange:Y=>{var B,Q,U,O,H,J,de,me,he,ue;r(`sections.${s}.items.${a}.unit_price`,Nt((Q=(B=b.sections)==null?void 0:B[s])==null?void 0:Q.items[a].unit_cost,parseFloat(Y.target.value))),r(`sections.${s}.items.${a}.total_price`,Ne((O=(U=b.sections)==null?void 0:U[s])==null?void 0:O.items[a].unit_price,(J=(H=b.sections)==null?void 0:H[s])==null?void 0:J.items[a].quantity)),r(`sections.${s}.items.${a}.margin_percentage`,Ae((me=(de=b.sections)==null?void 0:de[s])==null?void 0:me.items[a].unit_cost,(ue=(he=b.sections)==null?void 0:he[s])==null?void 0:ue.items[a].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(ys=($s=(ps=(bs=(Ns=x.sections)==null?void 0:Ns[s])==null?void 0:bs.items)==null?void 0:ps[a])==null?void 0:$s.margin)==null?void 0:ys.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"margin_percentage",label:"Margin Percentage",isFloating:!0,children:[e.jsx("input",{id:"margin_percentage",className:"form-control "+((Ss=(Fs=(ks=(ws=x.sections)==null?void 0:ws[s])==null?void 0:ks.items)==null?void 0:Fs[a])!=null&&Ss.margin_percentage?"is-invalid":""),...i(`sections.${s}.items.${a}.margin_percentage`),type:"text",placeholder:"margin_percentage",disabled:t.isViewMode,onChange:Y=>{var B,Q,U,O,H,J,de,me,he,ue;r(`sections.${s}.items.${a}.unit_price`,bt((Q=(B=b.sections)==null?void 0:B[s])==null?void 0:Q.items[a].unit_cost,parseFloat(Y.target.value))),r(`sections.${s}.items.${a}.total_price`,Ne((O=(U=b.sections)==null?void 0:U[s])==null?void 0:O.items[a].unit_price,(J=(H=b.sections)==null?void 0:H[s])==null?void 0:J.items[a].quantity)),r(`sections.${s}.items.${a}.margin`,qe((me=(de=b.sections)==null?void 0:de[s])==null?void 0:me.items[a].unit_cost,(ue=(he=b.sections)==null?void 0:he[s])==null?void 0:ue.items[a].unit_price))}}),e.jsx("div",{className:"invalid-feedback",children:(Vs=(As=(qs=(Ms=(Cs=x.sections)==null?void 0:Cs[s])==null?void 0:Ms.items)==null?void 0:qs[a])==null?void 0:As.margin_percentage)==null?void 0:Vs.message})]})}),e.jsx("div",{className:"col-4",children:e.jsxs(h,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"unit_price",className:"form-control "+((Ls=(Rs=(Ps=(Ds=x.sections)==null?void 0:Ds[s])==null?void 0:Ps.items)==null?void 0:Rs[a])!=null&&Ls.unit_price?"is-invalid":""),...i(`sections.${s}.items.${a}.unit_price`),type:"text",placeholder:"unit_price",disabled:t.isViewMode,onChange:Y=>{var B,Q,U,O,H,J;r(`sections.${s}.items.${a}.margin`,qe((Q=(B=b.sections)==null?void 0:B[s])==null?void 0:Q.items[a].unit_cost,parseFloat(Y.target.value))),r(`sections.${s}.items.${a}.margin_percentage`,Ae((O=(U=b.sections)==null?void 0:U[s])==null?void 0:O.items[a].unit_cost,parseFloat(Y.target.value))),r(`sections.${s}.items.${a}.total_price`,Ne(parseFloat(Y.target.value),(J=(H=b.sections)==null?void 0:H[s])==null?void 0:J.items[a].quantity))}}),e.jsx("div",{className:"invalid-feedback",children:(Qs=(Bs=(Ts=(Es=(zs=x.sections)==null?void 0:zs[s])==null?void 0:Es.items)==null?void 0:Ts[a])==null?void 0:Bs.unit_price)==null?void 0:Qs.message})]})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:[e.jsx("input",{id:"total_price",className:"form-control "+((Js=(Hs=(Os=(Us=x.sections)==null?void 0:Us[s])==null?void 0:Os.items)==null?void 0:Hs[a])!=null&&Js.total_price?"is-invalid":""),...i(`sections.${s}.items.${a}.total_price`),type:"text",placeholder:"total_price",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:(Xs=(Ks=(Ws=(Gs=(Ys=x.sections)==null?void 0:Ys[s])==null?void 0:Gs.items)==null?void 0:Ws[a])==null?void 0:Ks.total_price)==null?void 0:Xs.message})]})}),e.jsx("div",{className:"col-md-12"})]})})]},$.id),e.jsx("div",{className:"col-md-12",children:e.jsx(Kt,{itemIndex:a,sectionIndex:s,isViewMode:t.isViewMode,sectionMode:t.sectionMode})})]})})})})})}),e.jsx("div",{className:"col-md-12",hidden:t.isViewMode||!t.sectionMode,children:e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:u,className:"float-end",children:"Add Item"})})]})})},Xt=t=>{const{register:s,control:i,formState:{errors:g},watch:x,setValue:d}=li(),r=x(),{append:b,remove:m,fields:f}=_i({name:"sections",control:i}),C=c=>{let p={product_description:"",brand:"",model:"",remarks:"",quantity:0,unit:"",unit_cost:0,total_cost:0,margin:0,margin_percentage:0,estimated_cost:!1,unit_price:0,total_price:0,order:0,sub_items:[]};b({name:"New Section "+(f.length+1),order:0,items:c?[]:[p],is_section_valid:c}),u.push(!0)},[u,$]=N.useState([]),a=(c,p)=>{const A=u;A[c]=p,$(F=>[...A])};return f.sort((c,p)=>c.order<p.order?-1:c.order>p.order?1:0),e.jsx("div",{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"row g-4",children:f.map((c,p)=>{var A,F,E,T,P,n,j,v;return c.is_section_valid?e.jsx("div",{className:"col-xl-12",children:e.jsx(xi,{id:"SectionAccordion",color:"dark",activeItemId:"SectionAccordionItem_"+p,children:e.jsx(vi,{id:"SectionAccordionItem_"+p,title:`${p+1}.0  `+r.sections[p].name,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12",hidden:!!t.isViewMode,children:e.jsxs(mi,{children:[e.jsx(hi,{hasIcon:!1,children:e.jsx(w,{color:"light",isLight:!0,icon:"MoreVert",className:"float-end"})}),e.jsxs(ui,{children:[e.jsx(ai,{children:e.jsx("span",{onClick:()=>a(p,!0),children:"Rename Section"})}),e.jsx(ai,{onClick:()=>{m(p)},children:"Delete Section"})]})]})}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"row",hidden:!u[p],children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(h,{id:"name",label:"Section Name",isFloating:!0,children:[e.jsx("input",{id:"name",className:"form-control "+((F=(A=g.sections)==null?void 0:A[p])!=null&&F.name?"is-invalid":""),...s(`sections.${p}.name`),type:"text",placeholder:"name",disabled:t.isViewMode}),e.jsx("div",{className:"invalid-feedback",children:(P=(T=(E=g.sections)==null?void 0:E[p])==null?void 0:T.name)==null?void 0:P.message})]})}),e.jsx("div",{className:"col-md-1 d-flex align-items-center",children:e.jsx(w,{color:"success",icon:"check",rounded:1,isDisable:((v=(j=(n=g.sections)==null?void 0:n[p])==null?void 0:j.name)==null?void 0:v.message)!=null,onClick:()=>a(p,!1)})})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"col-md-12",children:e.jsx(_t,{sectionIndex:p,isViewMode:t.isViewMode,sectionMode:!0})})]})})})}):e.jsx(_t,{sectionIndex:p,isViewMode:t.isViewMode,sectionMode:!1})})})}),e.jsxs("div",{className:"col-md-12",hidden:!!t.isViewMode,children:[e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:()=>{C(!0)},hidden:t.isViewMode,className:"float-end order-2",children:"Add Section"}),e.jsx("div",{className:"order-1 float-end",children:"  "}),e.jsx(w,{color:"info",icon:"Add",tag:"a",onClick:()=>{C(!1)},className:"float-end order-0",hidden:t.isViewMode,children:"Add Item"})]}),e.jsx("div",{className:"col-md-12",hidden:!!t.isViewMode,children:e.jsx(w,{color:"danger",tag:"a",onClick:()=>{d("sections",[])},hidden:t.isViewMode,isLight:!0,children:"Reset"})})]})})},aa=t=>{var ne,le,oe,re;const{register:s,formState:{errors:i,isSubmitting:g},watch:x,handleSubmit:d,setValue:r,control:b}=li(),m=x(),[f,C]=N.useState(t.create_new_variance?t.create_new_variance:!1),u=t.mode.toLowerCase()=="view",$=t.mode.charAt(0).toUpperCase()+t.mode.slice(1).toLowerCase()+" Quotation ",[a,c]=N.useState(!(((ne=t.status)==null?void 0:ne.toLowerCase())==se.AWARDED.name.toLowerCase()||((le=t.status)==null?void 0:le.toLowerCase())==se.COMPLETED.name.toLowerCase()||((oe=t.status)==null?void 0:oe.toLowerCase())==se.REJECTED.name.toLowerCase()));N.useEffect(()=>{f&&c(!0)},[f]);const p=(re=t.status)==null?void 0:re.toUpperCase();var A=se[p];A==null&&(A=se.NONE);const[F,E]=N.useState(A);N.useEffect(()=>{t.mode=="create"?(r("status","Submitted"),c(!1)):r("status",F.name)},[F]);const[T,P]=N.useState(),n=l=>{P(l)},j=xt(),v=()=>{St(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(ii,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Quotation saved"})]}),"Quotation saved successfully")},y=()=>{j("../quotation")},V=l=>{j(`../quotation/edit/${t.quotation_rev_id}`,{state:{create_new_variance:l}})},M={headers:{Authorization:`${localStorage.getItem("bts_token")}`}},D=async l=>{z.post("undefined/quotation/",l,M).then(_=>{v(),y()})},L=async(l,_)=>{z.put(`undefined/quotation/${l}/${f}`,_,M).then(S=>{v(),y()})},[K,ie]=N.useState(),[X,be]=N.useState(),[Z,pe]=N.useState();N.useEffect(()=>{te("payment_terms"),te("validity"),ie(ut)},[]);const te=async l=>{let _=[];const S={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};z.get(`undefined/option/values/${l}`,S).then(k=>{if(k.data.option_values)for(var q=0;q<k.data.option_values.length;q++)_.push(k.data.option_values[q].option_value.toString());switch(l){case"payment_terms":return be([""].concat(_));case"lead_time":return ie([""].concat(_));case"validity":return pe([""].concat(_))}}).catch(k=>{switch(l){case"payment_terms":return Rt;case"lead_time":return ut;case"validity":return Pt}})},[R,I]=N.useState("Quotation");N.useEffect(()=>{var l=0,_=0;for(const S of m.sections)for(const k of S.items){l+=k.total_cost,_+=k.total_price;for(const q of k.sub_items)l+=q.total_cost,_+=q.total_price}r("total_cost",l),_=Bt(_,m.discount,m.sst),r("grand_total",_)},[JSON.stringify(m.sections),m.discount,m.sst]);const ae=async(l,_,S,k)=>{z.get(`undefined/quotation/${l}/pdf/${_}`,{responseType:"blob",headers:{Authorization:`${localStorage.getItem("bts_token")}`},params:{with_watermark:`${k}`}}).then(q=>{ji(q.data,S+".pdf")})},[ce,$e]=N.useState([]),[ee,ye]=N.useState([]),we=async()=>{const l={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};z.get("undefined/quotation/clients",l).then(_=>{$e(_.data.clients)})},ke=async()=>{const l={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};z.get("undefined/quotation/pic",l).then(_=>{ye(_.data.pics)})};return N.useEffect(()=>{we(),ke()},[]),e.jsxs($t,{title:$,children:[e.jsxs(yt,{children:[e.jsxs(wt,{children:[e.jsx(w,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>j(-1),children:"Back"}),e.jsx(dt,{}),e.jsx("strong",{className:"fs-5",children:$}),(t.mode=="view"||t.mode=="edit")&&e.jsxs(e.Fragment,{children:[e.jsx(dt,{}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Quotation No: ",t.quotation_no,"    ",e.jsx(jt,{className:"statusBadge",color:F.color,children:F.name})]})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("span",{children:["Revision: ",t.revision]})})]})]})]}),e.jsxs(kt,{children:[t.mode=="edit"&&e.jsx("div",{children:f?e.jsx(e.Fragment,{}):e.jsx(w,{color:"info",onClick:()=>{C(!f)},isLight:!!f,children:"Create New Variation"})}),t.mode=="view"&&e.jsx("div",{children:e.jsx(w,{color:"info",onClick:()=>V(!0),children:"Create New Variation"})})]})]}),e.jsx(Ft,{container:"fluid",children:e.jsxs("form",{onSubmit:d(async l=>{for(var _=0;_<l.sections.length;_++){l.sections[_].order=_+1;for(var S=0;S<l.sections[_].items.length;S++){l.sections[_].is_section_valid?l.sections[_].items[S].order=S+1:l.sections[_].items[S].order=_+1;for(var k=0;k<l.sections[_].items[S].sub_items.length;k++)l.sections[_].items[S].sub_items[k].order=k+1}}const q=Object.assign({attachment_list:T,variance:t.variance},l);t.quotation_id?L(t.quotation_id,q):D(q),console.log("Form submitted (attachment): ",JSON.stringify(q))}),children:[e.jsxs(G,{children:[e.jsx(Se,{children:e.jsx(Ce,{children:e.jsx(Me,{tag:"div",className:"h3",children:$})})}),e.jsx(W,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs(h,{id:"client_code",label:"Client Code",isFloating:!0,children:[e.jsx("input",{id:"client_code",className:"form-control "+(i.client_code?"is-invalid":""),...s("client_code"),type:"text",placeholder:"client_code",disabled:u,list:"client_code_list"}),e.jsx("datalist",{id:"client_code_list",children:ce.map(l=>e.jsx("option",{value:l.client_code}))}),e.jsx(e.Fragment,{children:i.client_code?e.jsx("div",{className:"invalid-feedback",children:i.client_code.message}):""})]})}),e.jsx("div",{className:"col-md-9",children:e.jsxs(h,{id:"client",label:"Client",isFloating:!0,children:[e.jsx("input",{id:"client",className:"form-control "+(i.client?"is-invalid":""),...s("client"),type:"text",placeholder:"client",disabled:u,list:"client_list"}),e.jsx("datalist",{id:"client_list",children:ce.map(l=>e.jsx("option",{value:l.client}))}),e.jsx(e.Fragment,{children:i.client?e.jsx("div",{className:"invalid-feedback",children:i.client.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"end_user",label:"End User",isFloating:!0,children:[e.jsx("input",{id:"end_user",className:"form-control "+(i.end_user?"is-invalid":""),...s("end_user"),type:"text",placeholder:"end_user",disabled:u}),e.jsx(e.Fragment,{children:i.end_user?e.jsx("div",{className:"invalid-feedback",children:i.end_user.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"site_location",label:"Site Location",isFloating:!0,children:[e.jsx("input",{id:"site_location",className:"form-control "+(i.site_location?"is-invalid":""),...s("site_location"),type:"text",placeholder:"site_location",disabled:u}),e.jsx(e.Fragment,{children:i.site_location?e.jsx("div",{className:"invalid-feedback",children:i.site_location.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"building",label:"Building",isFloating:!0,children:[e.jsx("input",{id:"building",className:"form-control "+(i.building?"is-invalid":""),...s("building"),type:"text",placeholder:"building",disabled:u}),e.jsx(e.Fragment,{children:i.building?e.jsx("div",{className:"invalid-feedback",children:i.building.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"pic",label:"PIC",isFloating:!0,children:[e.jsx("input",{id:"pic",className:"form-control "+(i.pic?"is-invalid":""),...s("pic"),type:"text",placeholder:"pic",disabled:u,list:"pic_list"}),e.jsx("datalist",{id:"pic_list",children:ee.map(l=>e.jsx("option",{value:l.pic}))}),e.jsx(e.Fragment,{children:i.pic?e.jsx("div",{className:"invalid-feedback",children:i.pic.message}):""})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"pic_email",label:"PIC Email",isFloating:!0,children:[e.jsx("input",{id:"pic_email",className:"form-control "+(i.pic_email?"is-invalid":""),...s("pic_email"),type:"text",placeholder:"pic_email",disabled:u,list:"pic_email_list"}),e.jsx("datalist",{id:"pic_email_list",children:ee.map(l=>e.jsx("option",{value:l.email}))}),e.jsx(e.Fragment,{children:i.pic_email?e.jsx("div",{className:"invalid-feedback",children:i.pic_email.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"pic_contact_number",label:"PIC Contact No.",isFloating:!0,children:[e.jsx("input",{id:"pic_contact_number",className:"form-control "+(i.pic_contact_number?"is-invalid":""),...s("pic_contact_number"),type:"text",placeholder:"pic_contact_number",disabled:u,list:"pic_contact_number_list"}),e.jsx("datalist",{id:"pic_contact_number_list",children:ee.map(l=>e.jsx("option",{value:l.pic_contact_number}))}),e.jsx(e.Fragment,{children:i.pic_contact_number?e.jsx("div",{className:"invalid-feedback",children:i.pic_contact_number.message}):""})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"project_ref",label:"Project Reference",isFloating:!0,children:[e.jsx("input",{id:"project_ref",className:"form-control "+(i.project_reference?"is-invalid":""),...s("project_reference"),type:"text",placeholder:"project_ref",disabled:u}),e.jsx(e.Fragment,{children:i.project_reference?e.jsx("div",{className:"invalid-feedback",children:i.project_reference.message}):""})]})})]})}),e.jsx(ti,{children:e.jsx(e.Fragment,{})})]}),e.jsx(G,{children:e.jsxs(W,{children:[e.jsxs(Lt,{children:[e.jsx(ri,{onClick:()=>I("Quotation"),isActive:R=="Quotation",children:e.jsx(w,{children:"Quotation"})}),e.jsx(ri,{onClick:()=>I("Attachments"),isActive:R=="Attachments",children:e.jsx(w,{children:"Attachments"})}),e.jsx(ri,{onClick:()=>I("Revisions"),isActive:R=="Revisions",hidden:t.mode=="create",children:e.jsx(w,{children:"Revisions"})})]}),e.jsx("hr",{}),e.jsxs("div",{hidden:R!="Quotation",children:[e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row gt-4",children:[e.jsxs("div",{className:"col-md-6 d-flex",children:[e.jsx("div",{className:"row",hidden:t.mode=="create",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("span",{children:["Quotation No: ",t.quotation_no," ","  "]}),e.jsx(jt,{className:"statusBadge",color:F.color,children:F.name}),"   ",e.jsx("br",{}),e.jsxs("span",{children:["Revision: ",t.revision]})]})}),e.jsxs(mi,{children:[e.jsx(hi,{hasIcon:!1,children:e.jsx(w,{color:"info",isLight:!0,icon:"Download",hidden:!u,children:"PDF"})}),e.jsxs(ui,{children:[e.jsx(ai,{children:e.jsx("span",{onClick:()=>ae(t.quotation_id,t.quotation_rev_id,t.quotation_no,!1),children:"Customer View"})}),e.jsx(ai,{onClick:()=>ae(t.quotation_id,t.quotation_rev_id,t.quotation_no,!0),children:"Internal View"})]})]})]}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-end",children:[e.jsxs(mi,{children:[e.jsx(hi,{hasIcon:!1,children:e.jsx(w,{isLink:!0,color:F.color,icon:"Circle",className:"text-nowrap order-0 float-end",isDisable:u,hidden:!a,children:F.name})}),e.jsx(ui,{children:Object.keys(se).map(l=>e.jsx(ai,{onClick:()=>E(se[l]),children:e.jsxs("div",{children:[e.jsx(ii,{icon:"Circle",color:se[l].color}),se[l].name]})},l))})]}),e.jsx("div",{className:"order-2 float-end",children:" "}),e.jsx(w,{color:"info",hidden:!u,className:"order-2 float-end",onClick:()=>V(!1),children:"Create Revision"})]})]})}),e.jsx("br",{}),e.jsx(Xt,{isViewMode:u}),e.jsx("br",{})]}),e.jsx("div",{hidden:R!="Attachments",children:u?e.jsx(Wt,{quotation_id:t.quotation_id,variance:t.variance}):e.jsx(Yt,{setAttachmentIds:n,className:"",quotation_rev_id:t.quotation_rev_id,isViewMode:u})}),e.jsx("div",{hidden:R!="Revisions",children:t.mode!="create"&&e.jsx(Gt,{quotation_id:t.quotation_id,variance:t.variance})})]})}),e.jsxs(G,{hidden:R!="Quotation",children:[e.jsx(Se,{children:e.jsx(Ce,{children:e.jsx(Me,{tag:"div",className:"h3",children:"Options"})})}),e.jsx(W,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"lead_time",label:"Lead Time",children:[e.jsx("select",{id:"lead_time",className:"form-control "+(i.lead_time?"is-invalid":""),...s("lead_time"),disabled:u,children:K==null?void 0:K.map(l=>e.jsx("option",{value:l,children:l}))}),e.jsx(e.Fragment,{children:i.lead_time?e.jsx("div",{className:"invalid-feedback",children:i.lead_time.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"payment_terms",label:"Payment Terms",children:[e.jsx("select",{id:"payment_terms",className:"form-control "+(i.lead_time?"is-invalid":""),...s("payment_terms"),disabled:u,children:X==null?void 0:X.map(l=>e.jsx("option",{value:l,children:l}))}),e.jsx(e.Fragment,{children:i.payment_terms?e.jsx("div",{className:"invalid-feedback",children:i.payment_terms.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"validity",label:"Validity",children:[e.jsx("select",{id:"validity",className:"form-control "+(i.validity?"is-invalid":""),...s("validity"),disabled:u,children:Z==null?void 0:Z.map(l=>e.jsx("option",{value:l,children:l}))}),e.jsx(e.Fragment,{children:i.validity?e.jsx("div",{className:"invalid-feedback",children:i.validity.message}):""})]})}),e.jsx("div",{})]})}),e.jsx(ti,{children:e.jsx(e.Fragment,{})})]}),e.jsxs(G,{hidden:R!="Quotation",children:[e.jsx(Se,{children:e.jsx(Ce,{children:e.jsx(Me,{tag:"div",className:"h3",children:"Summary"})})}),e.jsxs(W,{className:"pb-0",children:[e.jsx(e.Fragment,{}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"reference_status",label:"Reference Status",isFloating:!0,children:[e.jsx("input",{id:"reference_status",className:"form-control "+(i.reference_status?"is-invalid":""),...s("reference_status"),type:"text",placeholder:"reference_status",disabled:u}),e.jsx(e.Fragment,{children:i.reference_status?e.jsx("div",{className:"invalid-feedback",children:i.reference_status.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"total_cost",label:"Total (RM)",isFloating:!0,children:[e.jsx("input",{id:"total_cost",className:"form-control "+(i.total_cost?"is-invalid":""),...s("total_cost"),type:"text",placeholder:"total_cost",disabled:!0}),e.jsx(e.Fragment,{children:i.total_cost?e.jsx("div",{className:"invalid-feedback",children:i.total_cost.message}):""})]})}),e.jsx("div",{className:"col-md-8",children:e.jsxs(h,{id:"note",label:"Note",isFloating:!0,children:[e.jsx("input",{id:"note",className:"form-control "+(i.note?"is-invalid":""),...s("note"),type:"text",placeholder:"note",disabled:u}),e.jsx(e.Fragment,{children:i.note?e.jsx("div",{className:"invalid-feedback",children:i.note.message}):""})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"discount",label:"Discount",isFloating:!0,children:[e.jsx("input",{id:"discount",className:"form-control "+(i.discount?"is-invalid":""),...s("discount"),type:"text",placeholder:"grand_tdiscountotal",disabled:u}),e.jsx(e.Fragment,{children:i.discount?e.jsx("div",{className:"invalid-feedback",children:i.discount.message}):""})]})}),e.jsx("div",{className:"col-md-8"}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"sst",label:"SST",isFloating:!0,children:[e.jsx("input",{id:"sst",className:"form-control "+(i.sst?"is-invalid":""),...s("sst"),type:"text",placeholder:"sst",disabled:u}),e.jsx(e.Fragment,{children:i.sst?e.jsx("div",{className:"invalid-feedback",children:i.sst.message}):""})]})}),e.jsx("div",{className:"col-md-8"}),e.jsx("div",{className:"col-md-4",children:e.jsxs(h,{id:"grand_total",label:"G/Total (RM)",isFloating:!0,children:[e.jsx("input",{id:"grand_total",className:"form-control "+(i.grand_total?"is-invalid":""),...s("grand_total"),type:"text",placeholder:"grand_total",disabled:!0}),e.jsx(e.Fragment,{children:i.grand_total?e.jsx("div",{className:"invalid-feedback",children:i.grand_total.message}):""})]})})]})]}),e.jsx(ti,{children:e.jsxs(gt,{children:[e.jsx(w,{color:"dark",icon:"Edit",type:"submit",hidden:u||!a,isDisable:g,onClick:()=>{r("status","Draft")},children:g?e.jsx(mt,{isSmall:!0,inButton:"onlyIcon"}):e.jsx("span",{children:"Draft"})}),e.jsx(w,{type:"submit",color:"success",icon:f?"null":"Save",hidden:u,isDisable:g,children:g?e.jsx(mt,{isSmall:!0,inButton:"onlyIcon"}):f?e.jsxs("span",{children:["Save"," ",e.jsx("small",{className:"text-decoration-underline",children:"(as New Variation)"})]}):e.jsx("span",{children:"Save"})})]})})]})]})})]})};export{ta as F,aa as Q};
