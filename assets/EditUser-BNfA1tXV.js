import{u as _,x as f,r as m,g as C,n as h,s as u,j as e,P as p,S as N,b as k,B as x,d as q,a as S,C as F,h as V,i as B,k as E,f as R,F as n,l as r,t as y,v as I,I as j}from"./index-CwoEAzsp.js";import{C as o}from"./Checks-D7iJ-_dK.js";import{S as M}from"./Select-CrRuHbm0.js";const P=[{value:"admin",text:"Admin"},{value:"user",text:"User"}],z=()=>{const c=_(),{user_id:d}=f(),[a,v]=m.useState(),w=async()=>{const l={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};h.get(`undefined/users/${d}`,l).then(s=>{v(s.data.data)})};m.useEffect(()=>{w()},[]);const i=C({initialValues:{name:a!=null&&a.name?a.name:"",role:a!=null&&a.role?a.role:"",email:a!=null&&a.email?a.email:"",mobile:a!=null&&a.mobile?a.mobile:"",view_quotation:a!=null&&a.view_quotation?a.view_quotation:"",write_quotation:a!=null&&a.write_quotation?a.write_quotation:"",view_mccr:a!=null&&a.view_mccr?a.view_mccr:"",write_mccr:a!=null&&a.write_mccr?a.write_mccr:""},enableReinitialize:!0,validate:l=>{const s={};return l.name||(s.name="Required"),l.role||(s.role="Required"),l.email||(s.email="Required"),l.mobile||(s.mobile="Required"),s},onSubmit:async l=>{await g(l)}}),g=async l=>{const s={headers:{Authorization:`${localStorage.getItem("bts_token")}`}},b={name:l.name,role:l.role,email:l.email,mobile:l.mobile,view_quotation:!!l.view_quotation,write_quotation:!!l.write_quotation,view_mccr:!!l.view_mccr,write_mccr:!!l.write_mccr};h.put(`undefined/users/${d}`,b,s).then(t=>{u(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(j,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Updated Successfully"})]}),"User Updated."),c("../admin",{replace:!0})}).catch(t=>u(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(j,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Error!"})]}),t))};return e.jsxs(p,{title:"Manage User",children:[e.jsx(N,{children:e.jsxs(k,{children:[e.jsx(x,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>c(-1),children:"Back"}),e.jsx(q,{}),e.jsx("strong",{className:"fs-5",children:"Profile Information"})]})}),e.jsx(S,{children:e.jsx("div",{className:"row h-100",children:e.jsx("div",{className:"col-xl-12 col-lg-12 col-md-6",children:e.jsxs(F,{stretch:!0,tag:"form",children:[e.jsx(V,{children:e.jsx(B,{children:e.jsx(E,{tag:"div",className:"h3",children:"Profile Information"})})}),e.jsx(R,{className:"pb-0",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(n,{id:"name",label:"Name",isFloating:!0,children:e.jsx(r,{placeholder:"Name",autoComplete:"additional-name",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values.name,isValid:i.isValid,isTouched:i.touched.name,invalidFeedback:i.errors.name,validFeedback:"Valid Name"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(n,{id:"role",label:"Role",isFloating:!0,children:e.jsx(M,{id:"inputGroupSelect01",ariaLabel:"Default select example",value:i.values.role,list:P,onChange:i.handleChange,onBlur:i.handleBlur,isValid:i.isValid,isTouched:i.touched.role,invalidFeedback:i.errors.role,validFeedback:"Valid Role"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(n,{id:"email",label:"Email",isFloating:!0,children:e.jsx(r,{placeholder:"Email",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values.email,isValid:i.isValid,isTouched:i.touched.email,invalidFeedback:i.errors.email,validFeedback:"Valid Email"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(n,{id:"mobile",label:"Mobile",isFloating:!0,children:e.jsx(r,{placeholder:"Mobile",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values.mobile,isValid:i.isValid,isTouched:i.touched.mobile,invalidFeedback:i.errors.mobile,validFeedback:"Valid Mobile"})})}),e.jsx("div",{className:"col-md-12"}),e.jsx("div",{className:"col-md-12",children:e.jsx("h3",{children:"Manage Access"})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(n,{id:"view_quotation",children:e.jsx(o,{type:"switch",id:"view_quotation",label:"View Quotation",name:"view_quotation",onChange:i.handleChange,checked:i.values.view_quotation})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(n,{id:"write_quotation",children:e.jsx(o,{type:"switch",id:"write_quotation",label:"Create / Edit Quotation",name:"write_quotation",onChange:i.handleChange,checked:i.values.write_quotation})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(n,{id:"view_mccr",children:e.jsx(o,{type:"switch",id:"view_mccr",label:"View MCCR",name:"view_mccr",onChange:i.handleChange,checked:i.values.view_mccr})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(n,{id:"write_mccr",children:e.jsx(o,{type:"switch",id:"write_mccr",label:"Create / Edit MCCR",name:"write_mccr",onChange:i.handleChange,checked:i.values.write_mccr})})})]})})]})}),e.jsx(y,{children:e.jsx(I,{children:e.jsx(x,{color:"success",icon:"Save",tag:"a",target:"_blank",onClick:i.submitForm,children:"Save"})})})]})})})})]})};export{z as default};
