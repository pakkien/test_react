import{o as v,t as X,j as e,I as Y,C as S,g as N,h as M,i as q,B as b,k as P,l as y,F as n,p as s,q as T,r as m,s as L,u as pe,P as fe,S as ke,b as Ce,e as Ve,a as Fe,x as Be}from"./index-Ck-DJbj3.js";import{A as Se,a as Ne}from"./Accordion-BnOmIuyI.js";import{d as ee,M as Z,a as $,b as W,c as K}from"./Modal-LXFYpe1K.js";const w=i=>{const a={};return i.product_desc?i.product_desc.length<3?a.product_desc="Must be 3 characters or more":i.product_desc.length>20&&(a.product_desc="Must be 20 characters or less"):a.product_desc="Required",i.brand?i.brand.length<3?a.brand="Must be 3 characters or more":i.brand.length>20&&(a.brand="Must be 20 characters or less"):a.brand="Required",i.model?i.model.length<3?a.model="Must be 3 characters or more":i.model.length>20&&(a.model="Must be 20 characters or less"):a.model="Required",i.remarks?i.remarks.length<3?a.remarks="Must be 3 characters or more":i.remarks.length>20&&(a.remarks="Must be 20 characters or less"):a.remarks="Required",i.unit?i.unit.length<3?a.unit="Must be 3 characters or more":i.unit.length>20&&(a.unit="Must be 20 characters or less"):a.unit="Required",i.quantity?i.quantity.length<3?a.quantity="Must be 3 characters or more":i.quantity.length>20&&(a.quantity="Must be 20 characters or less"):a.quantity="Required",i.unit_cost?i.unit_cost.length<3?a.unit_cost="Must be 3 characters or more":i.unit_cost.length>20&&(a.unit_cost="Must be 20 characters or less"):a.unit_cost="Required",i.total_cost?i.total_cost.length<3?a.total_cost="Must be 3 characters or more":i.total_cost.length>20&&(a.total_cost="Must be 20 characters or less"):a.total_cost="Required",i.margin?i.margin.length<3?a.margin="Must be 3 characters or more":i.margin.length>20&&(a.margin="Must be 20 characters or less"):a.margin="Required",i.unit_price?i.unit_price.length<3?a.unit_price="Must be 3 characters or more":i.unit_price.length>20&&(a.unit_price="Must be 20 characters or less"):a.unit_price="Required",i.total_price?i.total_price.length<3?a.total_price="Must be 3 characters or more":i.total_price.length>20&&(a.total_price="Must be 20 characters or less"):a.total_price="Required",a},Me=i=>{const a=i.mode.toLowerCase()==="view",d=v({initialValues:{product_desc:i.data.product_desc,brand:i.data.brand,model:i.data.model,remarks:i.data.remarks,quantity:i.data.quantity,unit:i.data.unit,unit_cost:i.data.unit_cost,total_cost:i.data.total_cost,margin:i.data.margin,unit_price:i.data.unit_price,total_price:i.data.total_price},validate:w,onSubmit:()=>{X(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(Y,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Updated Successfully"})]}),"The user's account details have been successfully updated.")}}),o=_=>{i.deleteSubItemfunc(_)},p=_=>{i.editSubItemfunc(_)};return e.jsxs(S,{children:[e.jsxs(N,{children:[e.jsx(M,{children:e.jsxs(q,{tag:"div",className:"h3",children:["Sub-Item Details   ",e.jsx(b,{color:"info",icon:"Edit",hidden:!!a,onClick:()=>{p(i.data)},children:"Edit"})]})}),e.jsx(P,{children:e.jsx(b,{color:"danger",icon:"Delete",tag:"a",hidden:!!a,onClick:()=>{o(i.data)},children:"Delete Sub-Item"})})]}),e.jsx(y,{children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(s,{placeholder:"product_desc",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.product_desc,isValid:d.isValid,isTouched:d.touched.product_desc,invalidFeedback:d.errors.product_desc,validFeedback:"Valid product description",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(s,{placeholder:"brand",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.brand,isValid:d.isValid,isTouched:d.touched.brand,invalidFeedback:d.errors.brand,validFeedback:"Valid brand",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"model",label:"Model",isFloating:!0,children:e.jsx(s,{placeholder:"model",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.model,isValid:d.isValid,isTouched:d.touched.model,invalidFeedback:d.errors.model,validFeedback:"Valid model",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(s,{placeholder:"remarks",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.remarks,isValid:d.isValid,isTouched:d.touched.remarks,invalidFeedback:d.errors.remarks,validFeedback:"Valid remarks",disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(s,{placeholder:"quantity",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.quantity,isValid:d.isValid,isTouched:d.touched.quantity,invalidFeedback:d.errors.quantity,validFeedback:"Valid quantity",disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(s,{placeholder:"unit",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.unit,isValid:d.isValid,isTouched:d.touched.unit,invalidFeedback:d.errors.unit,validFeedback:"Valid unit",disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.unit_cost,isValid:d.isValid,isTouched:d.touched.unit_cost,invalidFeedback:d.errors.unit_cost,validFeedback:"Valid unit_cost",disabled:!0})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.total_cost,isValid:d.isValid,isTouched:d.touched.total_cost,invalidFeedback:d.errors.total_cost,validFeedback:"Valid total_cost",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(s,{placeholder:"margin",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.margin,isValid:d.isValid,isTouched:d.touched.margin,invalidFeedback:d.errors.margin,validFeedback:"Valid margin",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"unit_price",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.unit_price,isValid:d.isValid,isTouched:d.touched.unit_price,invalidFeedback:d.errors.unit_price,validFeedback:"Valid unit_price",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"total_price",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.total_price,isValid:d.isValid,isTouched:d.touched.total_price,invalidFeedback:d.errors.total_price,validFeedback:"Valid total_price",disabled:!0})})})]})}),e.jsx(T,{children:e.jsx(e.Fragment,{})})]})},qe=i=>{const[a,d]=m.useState(i.mode.toLowerCase()),[o,p]=m.useState(i),[_,I]=m.useState(0),t=v({initialValues:{product_desc:i.data.product_desc,brand:i.data.brand,model:i.data.model,remarks:i.data.remarks,quantity:i.data.quantity,unit:i.data.unit,unit_cost:i.data.unit_cost,total_cost:i.data.total_cost,margin:i.data.margin,unit_price:i.data.unit_price,total_price:i.data.total_price},validate:w,onSubmit:h=>{}}),f=h=>{i.deleteItemfunc(h)},R=h=>{i.editItemfunc(h)},k=h=>{o.data.sub_item=o.data.sub_item.filter(A=>A.sub_item_id!=h.sub_item_id),i.deleteSubItemfunc(h),I(_+1)},E=h=>{i.editSubItemfunc(h)},C=()=>{i.addItemfunc()},D=h=>{i.addSubItemfunc(h)};return e.jsxs(S,{id:"#item_card_id#"+i.data.item_id,onSubmit:t.handleSubmit,children:[e.jsxs(N,{children:[e.jsx(M,{children:e.jsxs(q,{tag:"div",className:"h3",children:["Item Details   ",e.jsx(b,{color:"info",icon:"Edit",hidden:a=="view",onClick:()=>{R(i.data)},children:"Edit"})]})}),e.jsx(P,{children:e.jsx(b,{color:"danger",icon:"Delete",tag:"a",hidden:a=="view",onClick:()=>{f(i.data)},children:"Delete Item"})})]}),e.jsx(y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(s,{placeholder:"product_desc",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.product_desc,isValid:t.isValid,isTouched:t.touched.product_desc,invalidFeedback:t.errors.product_desc,validFeedback:"Valid product description",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(s,{placeholder:"brand",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.brand,isValid:t.isValid,isTouched:t.touched.brand,invalidFeedback:t.errors.brand,validFeedback:"Valid brand",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"model",label:"Model",isFloating:!0,children:e.jsx(s,{placeholder:"model",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.model,isValid:t.isValid,isTouched:t.touched.model,invalidFeedback:t.errors.model,validFeedback:"Valid model",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(s,{placeholder:"remarks",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.remarks,isValid:t.isValid,isTouched:t.touched.remarks,invalidFeedback:t.errors.remarks,validFeedback:"Valid remarks",disabled:!0})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(s,{placeholder:"quantity",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.quantity,isValid:t.isValid,isTouched:t.touched.quantity,invalidFeedback:t.errors.quantity,validFeedback:"Valid quantity",disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(s,{placeholder:"unit",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.unit,isValid:t.isValid,isTouched:t.touched.unit,invalidFeedback:t.errors.unit,validFeedback:"Valid unit",disabled:!0})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.unit_cost,isValid:t.isValid,isTouched:t.touched.unit_cost,invalidFeedback:t.errors.unit_cost,validFeedback:"Valid unit_cost",disabled:!0})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.total_cost,isValid:t.isValid,isTouched:t.touched.total_cost,invalidFeedback:t.errors.total_cost,validFeedback:"Valid total_cost",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(s,{placeholder:"margin",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.margin,isValid:t.isValid,isTouched:t.touched.margin,invalidFeedback:t.errors.margin,validFeedback:"Valid margin",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"unit_price",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.unit_price,isValid:t.isValid,isTouched:t.touched.unit_price,invalidFeedback:t.errors.unit_price,validFeedback:"Valid unit_price",disabled:!0})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"total_price",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.total_price,isValid:t.isValid,isTouched:t.touched.total_price,invalidFeedback:t.errors.total_price,validFeedback:"Valid total_price",disabled:!0})})}),e.jsx("div",{className:"col-md-12",children:i.data.sub_item.length>0&&e.jsx(Se,{id:"accSample",activeItemId:i.data.item_id,color:"dark",children:e.jsx(Ne,{id:i.data.item_id,title:"Sub Item",children:i.data.sub_item.map(h=>e.jsx(Me,{mode:i.mode,data:h,deleteSubItemfunc:k,editSubItemfunc:E},h.sub_item_id))})})}),e.jsx("div",{className:"col-md-12"})]})}),e.jsx(T,{children:e.jsxs(L,{children:[e.jsx(b,{color:"info",icon:"Add",tag:"a",hidden:a=="view",onClick:()=>{C()},children:"Add Item"}),e.jsx(b,{color:"info",icon:"Add",tag:"a",hidden:a=="view",onClick:()=>{D(i.data.item_id)},children:"Add Sub-Item"})]})})]})},ye=i=>{const a={};return i.client?i.client.length<3?a.client="Must be 3 characters or more":i.client.length>20&&(a.client="Must be 20 characters or less"):a.client="Required",i.end_user?i.end_user.length<3?a.end_user="Must be 3 characters or more":i.end_user.length>20&&(a.end_user="Must be 20 characters or less"):a.end_user="Required",i.site_location?i.site_location.length<3?a.site_location="Must be 3 characters or more":i.site_location.length>20&&(a.site_location="Must be 20 characters or less"):a.site_location="Required",i.building?i.building.length<3?a.building="Must be 3 characters or more":i.building.length>20&&(a.building="Must be 20 characters or less"):a.building="Required",i.pic?i.pic.length<3?a.pic="Must be 3 characters or more":i.pic.length>20&&(a.pic="Must be 20 characters or less"):a.pic="Required",i.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(i.email)||(a.email="Invalid email address"):a.email="Required",i.project_ref?i.project_ref.length<3?a.project_ref="Must be 3 characters or more":i.project_ref.length>20&&(a.project_ref="Must be 20 characters or less"):a.project_ref="Required",i.reference_status?i.reference_status.length<3?a.reference_status="Must be 3 characters or more":i.reference_status.length>20&&(a.reference_status="Must be 20 characters or less"):a.reference_status="Required",i.note?i.note.length<3?a.note="Must be 3 characters or more":i.note.length>20&&(a.note="Must be 20 characters or less"):a.note="Required",i.total?i.total.length<3?a.total="Must be 3 characters or more":i.total.length>20&&(a.total="Must be 20 characters or less"):a.total="Required",i.g_total?i.g_total.length<3?a.g_total="Must be 3 characters or more":i.g_total.length>20&&(a.g_total="Must be 20 characters or less"):a.g_total="Required",a},Te=i=>{const a=v({initialValues:{product_desc:i.data.product_desc,brand:i.data.brand,model:i.data.model,remarks:i.data.remarks,quantity:i.data.quantity,unit:i.data.unit,unit_cost:i.data.unit_cost,total_cost:i.data.total_cost,margin:i.data.margin,unit_price:i.data.unit_price,total_price:i.data.total_price},validate:w,onSubmit:d=>{let o={item_id:i.data.item_id,product_desc:d.product_desc,brand:d.brand,model:d.model,remarks:d.remarks,quantity:d.quantity,unit:d.unit,unit_cost:d.unit_cost,total_cost:d.total_cost,margin:d.margin,unit_price:d.unit_price,total_price:d.total_price,sub_item:i.data.sub_item};i.mode.toLowerCase()=="edit"?i.editItemfunc(o):i.mode.toLowerCase()=="create"&&i.createItemfunc(o),i.setState(!1)}});return e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(s,{placeholder:"product_desc",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.product_desc,isValid:a.isValid,isTouched:a.touched.product_desc,invalidFeedback:a.errors.product_desc,validFeedback:"Valid product description"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(s,{placeholder:"brand",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.brand,isValid:a.isValid,isTouched:a.touched.brand,invalidFeedback:a.errors.brand,validFeedback:"Valid brand"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"model",label:"Model",isFloating:!0,children:e.jsx(s,{placeholder:"model",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.model,isValid:a.isValid,isTouched:a.touched.model,invalidFeedback:a.errors.model,validFeedback:"Valid model"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(s,{placeholder:"remarks",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.remarks,isValid:a.isValid,isTouched:a.touched.remarks,invalidFeedback:a.errors.remarks,validFeedback:"Valid remarks"})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(s,{placeholder:"quantity",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.quantity,isValid:a.isValid,isTouched:a.touched.quantity,invalidFeedback:a.errors.quantity,validFeedback:"Valid quantity"})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(s,{placeholder:"unit",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.unit,isValid:a.isValid,isTouched:a.touched.unit,invalidFeedback:a.errors.unit,validFeedback:"Valid unit"})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.unit_cost,isValid:a.isValid,isTouched:a.touched.unit_cost,invalidFeedback:a.errors.unit_cost,validFeedback:"Valid unit_cost"})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.total_cost,isValid:a.isValid,isTouched:a.touched.total_cost,invalidFeedback:a.errors.total_cost,validFeedback:"Valid total_cost"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(s,{placeholder:"margin",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.margin,isValid:a.isValid,isTouched:a.touched.margin,invalidFeedback:a.errors.margin,validFeedback:"Valid margin"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"unit_price",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.unit_price,isValid:a.isValid,isTouched:a.touched.unit_price,invalidFeedback:a.errors.unit_price,validFeedback:"Valid unit_price"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"total_price",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.total_price,isValid:a.isValid,isTouched:a.touched.total_price,invalidFeedback:a.errors.total_price,validFeedback:"Valid total_price"})})}),e.jsx(ee,{children:e.jsx(b,{color:"info",icon:i.mode.toLowerCase()=="create"?"Add":"Save",onClick:a.handleSubmit,children:i.mode.toLowerCase()=="create"?"Add Item":"Save Item"})})]})},we=i=>{const a=v({initialValues:{product_desc:i.data.product_desc,brand:i.data.brand,model:i.data.model,remarks:i.data.remarks,quantity:i.data.quantity,unit:i.data.unit,unit_cost:i.data.unit_cost,total_cost:i.data.total_cost,margin:i.data.margin,unit_price:i.data.unit_price,total_price:i.data.total_price},validate:w,onSubmit:d=>{let o={sub_item_id:i.data.sub_item_id,item_id:i.data.item_id,product_desc:d.product_desc,brand:d.brand,model:d.model,remarks:d.remarks,quantity:d.quantity,unit:d.unit,unit_cost:d.unit_cost,total_cost:d.total_cost,margin:d.margin,unit_price:d.unit_price,total_price:d.total_price};i.mode.toLowerCase()=="edit"?i.editSubItemfunc(o):i.mode.toLowerCase()=="create"&&i.createSubItemfunc(o),i.setState(!1)}});return e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"product_desc",label:"Product Description | Job Scope",isFloating:!0,children:e.jsx(s,{placeholder:"product_desc",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.product_desc,isValid:a.isValid,isTouched:a.touched.product_desc,invalidFeedback:a.errors.product_desc,validFeedback:"Valid product description"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"brand",label:"Brand",isFloating:!0,children:e.jsx(s,{placeholder:"brand",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.brand,isValid:a.isValid,isTouched:a.touched.brand,invalidFeedback:a.errors.brand,validFeedback:"Valid brand"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"model",label:"Model",isFloating:!0,children:e.jsx(s,{placeholder:"model",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.model,isValid:a.isValid,isTouched:a.touched.model,invalidFeedback:a.errors.model,validFeedback:"Valid model"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"remarks",label:"Remarks",isFloating:!0,children:e.jsx(s,{placeholder:"remarks",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.remarks,isValid:a.isValid,isTouched:a.touched.remarks,invalidFeedback:a.errors.remarks,validFeedback:"Valid remarks"})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"quantity",label:"Quantity",isFloating:!0,children:e.jsx(s,{placeholder:"quantity",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.quantity,isValid:a.isValid,isTouched:a.touched.quantity,invalidFeedback:a.errors.quantity,validFeedback:"Valid quantity"})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit",label:"Unit",isFloating:!0,children:e.jsx(s,{placeholder:"unit",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.unit,isValid:a.isValid,isTouched:a.touched.unit,invalidFeedback:a.errors.unit,validFeedback:"Valid unit"})})}),e.jsx("div",{className:"col-4",children:e.jsx(n,{id:"unit_cost",label:"Unit Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.unit_cost,isValid:a.isValid,isTouched:a.touched.unit_cost,invalidFeedback:a.errors.unit_cost,validFeedback:"Valid unit_cost"})})})]})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_cost",label:"Total Cost",isFloating:!0,children:e.jsx(s,{placeholder:"unit_cost",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.total_cost,isValid:a.isValid,isTouched:a.touched.total_cost,invalidFeedback:a.errors.total_cost,validFeedback:"Valid total_cost"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"margin",label:"Margin",isFloating:!0,children:e.jsx(s,{placeholder:"margin",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.margin,isValid:a.isValid,isTouched:a.touched.margin,invalidFeedback:a.errors.margin,validFeedback:"Valid margin"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"unit_price",label:"Unit Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"unit_price",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.unit_price,isValid:a.isValid,isTouched:a.touched.unit_price,invalidFeedback:a.errors.unit_price,validFeedback:"Valid unit_price"})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total_price",label:"Total Price (RM)",isFloating:!0,children:e.jsx(s,{placeholder:"total_price",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.total_price,isValid:a.isValid,isTouched:a.touched.total_price,invalidFeedback:a.errors.total_price,validFeedback:"Valid total_price"})})}),e.jsx(ee,{children:e.jsx(b,{color:"info",icon:i.mode.toLowerCase()=="create"?"Add":"Save",onClick:a.handleSubmit,children:i.mode.toLowerCase()=="create"?"Add Sub Item":"Save Sub Item"})})]})},Le=i=>{const a=pe(),d=i.mode+" Quotation",o=i.mode.toLowerCase()==="view",[p,_]=m.useState(!1),[I,t]=m.useState(!1),[f,R]=m.useState(!1),[k,E]=m.useState(!1),[C,D]=m.useState(!0),[h,A]=m.useState(null),[Q,ae]=m.useState(void 0),[O,ie]=m.useState(!0),[Ie,de]=m.useState(!1),[z,te]=m.useState(!0),V=()=>{R(!1),E(!1),D(!0),A("xl"),ae(void 0),ie(!0),de(!1),te(!0)},le={mode:"Create",data:{item_id:crypto.randomUUID(),product_desc:"",brand:"",model:"",remarks:"",quantity:"0",unit:"",unit_cost:"0",total_cost:"0",margin:"0",unit_price:"0",total_price:"0",sub_item:[]}},[j,H]=m.useState(le),ne={mode:"Create",data:(r=>({sub_item_id:crypto.randomUUID(),item_id:r,product_desc:"",brand:"",model:"",remarks:"",quantity:"0",unit:"",unit_cost:"0",total_cost:"0",margin:"0",unit_price:"0",total_price:"0"}))("")},[x,J]=m.useState(ne),[c,se]=m.useState(i),[F,B]=m.useState(0),re=r=>{c.data.item=c.data.item.filter(u=>u.item_id!=r.item_id),B(F+1)},ce=r=>{j.mode="Edit",j.data=r,H(j),_(!0),V()},oe=r=>{let u=c.data.item.findIndex(g=>g.item_id==r.item_id);c.data.item[u]=r,B(F+1)},G=()=>{j.mode="Create",j.data=he(),H(j),_(!0),V()},ue=r=>{c.data.item.push(r),se(c),B(F+1)},he=()=>({item_id:crypto.randomUUID(),product_desc:"",brand:"",model:"",remarks:"",quantity:"0",unit:"",unit_cost:"0",total_cost:"0",margin:"0",unit_price:"0",total_price:"0",sub_item:[]}),me=r=>({sub_item_id:crypto.randomUUID(),item_id:r,product_desc:"",brand:"",model:"",remarks:"",quantity:"0",unit:"",unit_cost:"0",total_cost:"0",margin:"0",unit_price:"0",total_price:"0"}),be=r=>{let u=c.data.item.findIndex(g=>g.item_id==r.item_id);c.data.item[u].sub_item=c.data.item[u].sub_item.filter(g=>g.sub_item_id!=r.sub_item_id),B(F+1)},_e=r=>{x.mode="Edit",x.data=r,J(x),t(!0),V()},ge=r=>{x.mode="Create",x.data=me(r),J(x),t(!0),V()},je=r=>{let u=c.data.item.findIndex(g=>g.item_id==r.item_id);c.data.item[u].sub_item.push(r)},xe=r=>{let u=c.data.item.findIndex(U=>U.item_id==r.item_id),g=c.data.item[u].sub_item.findIndex(U=>U.sub_item_id==r.sub_item_id);c.data.item[u].sub_item[g]=r};function ve(r){return new Promise(u=>setTimeout(u,r))}const l=v({initialValues:{client:c.data.client,end_user:c.data.end_user,site_location:c.data.site_location,building:c.data.building,pic:c.data.pic,email:c.data.email,project_ref:c.data.project_ref,reference_status:c.data.summary.reference_status,note:c.data.summary.note,total:c.data.summary.total,g_total:c.data.summary.g_total},validate:ye,onSubmit:async r=>{const u=Object.assign({quotation_id:c.data.quotation_id},r,{item:c.data.item});console.log(JSON.stringify(u)),X(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(Y,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Quotation saved"})]}),"Quotation saved successfully"),await ve(1e3),l.setSubmitting(!1)}});return e.jsxs(fe,{title:d,children:[e.jsx(ke,{children:e.jsxs(Ce,{children:[e.jsx(b,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>a(-1),children:"Back"}),e.jsx(Ve,{}),e.jsxs("strong",{className:"fs-5",children:[c.mode," Quotation"]})]})}),e.jsxs(Fe,{container:"fluid",children:[e.jsxs("form",{className:"form",id:"quotationFormId",onSubmit:l.handleSubmit,children:[e.jsxs(S,{children:[e.jsx(N,{children:e.jsx(M,{children:e.jsxs(q,{tag:"div",className:"h3",children:[c.mode," Quotation"]})})}),e.jsx(y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"client",label:"Client",isFloating:!0,children:e.jsx(s,{placeholder:"client",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.client,isValid:l.isValid,isTouched:l.touched.client,invalidFeedback:l.errors.client,validFeedback:"Valid Client",disabled:!!o})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"end_user",label:"End User",isFloating:!0,children:e.jsx(s,{placeholder:"end_user",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.end_user,isValid:l.isValid,isTouched:l.touched.end_user,invalidFeedback:l.errors.end_user,validFeedback:"Valid End User",disabled:!!o})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"site_location",label:"Site Location",isFloating:!0,children:e.jsx(s,{placeholder:"site_location",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.site_location,isValid:l.isValid,isTouched:l.touched.site_location,invalidFeedback:l.errors.site_location,validFeedback:"Valid Site Location",disabled:!!o})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"building",label:"Building",isFloating:!0,children:e.jsx(s,{placeholder:"building",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.building,isValid:l.isValid,isTouched:l.touched.building,invalidFeedback:l.errors.building,validFeedback:"Valid Building",disabled:!!o})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"pic",label:"PIC",isFloating:!0,children:e.jsx(s,{placeholder:"pic",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.pic,isValid:l.isValid,isTouched:l.touched.pic,invalidFeedback:l.errors.pic,validFeedback:"Valid PIC",disabled:!!o})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(n,{id:"email",label:"Email",isFloating:!0,children:e.jsx(s,{placeholder:"email",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.email,isValid:l.isValid,isTouched:l.touched.email,invalidFeedback:l.errors.email,validFeedback:"Valid Email",disabled:!!o})})}),e.jsx("div",{className:"col-md-12",children:e.jsx(n,{id:"project_ref",label:"Project Reference",isFloating:!0,children:e.jsx(s,{placeholder:"Project Reference",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.project_ref,isValid:l.isValid,isTouched:l.touched.project_ref,invalidFeedback:l.errors.project_ref,validFeedback:"Valid Project Reference",disabled:!!o})})})]})}),e.jsx(T,{children:e.jsx(L,{children:e.jsx(b,{color:"info",icon:"Add",tag:"a",hidden:!!o,onClick:G,children:"Add Item"})})})]}),c.data.item.map((r,u)=>e.jsx(qe,{mode:c.mode,data:r,deleteItemfunc:re,addItemfunc:G,editItemfunc:ce,addSubItemfunc:ge,editSubItemfunc:_e,deleteSubItemfunc:be},u+crypto.randomUUID())),e.jsxs(S,{children:[e.jsx(N,{children:e.jsx(M,{children:e.jsx(q,{tag:"div",className:"h3",children:"Summary"})})}),e.jsx(y,{className:"pb-0",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-8",children:e.jsx(n,{id:"reference_status",label:"Reference Status",isFloating:!0,children:e.jsx(s,{placeholder:"reference_status",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.reference_status,isValid:l.isValid,isTouched:l.touched.reference_status,invalidFeedback:l.errors.reference_status,validFeedback:"Valid reference status",disabled:!!o})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"total",label:"Total (RM)",isFloating:!0,children:e.jsx(s,{type:"number",step:2,placeholder:"total",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.total,isValid:l.isValid,isTouched:l.touched.total,invalidFeedback:l.errors.total,validFeedback:"Valid total",disabled:!!o})})}),e.jsx("div",{className:"col-md-8",children:e.jsx(n,{id:"note",label:"Note",isFloating:!0,children:e.jsx(s,{placeholder:"note",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.note,isValid:l.isValid,isTouched:l.touched.note,invalidFeedback:l.errors.note,validFeedback:"Valid note",disabled:!!o})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(n,{id:"g_total",label:"G/Total (RM)",isFloating:!0,children:e.jsx(s,{type:"number",step:.1,placeholder:"g_total",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.g_total,isValid:l.isValid,isTouched:l.touched.g_total,invalidFeedback:l.errors.g_total,validFeedback:"Valid G/total",disabled:!!o})})})]})}),e.jsx(T,{children:e.jsxs(L,{children:[e.jsx(b,{color:"dark",icon:"Edit",hidden:!!o,children:"Draft"}),e.jsx(b,{type:"submit",color:"success",icon:l.isSubmitting?"None":"Save",isDisable:l.isSubmitting,hidden:!!o,children:l.isSubmitting?e.jsx(Be,{isSmall:!0,inButton:"onlyIcon"}):"Save"})]})})]})]}),e.jsx("form",{children:e.jsxs(Z,{isOpen:p,setIsOpen:_,titleId:"itemEditModal",isStaticBackdrop:f,isScrollable:k,isCentered:C,size:h,fullScreen:Q,isAnimation:O,children:[e.jsx($,{setIsOpen:z?_:void 0,children:e.jsx(W,{id:"itemEditModalId",children:j.mode.toLowerCase()=="edit"?"Edit item":"Add item"})}),e.jsx(K,{children:e.jsx(Te,{mode:j.mode,data:j.data,editItemfunc:oe,createItemfunc:ue,setState:_})})]})}),e.jsx("form",{children:e.jsxs(Z,{isOpen:I,setIsOpen:t,titleId:"subItemEditModal",isStaticBackdrop:f,isScrollable:k,isCentered:C,size:h,fullScreen:Q,isAnimation:O,children:[e.jsx($,{setIsOpen:z?t:void 0,children:e.jsx(W,{id:"subItemEditModalId",children:x.mode.toLowerCase()=="edit"?"Edit Sub item":"Add Sub item"})}),e.jsx(K,{children:e.jsx(we,{mode:x.mode,data:x.data,editSubItemfunc:xe,createSubItemfunc:je,setState:t})})]})})]})]})};export{Le as S};
