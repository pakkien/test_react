import{o as g,K as b,r as n,p as C,j as e,P as _,S as f,b as N,B as c,d as k,a as y,C as F,q,s as V,t as S,f as R,F as r,v as l,G as B,H as E,x as h,y as m,I as u}from"./index-B9GvBkZm.js";import{C as d}from"./Checks-PqwKLuc6.js";import{S as P}from"./Select-D_CLxdjG.js";const T=[{value:"admin",text:"Admin"},{value:"user",text:"User"}],L=()=>{const o=g(),{user_id:p}=b(),[I,x]=n.useState(),w=async()=>{const s={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};h.get(`undefined/users/${p}`,s).then(i=>{x(i.data.data)})};n.useEffect(()=>{w()},[]);const a=C({initialValues:{name:"",role:"",email:"",mobile:"",password:"",retype_password:"",view_quotation:!0,write_quotation:!0,view_mccr:!0,write_mccr:!0},enableReinitialize:!0,validate:s=>{const i={};return s.name||(i.name="Required"),s.role||(i.role="Required"),s.email||(i.email="Required"),s.mobile||(i.mobile="Required"),s.password||(i.password="Required"),s.retype_password||(i.retype_password="Required"),s.retype_password!=s.password&&(i.retype_password="Retype password not match"),i},onSubmit:async s=>{await j(s)}}),j=async s=>{const i={headers:{Authorization:`${localStorage.getItem("bts_token")}`}},v={name:s.name,role:s.role,email:s.email,mobile:s.mobile,password:s.password,view_quotation:!!s.view_quotation,write_quotation:!!s.write_quotation,view_mccr:!!s.view_mccr,write_mccr:!!s.write_mccr};h.post("undefined/users",v,i).then(t=>{m(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(u,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"New User Added Successfully"})]}),"User Added."),o("../admin",{replace:!0})}).catch(t=>m(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(u,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Error!"})]}),t))};return e.jsxs(_,{title:"Manage User",children:[e.jsx(f,{children:e.jsxs(N,{children:[e.jsx(c,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>o(-1),children:"Back"}),e.jsx(k,{}),e.jsx("strong",{className:"fs-5",children:"Create User"})]})}),e.jsx(y,{children:e.jsx("div",{className:"row h-100",children:e.jsx("div",{className:"col-xl-12 col-lg-12 col-md-6",children:e.jsxs(F,{stretch:!0,tag:"form",children:[e.jsx(q,{children:e.jsx(V,{children:e.jsx(S,{tag:"div",className:"h3",children:"Create User"})})}),e.jsx(R,{className:"pb-0",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(r,{id:"name",label:"Name",isFloating:!0,children:e.jsx(l,{placeholder:"Name",autoComplete:"additional-name",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.name,isValid:a.isValid,isTouched:a.touched.name,invalidFeedback:a.errors.name,validFeedback:"Valid Name"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(r,{id:"role",label:"Role",isFloating:!0,children:e.jsx(P,{id:"inputGroupSelect01",ariaLabel:"Default select example",value:a.values.role,list:T,onChange:a.handleChange,onBlur:a.handleBlur,isValid:a.isValid,isTouched:a.touched.role,invalidFeedback:a.errors.role,validFeedback:"Valid Role"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(r,{id:"email",label:"Email",isFloating:!0,children:e.jsx(l,{placeholder:"Email",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.email,isValid:a.isValid,isTouched:a.touched.email,invalidFeedback:a.errors.email,validFeedback:"Valid Email"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(r,{id:"mobile",label:"Mobile",isFloating:!0,children:e.jsx(l,{placeholder:"Mobile",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.mobile,isValid:a.isValid,isTouched:a.touched.mobile,invalidFeedback:a.errors.mobile,validFeedback:"Valid Mobile"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(r,{id:"password",label:"Password",isFloating:!0,children:e.jsx(l,{placeholder:"Password",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.password,isValid:a.isValid,isTouched:a.touched.password,invalidFeedback:a.errors.password,validFeedback:"Valid Password",type:"password"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(r,{id:"retype_password",label:"Retype Password",isFloating:!0,children:e.jsx(l,{placeholder:"Retype Password",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.retype_password,isValid:a.isValid,isTouched:a.touched.retype_password,invalidFeedback:a.errors.retype_password,validFeedback:"Valid Retype Password",type:"password"})})}),e.jsx("div",{className:"col-md-12"}),e.jsx("div",{className:"col-md-12",children:e.jsx("h3",{children:"Manage Access"})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(r,{id:"view_quotation",children:e.jsx(d,{type:"switch",id:"view_quotation",label:"View Quotation",name:"view_quotation",onChange:a.handleChange,checked:a.values.view_quotation})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(r,{id:"write_quotation",children:e.jsx(d,{type:"switch",id:"write_quotation",label:"Create / Edit Quotation",name:"write_quotation",onChange:a.handleChange,checked:a.values.write_quotation})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(r,{id:"view_mccr",children:e.jsx(d,{type:"switch",id:"view_mccr",label:"View MCCR",name:"view_mccr",onChange:a.handleChange,checked:a.values.view_mccr})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(r,{id:"write_mccr",children:e.jsx(d,{type:"switch",id:"write_mccr",label:"Create / Edit MCCR",name:"write_mccr",onChange:a.handleChange,checked:a.values.write_mccr})})})]})})]})}),e.jsx(B,{children:e.jsx(E,{children:e.jsx(c,{color:"success",icon:"Save",tag:"a",target:"_blank",onClick:a.submitForm,children:"Save"})})})]})})})})]})};export{L as default};
