import{r as f,j as e,x as p,V as F,y as i,u as O,z as U,g as z,n as w,s as _,P as A,S as G,b as $,B as k,d as H,a as Q,C as W,h as J,i as K,k as X,f as Y,F as m,l as C,t as Z,v as D,I as N}from"./index-a5iBR9o4.js";import{S as ee}from"./Select-CE1d7w7r.js";const j=f.forwardRef(({id:r,className:u,children:s,isInline:d,isValid:c,isTouched:a,invalidFeedback:o,validFeedback:l,isTooltipFeedback:n,...v},t)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:t,id:r,className:p({"is-invalid":!c&&a&&o,"is-valid":!c&&a&&!o},u),...v,children:f.Children.map(s,x=>f.cloneElement(x,{isInline:x.props.isInline||d,isValid:c,isTouched:a,invalidFeedback:o,validFeedback:l,isTooltipFeedback:n,isValidMessage:!1}))}),e.jsx(F,{isTouched:a,invalidFeedback:o,validFeedback:l,isTooltip:n})]}));j.displayName="ChecksGroup";j.propTypes={id:i.string,className:i.string,children:i.node.isRequired,isInline:i.bool,isTouched:i.bool,isValid:i.bool,invalidFeedback:i.string,validFeedback:i.string,isTooltipFeedback:i.bool};j.defaultProps={id:void 0,className:void 0,isInline:!1,isTouched:!1,isValid:!1,invalidFeedback:void 0,validFeedback:void 0,isTooltipFeedback:!1};const h=f.forwardRef(({id:r,className:u,name:s,type:d,label:c,value:a,checked:o,disabled:l,isInline:n,isFormCheckInput:v,isValid:t,isTouched:x,invalidFeedback:g,validFeedback:q,isValidMessage:I,isTooltipFeedback:S,onBlur:y,onChange:V,onFocus:T,onInput:R,onInvalid:E,onSelect:B,ariaLabel:P,...L},M)=>{const b=e.jsx("input",{ref:M,className:p("form-check-input",{"mt-0":v,"is-invalid":!t&&x&&g,"is-valid":!t&&x&&!g},u),name:s===null?r:s,type:d==="radio"?"radio":"checkbox",id:r,value:a,checked:d==="radio"?o===a:!!o,disabled:l,onBlur:y,onChange:V,onFocus:T,onInput:R,onInvalid:E,onSelect:B,"aria-label":P,...L});return v?b:e.jsxs("div",{className:p("form-check",{"form-switch":d==="switch","form-check-inline":n}),children:[b,c&&e.jsx("label",{className:"form-check-label",htmlFor:r,children:c}),I&&e.jsx(F,{isTouched:x,invalidFeedback:g,validFeedback:q,isTooltip:S})]})});h.displayName="Checks";h.propTypes={id:i.string,className:i.string,name:i.string,type:i.oneOf(["checkbox","radio","switch"]),label:i.oneOfType([i.string,i.node]),value:i.oneOfType([i.string,i.number]),checked:i.oneOfType([i.string,i.bool]),disabled:i.bool,isInline:i.bool,isFormCheckInput:i.bool,isTouched:i.bool,isValid:i.bool,invalidFeedback:i.string,validFeedback:i.string,isValidMessage:i.bool,isTooltipFeedback:i.bool,onBlur:i.func,onChange:i.func,onFocus:i.func,onInput:i.func,onInvalid:i.func,onSelect:i.func,ariaLabel:i.string};h.defaultProps={id:void 0,className:void 0,name:null,type:"checkbox",label:null,checked:!1,disabled:!1,isInline:!1,isFormCheckInput:!1,isTouched:!1,isValid:!1,invalidFeedback:void 0,validFeedback:void 0,isValidMessage:!0,isTooltipFeedback:!1,onBlur:void 0,onChange:void 0,onFocus:void 0,onInput:void 0,onInvalid:void 0,onSelect:void 0,ariaLabel:void 0};const ie=[{value:"admin",text:"Admin"},{value:"user",text:"User"}],le=()=>{const r=O(),{user_id:u}=U(),[s,d]=f.useState(),c=async()=>{const l={headers:{Authorization:`${localStorage.getItem("bts_token")}`}};w.get(`undefined/users/${u}`,l).then(n=>{d(n.data.data)})};f.useEffect(()=>{c()},[]);const a=z({initialValues:{name:s!=null&&s.name?s.name:"",role:s!=null&&s.role?s.role:"",email:s!=null&&s.email?s.email:"",view_quotation:s!=null&&s.view_quotation?s.view_quotation:"",write_quotation:s!=null&&s.write_quotation?s.write_quotation:"",view_mccr:s!=null&&s.view_mccr?s.view_mccr:"",write_mccr:s!=null&&s.write_mccr?s.write_mccr:""},enableReinitialize:!0,validate:l=>{const n={};return l.name||(n.name="Required"),l.role||(n.role="Required"),l.email||(n.email="Required"),n},onSubmit:async l=>{await o(l)}}),o=async l=>{const n={headers:{Authorization:`${localStorage.getItem("bts_token")}`}},v={name:l.name,role:l.role,email:l.email,view_quotation:l.view_quotation,write_quotation:l.write_quotation,view_mccr:l.view_mccr,write_mccr:l.write_mccr};w.put(`undefined/users/${u}`,v,n).then(t=>{_(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(N,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Updated Successfully"})]}),"User Updated.")}).catch(t=>_(e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(N,{icon:"Info",size:"lg",className:"me-1"}),e.jsx("span",{children:"Error!"})]}),t))};return e.jsxs(A,{title:"Manage User",children:[e.jsx(G,{children:e.jsxs($,{children:[e.jsx(k,{color:"info",isLink:!0,icon:"ArrowBack",onClick:()=>r(-1),children:"Back"}),e.jsx(H,{}),e.jsx("strong",{className:"fs-5",children:"Profile Information"})]})}),e.jsx(Q,{children:e.jsx("div",{className:"row h-100",children:e.jsx("div",{className:"col-xl-12 col-lg-12 col-md-6",children:e.jsxs(W,{stretch:!0,tag:"form",children:[e.jsx(J,{children:e.jsx(K,{children:e.jsx(X,{tag:"div",className:"h3",children:"Profile Information"})})}),e.jsx(Y,{className:"pb-0",isScrollable:!0,children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(m,{id:"name",label:"Name",isFloating:!0,children:e.jsx(C,{placeholder:"Name",autoComplete:"additional-name",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.name,isValid:a.isValid,isTouched:a.touched.name,invalidFeedback:a.errors.name,validFeedback:"Valid Name"})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(m,{id:"role",label:"Role",isFloating:!0,children:e.jsx(ee,{id:"inputGroupSelect01",ariaLabel:"Default select example",value:a.values.role,list:ie,onChange:a.handleChange,onBlur:a.handleBlur,isValid:a.isValid,isTouched:a.touched.role,invalidFeedback:a.errors.role,validFeedback:"Valid Role"})})}),e.jsx("div",{className:"col-md-12",children:e.jsx(m,{id:"email",label:"Email",isFloating:!0,children:e.jsx(C,{placeholder:"Email",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.email,isValid:a.isValid,isTouched:a.touched.email,invalidFeedback:a.errors.email,validFeedback:"Valid Email"})})}),e.jsx("div",{className:"col-md-12"}),e.jsx("div",{className:"col-md-12",children:e.jsx("h3",{children:"Manage Access"})}),e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(m,{id:"view_quotation",children:e.jsx(h,{type:"switch",id:"view_quotation",label:"View Quotation",name:"view_quotation",onChange:a.handleChange,checked:a.values.view_quotation})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(m,{id:"write_quotation",children:e.jsx(h,{type:"switch",id:"write_quotation",label:"Create / Edit Quotation",name:"write_quotation",onChange:a.handleChange,checked:a.values.write_quotation})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(m,{id:"view_mccr",children:e.jsx(h,{type:"switch",id:"view_mccr",label:"View MCCR",name:"view_mccr",onChange:a.handleChange,checked:a.values.view_mccr})})}),e.jsx("div",{className:"col-md-3",children:e.jsx(m,{id:"write_mccr",children:e.jsx(h,{type:"switch",id:"write_mccr",label:"Create / Edit MCCR",name:"write_mccr",onChange:a.handleChange,checked:a.values.write_mccr})})})]})})]})}),e.jsx(Z,{children:e.jsx(D,{children:e.jsx(k,{color:"success",icon:"Save",tag:"a",target:"_blank",onClick:a.submitForm,children:"Save"})})})]})})})})]})};export{le as default};
